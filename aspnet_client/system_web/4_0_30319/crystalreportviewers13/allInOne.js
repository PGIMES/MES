/***

MochiKit.Base 1.4

See <http://mochikit.com/> for documentation, downloads, license, etc.

(c) 2005 Bob Ippolito.  All rights Reserved.

***/
if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Base")}if(typeof (MochiKit)=="undefined"){MochiKit={}}if(typeof (MochiKit.Base)=="undefined"){MochiKit.Base={}}MochiKit.Base.VERSION="1.4";MochiKit.Base.NAME="MochiKit.Base";MochiKit.Base.update=function(B,D){if(B===null){B={}}for(var C=1;C<arguments.length;C++){var E=arguments[C];if(typeof (E)!="undefined"&&E!==null){for(var A in E){B[A]=E[A]}}}return B};MochiKit.Base.update(MochiKit.Base,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},camelize:function(B){var A=B.split("-");var D=A[0];for(var C=1;C<A.length;C++){D+=A[C].charAt(0).toUpperCase()+A[C].substring(1)}return D},counter:function(A){if(arguments.length===0){A=1}return function(){return A++}},clone:function(B){var A=arguments.callee;if(arguments.length==1){A.prototype=B;return new A()}},extend:function(B,E,D){if(!D){D=0}if(E){var A=E.length;if(typeof (A)!="number"){if(typeof (MochiKit.Iter)!="undefined"){E=MochiKit.Iter.list(E);A=E.length}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(!B){B=[]}for(var C=D;C<A;C++){B.push(E[C])}}return B},updatetree:function(C,E){if(C===null){C={}}for(var D=1;D<arguments.length;D++){var F=arguments[D];if(typeof (F)!="undefined"&&F!==null){for(var B in F){var A=F[B];if(typeof (C[B])=="object"&&typeof (A)=="object"){arguments.callee(C[B],A)}else{C[B]=A}}}}return C},setdefault:function(B,D){if(B===null){B={}}for(var C=1;C<arguments.length;C++){var E=arguments[C];for(var A in E){if(!(A in B)){B[A]=E[A]}}}return B},_newNamedError:function(B,A,C){C.prototype=new MochiKit.Base.NamedError(B.NAME+"."+A);B[A]=C},operator:{identity:function(A){return A}},forwardCall:function(A){return function(){return this[A].apply(this,arguments)}},typeMatcher:function(){var B={};for(var A=0;A<arguments.length;A++){var C=arguments[A];B[C]=C}return function(){for(var D=0;D<arguments.length;D++){if(!(typeof (arguments[D]) in B)){return false}}return true}},isNull:function(){for(var A=0;A<arguments.length;A++){if(arguments[A]!==null){return false}}return true},isUndefinedOrNull:function(){for(var A=0;A<arguments.length;A++){var B=arguments[A];if(!(typeof (B)=="undefined"||B===null)){return false}}return true},isEmpty:function(A){return !MochiKit.Base.isNotEmpty.apply(this,arguments)},isNotEmpty:function(B){for(var A=0;A<arguments.length;A++){var C=arguments[A];if(!(C&&C.length)){return false}}return true},isArrayLike:function(){for(var A=0;A<arguments.length;A++){var C=arguments[A];var B=typeof (C);if((B!="object"&&!(B=="function"&&typeof (C.item)=="function"))||C===null||typeof (C.length)!="number"||C.nodeType===3){return false}}return true},isDateLike:function(){for(var A=0;A<arguments.length;A++){var B=arguments[A];if(typeof (B)!="object"||B===null||typeof (B.getTime)!="function"){return false}}return true},xmap:function(B){if(B===null){return MochiKit.Base.extend(null,arguments,1)}var C=[];for(var A=1;A<arguments.length;A++){C.push(B(arguments[A]))}return C},map:function(J,F){var B=MochiKit.Base;var H=MochiKit.Iter;var K=B.isArrayLike;if(arguments.length<=2){if(!K(F)){if(H){F=H.list(F);if(J===null){return F}}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(J===null){return B.extend(null,F)}var G=[];for(var E=0;E<F.length;E++){G.push(J(F[E]))}return G}else{if(J===null){J=Array}var A=null;for(E=1;E<arguments.length;E++){if(!K(arguments[E])){if(H){return H.list(H.imap.apply(null,arguments))}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}var C=arguments[E].length;if(A===null||A>C){A=C}}G=[];for(E=0;E<A;E++){var I=[];for(var D=1;D<arguments.length;D++){I.push(arguments[D][E])}G.push(J.apply(this,I))}return G}},xfilter:function(B){var C=[];if(B===null){B=MochiKit.Base.operator.truth}for(var A=1;A<arguments.length;A++){var D=arguments[A];if(B(D)){C.push(D)}}return C},filter:function(E,B,C){var F=[];var A=MochiKit.Base;if(!A.isArrayLike(B)){if(MochiKit.Iter){B=MochiKit.Iter.list(B)}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(E===null){E=A.operator.truth}if(typeof (Array.prototype.filter)=="function"){return Array.prototype.filter.call(B,E,C)}else{if(typeof (C)=="undefined"||C===null){for(var D=0;D<B.length;D++){var G=B[D];if(E(G)){F.push(G)}}}else{for(D=0;D<B.length;D++){G=B[D];if(E.call(C,G)){F.push(G)}}}}return F},_wrapDumbFunction:function(func){return function(){switch(arguments.length){case 0:return func();case 1:return func(arguments[0]);case 2:return func(arguments[0],arguments[1]);case 3:return func(arguments[0],arguments[1],arguments[2])}var args=[];for(var i=0;i<arguments.length;i++){args.push("arguments["+i+"]")}return eval("(func("+args.join(",")+"))")}},methodcaller:function(B){var A=MochiKit.Base.extend(null,arguments,1);if(typeof (B)=="function"){return function(C){return B.apply(C,A)}}else{return function(C){return C[B].apply(C,A)}}},method:function(B,C){var A=MochiKit.Base;return A.bind.apply(this,A.extend([C,B],arguments,2))},compose:function(B,F){var E=[];var A=MochiKit.Base;if(arguments.length===0){throw new TypeError("compose() requires at least one argument")}for(var C=0;C<arguments.length;C++){var D=arguments[C];if(typeof (D)!="function"){throw new TypeError(repr(D)+" is not a function")}E.push(D)}return function(){var G=arguments;for(var H=E.length-1;H>=0;H--){G=[E[H].apply(this,G)]}return G[0]}},bind:function(E,C){if(typeof (E)=="string"){E=C[E]}var D=E.im_func;var G=E.im_preargs;var B=E.im_self;var A=MochiKit.Base;if(typeof (E)=="function"&&typeof (E.apply)=="undefined"){E=A._wrapDumbFunction(E)}if(typeof (D)!="function"){D=E}if(typeof (C)!="undefined"){B=C}if(typeof (G)=="undefined"){G=[]}else{G=G.slice()}A.extend(G,arguments,2);var F=function(){var I=arguments;var J=arguments.callee;if(J.im_preargs.length>0){I=A.concat(J.im_preargs,I)}var H=J.im_self;if(!H){H=this}return J.im_func.apply(H,I)};F.im_self=B;F.im_func=D;F.im_preargs=G;return F},bindMethods:function(B){var D=MochiKit.Base.bind;for(var A in B){var C=B[A];if(typeof (C)=="function"){B[A]=D(C,B)}}},registerComparator:function(C,B,A,D){MochiKit.Base.comparatorRegistry.register(C,B,A,D)},_primitives:{"boolean":true,string:true,number:true},compare:function(F,B){if(F==B){return 0}var E=(typeof (F)=="undefined"||F===null);var G=(typeof (B)=="undefined"||B===null);if(E&&G){return 0}else{if(E){return -1}else{if(G){return 1}}}var A=MochiKit.Base;var D=A._primitives;if(!(typeof (F) in D&&typeof (B) in D)){try{return A.comparatorRegistry.match(F,B)}catch(H){if(H!=A.NotFound){throw H}}}if(F<B){return -1}else{if(F>B){return 1}}var C=A.repr;throw new TypeError(C(F)+" and "+C(B)+" can not be compared")},compareDateLike:function(B,A){return MochiKit.Base.compare(B.getTime(),A.getTime())},compareArrayLike:function(B,A){var F=MochiKit.Base.compare;var E=B.length;var G=0;if(E>A.length){G=1;E=A.length}else{if(E<A.length){G=-1}}for(var C=0;C<E;C++){var D=F(B[C],A[C]);if(D){return D}}return G},registerRepr:function(B,A,D,C){MochiKit.Base.reprRegistry.register(B,A,D,C)},repr:function(D){if(typeof (D)=="undefined"){return"undefined"}else{if(D===null){return"null"}}try{if(typeof (D.__repr__)=="function"){return D.__repr__()}else{if(typeof (D.repr)=="function"&&D.repr!=arguments.callee){return D.repr()}}return MochiKit.Base.reprRegistry.match(D)}catch(B){if(typeof (D.NAME)=="string"&&(D.toString==Function.prototype.toString||D.toString==Object.prototype.toString)){return D.NAME}}try{var C=(D+"")}catch(B){return"["+typeof (D)+"]"}if(typeof (D)=="function"){D=C.replace(/^\s+/,"");var A=D.indexOf("{");if(A!=-1){D=D.substr(0,A)+"{...}"}}return C},reprArrayLike:function(B){var A=MochiKit.Base;return"["+A.map(A.repr,B).join(", ")+"]"},reprString:function(A){return('"'+A.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},reprNumber:function(A){return A+""},registerJSON:function(B,A,D,C){MochiKit.Base.jsonRegistry.register(B,A,D,C)},evalJSON:function(){return eval("("+arguments[0]+")")},serializeJSON:function(A){var K=typeof (A);if(K=="undefined"){return"undefined"}else{if(K=="number"||K=="boolean"){return A+""}else{if(A===null){return"null"}}}var C=MochiKit.Base;var L=C.reprString;if(K=="string"){return L(A)}var J=arguments.callee;var E;if(typeof (A.__json__)=="function"){E=A.__json__();if(A!==E){return J(E)}}if(typeof (A.json)=="function"){E=A.json();if(A!==E){return J(E)}}if(K!="function"&&typeof (A.length)=="number"){var I=[];for(var G=0;G<A.length;G++){var B=J(A[G]);if(typeof (B)!="string"){B="undefined"}I.push(B)}return"["+I.join(", ")+"]"}try{E=C.jsonRegistry.match(A);if(A!==E){return J(E)}}catch(H){if(H!=C.NotFound){throw H}}if(K=="function"){return null}I=[];for(var D in A){var F;if(typeof (D)=="number"){F='"'+D+'"'}else{if(typeof (D)=="string"){F=L(D)}else{continue}}B=J(A[D]);if(typeof (B)!="string"){continue}I.push(F+":"+B)}return"{"+I.join(", ")+"}"},objEqual:function(B,A){return(MochiKit.Base.compare(B,A)===0)},arrayEqual:function(B,A){if(B.length!=A.length){return false}return(MochiKit.Base.compare(B,A)===0)},concat:function(){var B=[];var C=MochiKit.Base.extend;for(var A=0;A<arguments.length;A++){C(B,arguments[A])}return B},keyComparator:function(B){var A=MochiKit.Base;var D=A.compare;if(arguments.length==1){return function(F,E){return D(F[B],E[B])}}var C=A.extend(null,arguments);return function(F,E){var I=0;for(var H=0;(I===0)&&(H<C.length);H++){var G=C[H];I=D(F[G],E[G])}return I}},reverseKeyComparator:function(B){var A=MochiKit.Base.keyComparator.apply(this,arguments);return function(D,C){return A(C,D)}},partial:function(B){var A=MochiKit.Base;return A.bind.apply(this,A.extend([B,undefined],arguments,1))},listMinMax:function(F,A){if(A.length===0){return null}var E=A[0];var C=MochiKit.Base.compare;for(var B=1;B<A.length;B++){var D=A[B];if(C(D,E)==F){E=D}}return E},objMax:function(){return MochiKit.Base.listMinMax(1,arguments)},objMin:function(){return MochiKit.Base.listMinMax(-1,arguments)},findIdentical:function(A,D,E,B){if(typeof (B)=="undefined"||B===null){B=A.length}if(typeof (E)=="undefined"||E===null){E=0}for(var C=E;C<B;C++){if(A[C]===D){return C}}return -1},mean:function(){var D=0;var A=MochiKit.Base;var B=A.extend(null,arguments);var E=B.length;while(B.length){var F=B.shift();if(F&&typeof (F)=="object"&&typeof (F.length)=="number"){E+=F.length-1;for(var C=F.length-1;C>=0;C--){D+=F[C]}}else{D+=F}}if(E<=0){throw new TypeError("mean() requires at least one argument")}return D/E},median:function(){var B=MochiKit.Base.flattenArguments(arguments);if(B.length===0){throw new TypeError("median() requires at least one argument")}B.sort(compare);if(B.length%2==0){var A=B.length/2;return(B[A]+B[A-1])/2}else{return B[(B.length-1)/2]}},findValue:function(A,E,F,B){if(typeof (B)=="undefined"||B===null){B=A.length}if(typeof (F)=="undefined"||F===null){F=0}var D=MochiKit.Base.compare;for(var C=F;C<B;C++){if(D(A[C],E)===0){return C}}return -1},nodeWalk:function(C,D){var A=[C];var E=MochiKit.Base.extend;while(A.length){var B=D(A.shift());if(B){E(A,B)}}},nameFunctions:function(B){var C=B.NAME;if(typeof (C)=="undefined"){C=""}else{C=C+"."}for(var A in B){var E=B[A];if(typeof (E)=="function"&&typeof (E.NAME)=="undefined"){try{E.NAME=C+A}catch(D){}}}},queryString:function(H,I){if(typeof (MochiKit.DOM)!="undefined"&&arguments.length==1&&(typeof (H)=="string"||(typeof (H.nodeType)!="undefined"&&H.nodeType>0))){var G=MochiKit.DOM.formContents(H);H=G[0];I=G[1]}else{if(arguments.length==1){var A=H;H=[];I=[];for(var B in A){var J=A[B];if(typeof (J)!="function"){H.push(B);I.push(J)}}}}var E=[];var F=Math.min(H.length,I.length);var C=MochiKit.Base.urlEncode;for(var D=0;D<F;D++){J=I[D];if(typeof (J)!="undefined"&&J!==null){E.push(C(H[D])+"="+C(J))}}return E.join("&")},parseQueryString:function(H,I){var C=H.replace(/\+/g,"%20").split("&");var D={};var A;if(typeof (decodeURIComponent)!="undefined"){A=decodeURIComponent}else{A=unescape}if(I){for(var F=0;F<C.length;F++){var E=C[F].split("=");var B=A(E[0]);var G=D[B];if(!(G instanceof Array)){G=[];D[B]=G}G.push(A(E[1]))}}else{for(F=0;F<C.length;F++){E=C[F].split("=");D[A(E[0])]=A(E[1])}}return D}});MochiKit.Base.AdapterRegistry=function(){this.pairs=[]};MochiKit.Base.AdapterRegistry.prototype={register:function(B,A,D,C){if(C){this.pairs.unshift([B,A,D])}else{this.pairs.push([B,A,D])}},match:function(){for(var A=0;A<this.pairs.length;A++){var B=this.pairs[A];if(B[1].apply(this,arguments)){return B[2].apply(this,arguments)}}throw MochiKit.Base.NotFound},unregister:function(A){for(var B=0;B<this.pairs.length;B++){var C=this.pairs[B];if(C[0]==A){this.pairs.splice(B,1);return true}}return false}};MochiKit.Base.EXPORT=["flattenArray","noop","camelize","counter","clone","extend","update","updatetree","setdefault","keys","items","NamedError","operator","forwardCall","itemgetter","typeMatcher","isCallable","isUndefined","isUndefinedOrNull","isNull","isEmpty","isNotEmpty","isArrayLike","isDateLike","xmap","map","xfilter","filter","methodcaller","compose","bind","bindMethods","NotFound","AdapterRegistry","registerComparator","compare","registerRepr","repr","objEqual","arrayEqual","concat","keyComparator","reverseKeyComparator","partial","merge","listMinMax","listMax","listMin","objMax","objMin","nodeWalk","zip","urlEncode","queryString","serializeJSON","registerJSON","evalJSON","parseQueryString","findValue","findIdentical","flattenArguments","method","average","mean","median"];MochiKit.Base.EXPORT_OK=["nameFunctions","comparatorRegistry","reprRegistry","jsonRegistry","compareDateLike","compareArrayLike","reprArrayLike","reprString","reprNumber"];MochiKit.Base._exportSymbols=function(D,B){if(typeof (MochiKit.__export__)=="undefined"){MochiKit.__export__=(MochiKit.__compat__||(typeof (JSAN)=="undefined"&&typeof (dojo)=="undefined"))}if(!MochiKit.__export__){return }var C=B.EXPORT_TAGS[":all"];for(var A=0;A<C.length;A++){D[C[A]]=B[C[A]]}};MochiKit.Base.__new__=function(){var A=this;A.noop=A.operator.identity;A.forward=A.forwardCall;A.find=A.findValue;if(typeof (encodeURIComponent)!="undefined"){A.urlEncode=function(C){return encodeURIComponent(C).replace(/\'/g,"%27")}}else{A.urlEncode=function(C){return escape(C).replace(/\+/g,"%2B").replace(/\"/g,"%22").rval.replace(/\'/g,"%27")}}A.NamedError=function(C){this.message=C;this.name=C};A.NamedError.prototype=new Error();A.update(A.NamedError.prototype,{repr:function(){if(this.message&&this.message!=this.name){return this.name+"("+A.repr(this.message)+")"}else{return this.name+"()"}},toString:A.forwardCall("repr")});A.NotFound=new A.NamedError("MochiKit.Base.NotFound");A.listMax=A.partial(A.listMinMax,1);A.listMin=A.partial(A.listMinMax,-1);A.isCallable=A.typeMatcher("function");A.isUndefined=A.typeMatcher("undefined");A.merge=A.partial(A.update,null);A.zip=A.partial(A.map,null);A.average=A.mean;A.comparatorRegistry=new A.AdapterRegistry();A.registerComparator("dateLike",A.isDateLike,A.compareDateLike);A.registerComparator("arrayLike",A.isArrayLike,A.compareArrayLike);A.reprRegistry=new A.AdapterRegistry();A.registerRepr("arrayLike",A.isArrayLike,A.reprArrayLike);A.registerRepr("string",A.typeMatcher("string"),A.reprString);A.registerRepr("numbers",A.typeMatcher("number","boolean"),A.reprNumber);A.jsonRegistry=new A.AdapterRegistry();var B=A.concat(A.EXPORT,A.EXPORT_OK);A.EXPORT_TAGS={":common":A.concat(A.EXPORT_OK),":all":B};A.nameFunctions(this)};MochiKit.Base.__new__();if(MochiKit.__export__){compare=MochiKit.Base.compare}MochiKit.Base._exportSymbols(this,MochiKit.Base);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Async");dojo.require("MochiKit.Base")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Async depends on MochiKit.Base!"}if(typeof (MochiKit.Async)=="undefined"){MochiKit.Async={}}MochiKit.Async.NAME="MochiKit.Async";MochiKit.Async.VERSION="1.4";MochiKit.Async.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Async.toString=function(){return this.__repr__()};MochiKit.Async.Deferred=function(A){this.chain=[];this.id=this._nextId();this.fired=-1;this.paused=0;this.results=[null,null];this.canceller=A;this.silentlyCancelled=false;this.chained=false};MochiKit.Async.Deferred.prototype={repr:function(){var A;if(this.fired==-1){A="unfired"}else{if(this.fired===0){A="success"}else{A="error"}}return"Deferred("+this.id+", "+A+")"},toString:MochiKit.Base.forwardCall("repr"),_nextId:MochiKit.Base.counter(),cancel:function(){var A=MochiKit.Async;if(this.fired==-1){if(this.canceller){this.canceller(this)}else{this.silentlyCancelled=true}if(this.fired==-1){this.errback(new A.CancelledError(this))}}else{if((this.fired===0)&&(this.results[0] instanceof A.Deferred)){this.results[0].cancel()}}},_resback:function(A){this.fired=((A instanceof Error)?1:0);this.results[this.fired]=A;this._fire()},_check:function(){if(this.fired!=-1){if(!this.silentlyCancelled){throw new MochiKit.Async.AlreadyCalledError(this)}this.silentlyCancelled=false;return }},callback:function(A){this._check();if(A instanceof MochiKit.Async.Deferred){throw new Error("Deferred instances can only be chained if they are the result of a callback")}this._resback(A)},errback:function(B){this._check();var A=MochiKit.Async;if(B instanceof A.Deferred){throw new Error("Deferred instances can only be chained if they are the result of a callback")}if(!(B instanceof Error)){B=new A.GenericError(B)}this._resback(B)},addBoth:function(A){if(arguments.length>1){A=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(A,A)},addCallback:function(A){if(arguments.length>1){A=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(A,null)},addErrback:function(A){if(arguments.length>1){A=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(null,A)},addCallbacks:function(A,B){if(this.chained){throw new Error("Chained Deferreds can not be re-used")}this.chain.push([A,B]);if(this.fired>=0){this._fire()}return this},_fire:function(){var D=this.chain;var G=this.fired;var C=this.results[G];var B=this;var A=null;while(D.length>0&&this.paused===0){var H=D.shift();var F=H[G];if(F===null){continue}try{C=F(C);G=((C instanceof Error)?1:0);if(C instanceof MochiKit.Async.Deferred){A=function(I){B._resback(I);B.paused--;if((B.paused===0)&&(B.fired>=0)){B._fire()}};this.paused++}}catch(E){G=1;if(!(E instanceof Error)){E=new MochiKit.Async.GenericError(E)}C=E}}this.fired=G;this.results[G]=C;if(A&&this.paused){C.addBoth(A);C.chained=true}}};MochiKit.Base.update(MochiKit.Async,{evalJSONRequest:function(){return eval("("+arguments[0].responseText+")")},succeed:function(A){var B=new MochiKit.Async.Deferred();B.callback.apply(B,arguments);return B},fail:function(A){var B=new MochiKit.Async.Deferred();B.errback.apply(B,arguments);return B},getXMLHttpRequest:function(){var A=arguments.callee;if(!A.XMLHttpRequest){var E=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},function(){throw new MochiKit.Async.BrowserComplianceError("Browser does not support XMLHttpRequest")}];for(var B=0;B<E.length;B++){var C=E[B];try{A.XMLHttpRequest=C;return C()}catch(D){}}}return A.XMLHttpRequest()},_xhr_onreadystatechange:function(E){var A=MochiKit.Base;if(this.readyState==4){try{this.onreadystatechange=null}catch(D){try{this.onreadystatechange=A.noop}catch(D){}}var B=null;try{B=this.status;if(!B&&A.isNotEmpty(this.responseText)){B=304}}catch(D){}if(B==200||B==304){E.callback(this)}else{var C=new MochiKit.Async.XMLHttpRequestError(this,"Request failed");if(C.number){E.errback(C)}else{E.errback(C)}}}},_xhr_canceller:function(A){try{A.onreadystatechange=null}catch(B){try{A.onreadystatechange=MochiKit.Base.noop}catch(B){}}A.abort()},sendXMLHttpRequest:function(D,C){if(typeof (C)=="undefined"||C===null){C=""}var A=MochiKit.Base;var B=MochiKit.Async;var F=new B.Deferred(A.partial(B._xhr_canceller,D));try{D.onreadystatechange=A.bind(B._xhr_onreadystatechange,D,F);D.send(C)}catch(E){try{D.onreadystatechange=null}catch(G){}F.errback(E)}return F},doSimpleXMLHttpRequest:function(D){var C=MochiKit.Async;var E=C.getXMLHttpRequest();if(arguments.length>1){var B=MochiKit.Base;var A=B.queryString.apply(null,B.extend(null,arguments,1));if(A){D+="?"+A}}E.open("GET",D,true);return C.sendXMLHttpRequest(E)},loadJSONDoc:function(B){var A=MochiKit.Async;var C=A.doSimpleXMLHttpRequest.apply(A,arguments);C=C.addCallback(A.evalJSONRequest);return C},wait:function(E,C){var D=new MochiKit.Async.Deferred();var A=MochiKit.Base;if(typeof (C)!="undefined"){D.addCallback(function(){return C})}var B=setTimeout(A.bind("callback",D),Math.floor(E*1000));D.canceller=function(){try{clearTimeout(B)}catch(F){}};return D},callLater:function(D,B){var A=MochiKit.Base;var C=A.partial.apply(A,A.extend(null,arguments,1));return MochiKit.Async.wait(D).addCallback(function(E){return C()})}});MochiKit.Async.DeferredLock=function(){this.waiting=[];this.locked=false;this.id=this._nextId()};MochiKit.Async.DeferredLock.prototype={__class__:MochiKit.Async.DeferredLock,acquire:function(){d=new MochiKit.Async.Deferred();if(this.locked){this.waiting.push(d)}else{this.locked=true;d.callback(this)}return d},release:function(){if(!this.locked){throw TypeError("Tried to release an unlocked DeferredLock")}this.locked=false;if(this.waiting.length>0){this.locked=true;this.waiting.shift().callback(this)}},_nextId:MochiKit.Base.counter(),repr:function(){var A;if(this.locked){A="locked, "+this.waiting.length+" waiting"}else{A="unlocked"}return"DeferredLock("+this.id+", "+A+")"},toString:MochiKit.Base.forwardCall("repr")};MochiKit.Async.DeferredList=function(G,F,B,D,I){MochiKit.Async.Deferred.apply(this,[I]);this.list=G;var A=[];this.resultList=A;this.finishedCount=0;this.fireOnOneCallback=F;this.fireOnOneErrback=B;this.consumeErrors=D;var C=MochiKit.Base.bind(this._cbDeferred,this);for(var E=0;E<G.length;E++){var H=G[E];A.push(undefined);H.addCallback(C,E,true);H.addErrback(C,E,false)}if(G.length===0&&!F){this.callback(this.resultList)}};MochiKit.Async.DeferredList.prototype=new MochiKit.Async.Deferred();MochiKit.Async.DeferredList.prototype._cbDeferred=function(B,C,A){this.resultList[B]=[C,A];this.finishedCount+=1;if(this.fired!==0){if(C&&this.fireOnOneCallback){this.callback([B,A])}else{if(!C&&this.fireOnOneErrback){this.errback(A)}else{if(this.finishedCount==this.list.length){this.callback(this.resultList)}}}}if(!C&&this.consumeErrors){A=null}return A};MochiKit.Async.gatherResults=function(A){var B=new MochiKit.Async.DeferredList(A,false,true,false);B.addCallback(function(E){var C=[];for(var D=0;D<E.length;D++){C.push(E[D][1])}return C});return B};MochiKit.Async.maybeDeferred=function(D){var B=MochiKit.Async;var A;try{var C=D.apply(null,MochiKit.Base.extend([],arguments,1));if(C instanceof B.Deferred){A=C}else{if(C instanceof Error){A=B.fail(C)}else{A=B.succeed(C)}}}catch(E){A=B.fail(E)}return A};MochiKit.Async.EXPORT=["AlreadyCalledError","CancelledError","BrowserComplianceError","GenericError","XMLHttpRequestError","Deferred","succeed","fail","getXMLHttpRequest","doSimpleXMLHttpRequest","loadJSONDoc","wait","callLater","sendXMLHttpRequest","DeferredLock","DeferredList","gatherResults","maybeDeferred"];MochiKit.Async.EXPORT_OK=["evalJSONRequest"];MochiKit.Async.__new__=function(){var A=MochiKit.Base;var B=A.partial(A._newNamedError,this);B("AlreadyCalledError",function(C){this.deferred=C});B("CancelledError",function(C){this.deferred=C});B("BrowserComplianceError",function(C){this.message=C});B("GenericError",function(C){this.message=C});B("XMLHttpRequestError",function(C,E){this.req=C;this.message=E;try{this.number=C.status}catch(D){}});this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)};A.nameFunctions(this)};MochiKit.Async.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Async);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.DOM");dojo.require("MochiKit.Base")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.DOM depends on MochiKit.Base!"}if(typeof (MochiKit.DOM)=="undefined"){MochiKit.DOM={}}MochiKit.DOM.NAME="MochiKit.DOM";MochiKit.DOM.VERSION="1.4";MochiKit.DOM.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.DOM.toString=function(){return this.__repr__()};MochiKit.DOM.EXPORT=["removeEmptyTextNodes","formContents","currentWindow","currentDocument","withWindow","withDocument","registerDOMConverter","coerceToDOM","createDOM","createDOMFunc","getNodeAttribute","setNodeAttribute","updateNodeAttributes","appendChildNodes","replaceChildNodes","removeElement","swapDOM","BUTTON","TT","PRE","H1","H2","H3","BR","CANVAS","HR","LABEL","TEXTAREA","FORM","STRONG","SELECT","OPTION","OPTGROUP","LEGEND","FIELDSET","P","UL","OL","LI","TD","TR","THEAD","TBODY","TFOOT","TABLE","TH","INPUT","SPAN","A","DIV","IMG","getElement","$","getElementsByTagAndClassName","addToCallStack","addLoadEvent","focusOnLoad","setElementClass","toggleElementClass","addElementClass","removeElementClass","swapElementClass","hasElementClass","escapeHTML","toHTML","emitHTML","scrapeText"];MochiKit.DOM.EXPORT_OK=["domConverters"];MochiKit.DOM.DEPRECATED=[["computedStyle","MochiKit.Style.computedStyle","1.4"],["elementDimensions","MochiKit.Style.getElementDimensions","1.4"],["elementPosition","MochiKit.Style.getElementPosition","1.4"],["hideElement","MochiKit.Style.hideElement","1.4"],["setElementDimensions","MochiKit.Style.setElementDimensions","1.4"],["setElementPosition","MochiKit.Style.setElementPosition","1.4"],["setDisplayForElement","MochiKit.Style.setDisplayForElement","1.4"],["setOpacity","MochiKit.Style.setOpacity","1.4"],["showElement","MochiKit.Style.showElement","1.4"],["Coordinates","MochiKit.Style.Coordinates","1.4"],["Dimensions","MochiKit.Style.Dimensions","1.4"]];MochiKit.DOM.getViewportDimensions=new Function('if (!MochiKit["Style"]) {    throw new Error("This function has been deprecated and depends on MochiKit.Style.");}return MochiKit.Style.getViewportDimensions.apply(this, arguments);');MochiKit.Base.update(MochiKit.DOM,{currentWindow:function(){return MochiKit.DOM._window},currentDocument:function(){return MochiKit.DOM._document},withWindow:function(G,D){var C=MochiKit.DOM;var B=C._document;var A=C._win;var F;try{C._window=G;C._document=G.document;F=D()}catch(E){C._window=A;C._document=B;throw E}C._window=A;C._document=B;return F},formContents:function(D){var E=[];var C=[];var A=MochiKit.Base;var B=MochiKit.DOM;if(typeof (D)=="undefined"||D===null){D=B._document}else{D=B.getElement(D)}A.nodeWalk(D,function(K){var F=K.name;if(A.isNotEmpty(F)){var I=K.nodeName;if(I=="INPUT"&&(K.type=="radio"||K.type=="checkbox")&&!K.checked){return null}if(I=="SELECT"){if(K.type=="select-one"){if(K.selectedIndex>=0){var H=K.options[K.selectedIndex];E.push(F);C.push((H.value)?H.value:H.text);return null}E.push(F);C.push("");return null}else{var J=K.options;if(!J.length){E.push(F);C.push("");return null}for(var G=0;G<J.length;G++){var H=J[G];if(!H.selected){continue}E.push(F);C.push((H.value)?H.value:H.text)}return null}}if(I=="FORM"||I=="P"||I=="SPAN"||I=="DIV"){return K.childNodes}E.push(F);C.push(K.value||"");return null}return K.childNodes});return[E,C]},withDocument:function(F,C){var B=MochiKit.DOM;var A=B._document;var E;try{B._document=F;E=C()}catch(D){B._document=A;throw D}B._document=A;return E},registerDOMConverter:function(B,A,D,C){MochiKit.DOM.domConverters.register(B,A,D,C)},coerceToDOM:function(D,M){var E=MochiKit.Base;var I=MochiKit.Iter;var L=MochiKit.DOM;if(I){var J=I.iter;var B=I.repeat;var A=E.map}var K=L.domConverters;var C=arguments.callee;var G=E.NotFound;while(true){if(typeof (D)=="undefined"||D===null){return null}if(typeof (D.nodeType)!="undefined"&&D.nodeType>0){return D}if(typeof (D)=="number"||typeof (D)=="boolean"){D=D.toString()}if(typeof (D)=="string"){return L._document.createTextNode(D)}if(typeof (D.__dom__)=="function"){D=D.__dom__(M);continue}if(typeof (D.dom)=="function"){D=D.dom(M);continue}if(typeof (D)=="function"){D=D.apply(M,[M]);continue}if(I){var F=null;try{F=J(D)}catch(H){}if(F){return A(C,F,B(M))}}try{D=K.match(D,M);continue}catch(H){if(H!=G){throw H}}return L._document.createTextNode(D.toString())}return undefined},setNodeAttribute:function(B,A,C){var E={};E[A]=C;try{return MochiKit.DOM.updateNodeAttributes(B,E)}catch(D){}return null},getNodeAttribute:function(D,A){var C=MochiKit.DOM;var B=C.attributeArray.renames[A];D=C.getElement(D);try{if(B){return D[B]}return D.getAttribute(A)}catch(E){}return null},updateNodeAttributes:function(B,F){var C=B;var I=MochiKit.DOM;if(typeof (B)=="string"){C=I.getElement(B)}if(F){var H=MochiKit.Base.updatetree;if(I.attributeArray.compliant){for(var D in F){var G=F[D];if(typeof (G)=="object"&&typeof (C[D])=="object"){H(C[D],G)}else{if(D.substring(0,2)=="on"){if(typeof (G)=="string"){G=new Function(G)}C[D]=G}else{C.setAttribute(D,G)}}}}else{var E=I.attributeArray.renames;for(D in F){G=F[D];var A=E[D];if(D=="style"&&typeof (G)=="string"){C.style.cssText=G}else{if(typeof (A)=="string"){C[A]=G}else{if(typeof (C[D])=="object"&&typeof (G)=="object"){H(C[D],G)}else{if(D.substring(0,2)=="on"){if(typeof (G)=="string"){G=new Function(G)}C[D]=G}else{C.setAttribute(D,G)}}}}}}}return C},appendChildNodes:function(C){var B=C;var A=MochiKit.DOM;if(typeof (C)=="string"){B=A.getElement(C)}var D=[A.coerceToDOM(MochiKit.Base.extend(null,arguments,1),B)];var E=MochiKit.Base.concat;while(D.length){var F=D.shift();if(typeof (F)=="undefined"||F===null){}else{if(typeof (F.nodeType)=="number"){B.appendChild(F)}else{D=E(F,D)}}}return B},replaceChildNodes:function(C){var B=C;var A=MochiKit.DOM;if(typeof (C)=="string"){B=A.getElement(C);arguments[0]=B}var D;while((D=B.firstChild)){B.removeChild(D)}if(arguments.length<2){return B}else{return A.appendChildNodes.apply(this,arguments)}},createDOM:function(E,D){var G;var B=MochiKit.DOM;var A=MochiKit.Base;if(typeof (D)=="string"||typeof (D)=="number"){var C=A.extend([E,null],arguments,1);return arguments.callee.apply(this,C)}if(typeof (E)=="string"){if(D&&!B.attributeArray.compliant){var F="";if("name" in D){F+=' name="'+B.escapeHTML(D.name)+'"'}if(E=="input"&&"type" in D){F+=' type="'+B.escapeHTML(D.type)+'"'}if(F){E="<"+E+F+">"}}G=B._document.createElement(E)}else{G=E}if(D){B.updateNodeAttributes(G,D)}if(arguments.length<=2){return G}else{var C=A.extend([G],arguments,2);return B.appendChildNodes.apply(this,C)}},createDOMFunc:function(){var A=MochiKit.Base;return A.partial.apply(this,A.extend([MochiKit.DOM.createDOM],arguments))},removeElement:function(A){var B=MochiKit.DOM.getElement(A);B.parentNode.removeChild(B);return B},swapDOM:function(B,D){var A=MochiKit.DOM;B=A.getElement(B);var C=B.parentNode;if(D){D=A.getElement(D);C.replaceChild(D,B)}else{C.removeChild(B)}return D},getElement:function(B){var A=MochiKit.DOM;if(arguments.length==1){return((typeof (B)=="string")?A._document.getElementById(B):B)}else{return MochiKit.Base.map(A.getElement,arguments)}},getElementsByTagAndClassName:function(E,H,I){var J=MochiKit.DOM;if(typeof (E)=="undefined"||E===null){E="*"}if(typeof (I)=="undefined"||I===null){I=J._document}I=J.getElement(I);var D=(I.getElementsByTagName(E)||J._document.all);if(typeof (H)=="undefined"||H===null){return MochiKit.Base.extend(null,D)}var B=[];for(var G=0;G<D.length;G++){var C=D[G];var A=C.className.split(" ");for(var F=0;F<A.length;F++){if(A[F]==H){B.push(C);break}}}return B},_newCallStack:function(C,A){var B=function(){var D=arguments.callee.callStack;for(var E=0;E<D.length;E++){if(D[E].apply(this,arguments)===false){break}}if(A){try{this[C]=null}catch(F){}}};B.callStack=[];return B},addToCallStack:function(G,F,E,C){var B=MochiKit.DOM;var D=G[F];var A=D;if(!(typeof (D)=="function"&&typeof (D.callStack)=="object"&&D.callStack!==null)){A=B._newCallStack(F,C);if(typeof (D)=="function"){A.callStack.push(D)}G[F]=A}A.callStack.push(E)},addLoadEvent:function(B){var A=MochiKit.DOM;A.addToCallStack(A._window,"onload",B,true)},focusOnLoad:function(B){var A=MochiKit.DOM;A.addLoadEvent(function(){B=A.getElement(B);if(B){B.focus()}})},setElementClass:function(B,C){var A=MochiKit.DOM;var D=A.getElement(B);if(A.attributeArray.compliant){D.setAttribute("class",C)}else{D.setAttribute("className",C)}},toggleElementClass:function(C){var A=MochiKit.DOM;for(var B=1;B<arguments.length;B++){var D=A.getElement(arguments[B]);if(!A.addElementClass(D,C)){A.removeElementClass(D,C)}}},addElementClass:function(E,F){var B=MochiKit.DOM;var G=B.getElement(E);var A=G.className;if(A.length===0){B.setElementClass(G,F);return true}if(A==F){return false}var D=G.className.split(" ");for(var C=0;C<D.length;C++){if(D[C]==F){return false}}B.setElementClass(G,A+" "+F);return true},removeElementClass:function(E,F){var B=MochiKit.DOM;var G=B.getElement(E);var A=G.className;if(A.length===0){return false}if(A==F){B.setElementClass(G,"");return true}var D=G.className.split(" ");for(var C=0;C<D.length;C++){if(D[C]==F){D.splice(C,1);B.setElementClass(G,D.join(" "));return true}}return false},swapElementClass:function(C,E,A){var D=MochiKit.DOM.getElement(C);var B=MochiKit.DOM.removeElementClass(D,E);if(B){MochiKit.DOM.addElementClass(D,A)}return B},hasElementClass:function(D,E){var G=MochiKit.DOM.getElement(D);var C=G.className.split(" ");for(var B=1;B<arguments.length;B++){var F=false;for(var A=0;A<C.length;A++){if(C[A]==arguments[B]){F=true;break}}if(!F){return false}}return true},escapeHTML:function(A){return A.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},toHTML:function(A){return MochiKit.DOM.emitHTML(A).join("")},emitHTML:function(C,F){if(typeof (F)=="undefined"||F===null){F=[]}var H=[C];var M=MochiKit.DOM;var L=M.escapeHTML;var A=M.attributeArray;while(H.length){C=H.pop();if(typeof (C)=="string"){F.push(C)}else{if(C.nodeType==1){F.push("<"+C.nodeName.toLowerCase());var D=[];var I=A(C);for(var E=0;E<I.length;E++){var J=I[E];D.push([" ",J.name,'="',L(J.value),'"'])}D.sort();for(E=0;E<D.length;E++){var K=D[E];for(var B=0;B<K.length;B++){F.push(K[B])}}if(C.hasChildNodes()){F.push(">");H.push("</"+C.nodeName.toLowerCase()+">");var G=C.childNodes;for(E=G.length-1;E>=0;E--){H.push(G[E])}}else{F.push("/>")}}else{if(C.nodeType==3){F.push(L(C.nodeValue))}}}}return F},scrapeText:function(B,A){var C=[];(function(F){var G=F.childNodes;if(G){for(var E=0;E<G.length;E++){arguments.callee.call(this,G[E])}}var D=F.nodeValue;if(typeof (D)=="string"){C.push(D)}})(MochiKit.DOM.getElement(B));if(A){return C}else{return C.join("")}},removeEmptyTextNodes:function(B){B=MochiKit.DOM.getElement(B);for(var A=0;A<B.childNodes.length;A++){var C=B.childNodes[A];if(C.nodeType==3&&!/\S/.test(C.nodeValue)){C.parentNode.removeChild(C)}}},__new__:function(H){var D=MochiKit.Base;if(typeof (document)!="undefined"){this._document=document}else{if(MochiKit.MockDOM){this._document=MochiKit.MockDOM.document}}this._window=H;this.domConverters=new D.AdapterRegistry();var J=this._document.createElement("span");var A;if(J&&J.attributes&&J.attributes.length>0){var B=D.filter;A=function(L){return B(A.ignoreAttrFilter,L.attributes)};A.ignoreAttr={};var K=J.attributes;var E=A.ignoreAttr;for(var G=0;G<K.length;G++){var I=K[G];E[I.name]=I.value}A.ignoreAttrFilter=function(L){return(A.ignoreAttr[L.name]!=L.value)};A.compliant=false;A.renames={"class":"className",checked:"defaultChecked",usemap:"useMap","for":"htmlFor",readonly:"readOnly"}}else{A=function(L){return L.attributes};A.compliant=true;A.renames={}}this.attributeArray=A;var F=function(P,L){var M=L[1].split(".");var O="";var N={};O+="if (!MochiKit."+M[1]+') { throw new Error("';O+="This function has been deprecated and depends on MochiKit.";O+=M[1]+'.");}';O+="return MochiKit."+M[1]+"."+L[0];O+=".apply(this, arguments);";N[M[2]]=new Function(O);MochiKit.Base.update(MochiKit[P],N)};for(var G;G<MochiKit.DOM.DEPRECATED.length;G++){F("DOM",MochiKit.DOM.DEPRECATED[G])}var C=this.createDOMFunc;this.UL=C("ul");this.OL=C("ol");this.LI=C("li");this.TD=C("td");this.TR=C("tr");this.TBODY=C("tbody");this.THEAD=C("thead");this.TFOOT=C("tfoot");this.TABLE=C("table");this.TH=C("th");this.INPUT=C("input");this.SPAN=C("span");this.A=C("a");this.DIV=C("div");this.IMG=C("img");this.BUTTON=C("button");this.TT=C("tt");this.PRE=C("pre");this.H1=C("h1");this.H2=C("h2");this.H3=C("h3");this.BR=C("br");this.HR=C("hr");this.LABEL=C("label");this.TEXTAREA=C("textarea");this.FORM=C("form");this.P=C("p");this.SELECT=C("select");this.OPTION=C("option");this.OPTGROUP=C("optgroup");this.LEGEND=C("legend");this.FIELDSET=C("fieldset");this.STRONG=C("strong");this.CANVAS=C("canvas");this.$=this.getElement;this.EXPORT_TAGS={":common":this.EXPORT,":all":D.concat(this.EXPORT,this.EXPORT_OK)};D.nameFunctions(this)}});MochiKit.DOM.__new__(((typeof (window)=="undefined")?this:window));if(MochiKit.__export__){withWindow=MochiKit.DOM.withWindow;withDocument=MochiKit.DOM.withDocument}MochiKit.Base._exportSymbols(this,MochiKit.DOM);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Style");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.Base!"}try{if(typeof (MochiKit.DOM)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.DOM!"}if(typeof (MochiKit.Style)=="undefined"){MochiKit.Style={}}MochiKit.Style.NAME="MochiKit.Style";MochiKit.Style.VERSION="1.4";MochiKit.Style.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Style.toString=function(){return this.__repr__()};MochiKit.Style.EXPORT_OK=[];MochiKit.Style.EXPORT=["setOpacity","computedStyle","getElementDimensions","elementDimensions","setElementDimensions","getElementPosition","elementPosition","setElementPosition","setDisplayForElement","hideElement","showElement","getViewportDimensions","Dimensions","Coordinates"];MochiKit.Style.Dimensions=function(A,B){this.w=A;this.h=B};MochiKit.Style.Dimensions.prototype.__repr__=function(){var A=MochiKit.Base.repr;return"{w: "+A(this.w)+", h: "+A(this.h)+"}"};MochiKit.Style.Dimensions.prototype.toString=function(){return this.__repr__()};MochiKit.Style.Coordinates=function(A,B){this.x=A;this.y=B};MochiKit.Style.Coordinates.prototype.__repr__=function(){var A=MochiKit.Base.repr;return"{x: "+A(this.x)+", y: "+A(this.y)+"}"};MochiKit.Style.Coordinates.prototype.toString=function(){return this.__repr__()};MochiKit.Base.update(MochiKit.Style,{computedStyle:function(D,A){var G=MochiKit.DOM;var F=G._document;D=G.getElement(D);A=MochiKit.Base.camelize(A);if(!D||D==F){return undefined}if(A=="opacity"&&D.filters){try{return D.filters.item("DXImageTransform.Microsoft.Alpha").opacity/100}catch(E){try{return D.filters.item("alpha").opacity/100}catch(E){}}}if(D.currentStyle){return D.currentStyle[A]}if(typeof (F.defaultView)=="undefined"){return undefined}if(F.defaultView===null){return undefined}var C=F.defaultView.getComputedStyle(D,null);if(typeof (C)=="undefined"||C===null){return undefined}var B=A.replace(/([A-Z])/g,"-$1").toLowerCase();return C.getPropertyValue(B)},setOpacity:function(A,B){A=MochiKit.DOM.getElement(A);MochiKit.DOM.updateNodeAttributes(A,{style:{opacity:B,"-moz-opacity":B,"-khtml-opacity":B,filter:" alpha(opacity="+(B*100)+")"}})},getElementPosition:function(B,C,J){var L=MochiKit.Style;var D=MochiKit.DOM;B=D.getElement(B);if(!B||(!(B.x&&B.y)&&(!B.parentNode==null||L.computedStyle(B,"display")=="none"))){return undefined}var G=new L.Coordinates(0,0);var E=null;var K=null;var F=J?J:MochiKit.DOM._document;var I=F.documentElement;var H=F.body;if(!B.parentNode&&B.x&&B.y){G.x+=B.x||0;G.y+=B.y||0}else{if(B.getBoundingClientRect){E=B.getBoundingClientRect();G.x+=E.left+(I.scrollLeft||H.scrollLeft)-(I.clientLeft||0);G.y+=E.top+(I.scrollTop||H.scrollTop)-(I.clientTop||0)}else{if(B.offsetParent){G.x+=B.offsetLeft;G.y+=B.offsetTop;K=B.offsetParent;if(K!=B){while(K){G.x+=K.offsetLeft;G.y+=K.offsetTop;K=K.offsetParent}}var A=navigator.userAgent.toLowerCase();if((typeof (opera)!="undefined"&&parseFloat(opera.version())<9)||(A.indexOf("safari")!=-1&&L.computedStyle(B,"position")=="absolute")){G.x-=H.offsetLeft;G.y-=H.offsetTop}}}}if(typeof (C)!="undefined"){C=arguments.callee(C);if(C){G.x-=(C.x||0);G.y-=(C.y||0)}}if(B.parentNode){K=B.parentNode}else{K=null}while(K&&K.tagName!="BODY"&&K.tagName!="HTML"){G.x-=K.scrollLeft;G.y-=K.scrollTop;if(K.parentNode){K=K.parentNode}else{K=null}}return G},setElementPosition:function(C,B,A){C=MochiKit.DOM.getElement(C);if(typeof (A)=="undefined"){A="px"}MochiKit.DOM.updateNodeAttributes(C,{style:{left:B.x+A,top:B.y+A}})},getElementDimensions:function(D){var A=MochiKit.Style;var G=MochiKit.DOM;if(typeof (D.w)=="number"||typeof (D.h)=="number"){return new A.Dimensions(D.w||0,D.h||0)}D=G.getElement(D);if(!D){return undefined}if(A.computedStyle(D,"display")!="none"){return new A.Dimensions(D.offsetWidth||0,D.offsetHeight||0)}var C=D.style;var F=C.visibility;var B=C.position;C.visibility="hidden";C.position="absolute";C.display="";var H=D.offsetWidth;var E=D.offsetHeight;C.display="none";C.position=B;C.visibility=F;return new A.Dimensions(H,E)},setElementDimensions:function(C,B,A){C=MochiKit.DOM.getElement(C);if(typeof (A)=="undefined"){A="px"}MochiKit.DOM.updateNodeAttributes(C,{style:{width:B.w+A,height:B.h+A}})},setDisplayForElement:function(E,B){var D=MochiKit.Base.extend(null,arguments,1);var C=MochiKit.DOM.getElement;for(var A=0;A<D.length;A++){var B=C(D[A]);if(B){B.style.display=E}}},getViewportDimensions:function(){var C=new MochiKit.Style.Dimensions();var B=MochiKit.DOM._window;var A=MochiKit.DOM._document.body;if(B.innerWidth){C.w=B.innerWidth;C.h=B.innerHeight}else{if(A.parentElement.clientWidth){C.w=A.parentElement.clientWidth;C.h=A.parentElement.clientHeight}else{if(A&&A.clientWidth){C.w=A.clientWidth;C.h=A.clientHeight}}}return C},__new__:function(){var A=MochiKit.Base;this.elementPosition=this.getElementPosition;this.elementDimensions=this.getElementDimensions;this.hideElement=A.partial(this.setDisplayForElement,"none");this.showElement=A.partial(this.setDisplayForElement,"block");this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)};A.nameFunctions(this)}});MochiKit.Style.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Style);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Signal");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.Base!"}try{if(typeof (MochiKit.DOM)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.DOM!"}try{if(typeof (MochiKit.Style)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.Style!"}if(typeof (MochiKit.Signal)=="undefined"){MochiKit.Signal={}}MochiKit.Signal.NAME="MochiKit.Signal";MochiKit.Signal.VERSION="1.4";MochiKit.Signal._observers=[];MochiKit.Signal.Event=function(B,A){this._event=A||window.event;this._src=B};MochiKit.Base.update(MochiKit.Signal.Event.prototype,{__repr__:function(){var A=MochiKit.Base.repr;var B="{event(): "+A(this.event())+", src(): "+A(this.src())+", type(): "+A(this.type())+", target(): "+A(this.target())+", modifier(): {alt: "+A(this.modifier().alt)+", ctrl: "+A(this.modifier().ctrl)+", meta: "+A(this.modifier().meta)+", shift: "+A(this.modifier().shift)+", any: "+A(this.modifier().any)+"}";if(this.type()&&this.type().indexOf("key")===0){B+=", key(): {code: "+A(this.key().code)+", string: "+A(this.key().string)+"}"}if(this.type()&&(this.type().indexOf("mouse")===0||this.type().indexOf("click")!=-1||this.type()=="contextmenu")){B+=", mouse(): {page: "+A(this.mouse().page)+", client: "+A(this.mouse().client);if(this.type()!="mousemove"){B+=", button: {left: "+A(this.mouse().button.left)+", middle: "+A(this.mouse().button.middle)+", right: "+A(this.mouse().button.right)+"}}"}else{B+="}"}}if(this.type()=="mouseover"||this.type()=="mouseout"){B+=", relatedTarget(): "+A(this.relatedTarget())}B+="}";return B},toString:function(){return this.__repr__()},src:function(){return this._src},event:function(){return this._event},type:function(){return this._event.type||undefined},target:function(){return this._event.target||this._event.srcElement},_relatedTarget:null,relatedTarget:function(){if(this._relatedTarget!==null){return this._relatedTarget}var A=null;if(this.type()=="mouseover"){A=(this._event.relatedTarget||this._event.fromElement)}else{if(this.type()=="mouseout"){A=(this._event.relatedTarget||this._event.toElement)}}if(A!==null){this._relatedTarget=A;return A}return undefined},_modifier:null,modifier:function(){if(this._modifier!==null){return this._modifier}var A={};A.alt=this._event.altKey;A.ctrl=this._event.ctrlKey;A.meta=this._event.metaKey||false;A.shift=this._event.shiftKey;A.any=A.alt||A.ctrl||A.shift||A.meta;this._modifier=A;return A},_key:null,key:function(){if(this._key!==null){return this._key}var A={};if(this.type()&&this.type().indexOf("key")===0){if(this.type()=="keydown"||this.type()=="keyup"){A.code=this._event.keyCode;A.string=(MochiKit.Signal._specialKeys[A.code]||"KEY_UNKNOWN");this._key=A;return A}else{if(this.type()=="keypress"){A.code=0;A.string="";if(typeof (this._event.charCode)!="undefined"&&this._event.charCode!==0&&!MochiKit.Signal._specialMacKeys[this._event.charCode]){A.code=this._event.charCode;A.string=String.fromCharCode(A.code)}else{if(this._event.keyCode&&typeof (this._event.charCode)=="undefined"){A.code=this._event.keyCode;A.string=String.fromCharCode(A.code)}}this._key=A;return A}}}return undefined},_mouse:null,mouse:function(){if(this._mouse!==null){return this._mouse}var B={};var C=this._event;if(this.type()&&(this.type().indexOf("mouse")===0||this.type().indexOf("click")!=-1||this.type()=="contextmenu")){B.client=new MochiKit.Style.Coordinates(0,0);if(C.clientX||C.clientY){B.client.x=(!C.clientX||C.clientX<0)?0:C.clientX;B.client.y=(!C.clientY||C.clientY<0)?0:C.clientY}B.page=new MochiKit.Style.Coordinates(0,0);if(C.pageX||C.pageY){B.page.x=(!C.pageX||C.pageX<0)?0:C.pageX;B.page.y=(!C.pageY||C.pageY<0)?0:C.pageY}else{var D=MochiKit.DOM._document.documentElement;var A=MochiKit.DOM._document.body;B.page.x=C.clientX+(D.scrollLeft||A.scrollLeft)-(D.clientLeft||0);B.page.y=C.clientY+(D.scrollTop||A.scrollTop)-(D.clientTop||0)}if(this.type()!="mousemove"){B.button={};B.button.left=false;B.button.right=false;B.button.middle=false;if(C.which){B.button.left=(C.which==1);B.button.middle=(C.which==2);B.button.right=(C.which==3)}else{B.button.left=!!(C.button&1);B.button.right=!!(C.button&2);B.button.middle=!!(C.button&4)}}this._mouse=B;return B}return undefined},stop:function(){this.stopPropagation();this.preventDefault()},stopPropagation:function(){if(this._event.stopPropagation){this._event.stopPropagation()}else{this._event.cancelBubble=true}},preventDefault:function(){if(this._event.preventDefault){this._event.preventDefault()}else{if(this._confirmUnload===null){this._event.returnValue=false}}},_confirmUnload:null,confirmUnload:function(A){if(this.type()=="beforeunload"){this._confirmUnload=A;this._event.returnValue=A}}});MochiKit.Signal._specialMacKeys={3:"KEY_ENTER",63289:"KEY_NUM_PAD_CLEAR",63276:"KEY_PAGE_UP",63277:"KEY_PAGE_DOWN",63275:"KEY_END",63273:"KEY_HOME",63234:"KEY_ARROW_LEFT",63232:"KEY_ARROW_UP",63235:"KEY_ARROW_RIGHT",63233:"KEY_ARROW_DOWN",63302:"KEY_INSERT",63272:"KEY_DELETE"};for(i=63236;i<=63242;i++){MochiKit.Signal._specialMacKeys[i]="KEY_F"+(i-63236+1)}MochiKit.Signal._specialKeys={8:"KEY_BACKSPACE",9:"KEY_TAB",12:"KEY_NUM_PAD_CLEAR",13:"KEY_ENTER",16:"KEY_SHIFT",17:"KEY_CTRL",18:"KEY_ALT",19:"KEY_PAUSE",20:"KEY_CAPS_LOCK",27:"KEY_ESCAPE",32:"KEY_SPACEBAR",33:"KEY_PAGE_UP",34:"KEY_PAGE_DOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_ARROW_LEFT",38:"KEY_ARROW_UP",39:"KEY_ARROW_RIGHT",40:"KEY_ARROW_DOWN",44:"KEY_PRINT_SCREEN",45:"KEY_INSERT",46:"KEY_DELETE",59:"KEY_SEMICOLON",91:"KEY_WINDOWS_LEFT",92:"KEY_WINDOWS_RIGHT",93:"KEY_SELECT",106:"KEY_NUM_PAD_ASTERISK",107:"KEY_NUM_PAD_PLUS_SIGN",109:"KEY_NUM_PAD_HYPHEN-MINUS",110:"KEY_NUM_PAD_FULL_STOP",111:"KEY_NUM_PAD_SOLIDUS",144:"KEY_NUM_LOCK",145:"KEY_SCROLL_LOCK",186:"KEY_SEMICOLON",187:"KEY_EQUALS_SIGN",188:"KEY_COMMA",189:"KEY_HYPHEN-MINUS",190:"KEY_FULL_STOP",191:"KEY_SOLIDUS",192:"KEY_GRAVE_ACCENT",219:"KEY_LEFT_SQUARE_BRACKET",220:"KEY_REVERSE_SOLIDUS",221:"KEY_RIGHT_SQUARE_BRACKET",222:"KEY_APOSTROPHE"};for(var i=48;i<=57;i++){MochiKit.Signal._specialKeys[i]="KEY_"+(i-48)}for(i=65;i<=90;i++){MochiKit.Signal._specialKeys[i]="KEY_"+String.fromCharCode(i)}for(i=96;i<=105;i++){MochiKit.Signal._specialKeys[i]="KEY_NUM_PAD_"+(i-96)}for(i=112;i<=123;i++){MochiKit.Signal._specialKeys[i]="KEY_F"+(i-112+1)}MochiKit.Base.update(MochiKit.Signal,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},_unloadCache:function(){var A=MochiKit.Signal;var D=A._observers;for(var B=0;B<D.length;B++){A._disconnect(D[B])}delete A._observers;try{window.onload=undefined}catch(C){}try{window.onunload=undefined}catch(C){}},_listener:function(F,B,D,A){var C=MochiKit.Signal.Event;if(!A){return MochiKit.Base.bind(B,D)}D=D||F;if(typeof (B)=="string"){return function(E){D[B].apply(D,[new C(F,E)])}}else{return function(E){B.apply(D,[new C(F,E)])}}},connect:function(A,J,H,B){A=MochiKit.DOM.getElement(A);var I=MochiKit.Signal;if(typeof (J)!="string"){throw new Error("'sig' must be a string")}var F=null;var D=null;if(typeof (B)!="undefined"){F=H;D=B;if(typeof (B)=="string"){if(typeof (H[B])!="function"){throw new Error("'funcOrStr' must be a function on 'objOrFunc'")}}else{if(typeof (B)!="function"){throw new Error("'funcOrStr' must be a function or string")}}}else{if(typeof (H)!="function"){throw new Error("'objOrFunc' must be a function if 'funcOrStr' is not given")}else{D=H}}if(typeof (F)=="undefined"||F===null){F=A}var G=!!(A.addEventListener||A.attachEvent);var C=I._listener(A,D,F,G);if(A.addEventListener){A.addEventListener(J.substr(2),C,false)}else{if(A.attachEvent){A.attachEvent(J,C)}}var E=[A,J,C,G,H,B];I._observers.push(E);return E},_disconnect:function(B){if(!B[3]){return }var D=B[0];var C=B[1];var A=B[2];if(D.removeEventListener){D.removeEventListener(C.substr(2),A,false)}else{if(D.detachEvent){D.detachEvent(C,A)}else{throw new Error("'src' must be a DOM element")}}},disconnect:function(G){var J=MochiKit.Signal;var H=J._observers;var D=MochiKit.Base;if(arguments.length>1){var A=MochiKit.DOM.getElement(arguments[0]);var K=arguments[1];var F=arguments[2];var C=arguments[3];for(var E=H.length-1;E>=0;E--){var B=H[E];if(B[0]===A&&B[1]===K&&B[4]===F&&B[5]===C){J._disconnect(B);H.splice(E,1);return true}}}else{var I=D.findIdentical(H,G);if(I>=0){J._disconnect(G);H.splice(I,1);return true}}return false},disconnectAll:function(A,J){A=MochiKit.DOM.getElement(A);var B=MochiKit.Base;var C=B.flattenArguments(B.extend(null,arguments,1));var H=MochiKit.Signal;var G=H._disconnect;var F=H._observers;if(C.length===0){for(var E=F.length-1;E>=0;E--){var D=F[E];if(D[0]===A){G(D);F.splice(E,1)}}}else{var I={};for(var E=0;E<C.length;E++){I[C[E]]=true}for(var E=F.length-1;E>=0;E--){var D=F[E];if(D[0]===A&&D[1] in I){G(D);F.splice(E,1)}}}},signal:function(G,F){var E=MochiKit.Signal._observers;G=MochiKit.DOM.getElement(G);var A=MochiKit.Base.extend(null,arguments,2);var H=[];for(var B=0;B<E.length;B++){var C=E[B];if(C[0]===G&&C[1]===F){try{C[2].apply(G,A)}catch(D){H.push(D)}}}if(H.length==1){throw H[0]}else{if(H.length>1){var D=new Error("Multiple errors thrown in handling 'sig', see errors property");D.errors=H;throw D}}}});MochiKit.Signal.EXPORT_OK=[];MochiKit.Signal.EXPORT=["connect","disconnect","signal","disconnectAll"];MochiKit.Signal.__new__=function(C){var A=MochiKit.Base;this._document=document;this._window=C;try{this.connect(window,"onunload",this._unloadCache)}catch(B){}this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)};A.nameFunctions(this)};MochiKit.Signal.__new__(this);if(MochiKit.__export__){connect=MochiKit.Signal.connect;disconnect=MochiKit.Signal.disconnect;disconnectAll=MochiKit.Signal.disconnectAll;signal=MochiKit.Signal.signal}MochiKit.Base._exportSymbols(this,MochiKit.Signal);MochiKit.Base.update(MochiKit.Base,{isIE:function(){return/MSIE/.test(navigator.userAgent)},isGecko:function(){return/Gecko/.test(navigator.userAgent)},isKHTML:function(){return/Konqueror|Safari|KHTML/.test(navigator.userAgent)},isSafari:function(){return/AppleWebKit'/.test(navigator.appVersion)},isOpera:function(){return/Opera/.test(navigator.userAgent)}});MochiKit.Base.update(MochiKit.DOM,{getStyle:function(B,C){B=MochiKit.DOM.getElement(B);var D=B.style[MochiKit.Base.camelize(C)];if(!D){if(document.defaultView&&document.defaultView.getComputedStyle){var A=document.defaultView.getComputedStyle(B,null);D=A?A.getPropertyValue(C):null}else{if(B.currentStyle){D=B.currentStyle[MochiKit.Base.camelize(C)]}}}if(MochiKit.Base.isOpera()&&(MochiKit.Base.find(["left","top","right","bottom"],C))){if(MochiKit.DOM.getStyle(B,"position")=="static"){D="auto"}}return D=="auto"?null:D},setStyle:function(A,B){A=MochiKit.DOM.getElement(A);for(name in B){A.style[MochiKit.Base.camelize(name)]=B[name]}},getOpacity:function(B){var A;if(A=MochiKit.DOM.getStyle(B,"opacity")){return parseFloat(A)}if(A=(MochiKit.DOM.getStyle(B,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(A[1]){return parseFloat(A[1])/100}}return 1},getInlineOpacity:function(A){return MochiKit.DOM.getElement(A).style.opacity||""},setOpacity:function(A,C){A=MochiKit.DOM.getElement(A);if(C==1){var B=A.style.cssText;if(MochiKit.Base.isIE()){A.style.cssText=B.replace(/filter: ?alpha\([^\)]*\);?/gi,"")}else{A.style.cssText=B.replace(/opacity: ?\d\.?\d*/gi,"")}}else{if(C<0.00001){C=0}MochiKit.DOM.setStyle(A,{opacity:C});if(MochiKit.Base.isIE()){MochiKit.DOM.setStyle(A,{filter:MochiKit.DOM.getStyle(A,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+C*100+")"})}}},isVisible:function(A){return MochiKit.DOM.getElement(A).style.display!="none"},makeClipping:function(A){A=MochiKit.DOM.getElement(A);if(A._overflow){return }A._overflow=A.style.overflow;if((MochiKit.DOM.getStyle(A,"overflow")||"visible")!="hidden"){A.style.overflow="hidden"}},undoClipping:function(A){A=MochiKit.DOM.getElement(A);if(!A._overflow){return }A.style.overflow=A._overflow;A._overflow=undefined},makePositioned:function(A){A=MochiKit.DOM.getElement(A);var B=MochiKit.DOM.getStyle(A,"position");if((B=="static"||!B)&&!A._madePositioned){A._madePositioned=true;A.style.position="relative";if(MochiKit.Base.isOpera()){A.style.top=0;A.style.left=0}}},undoPositioned:function(A){A=MochiKit.DOM.getElement(A);if(A._madePositioned){A._madePositioned=undefined;A.style.position=A.style.top=A.style.left=A.style.bottom=A.style.right=""}},getFirstElementByTagAndClassName:function(D,G,H){var I=MochiKit.DOM;if(typeof (D)=="undefined"||D===null){D="*"}if(typeof (H)=="undefined"||H===null){H=I._document}H=I.getElement(H);var C=(H.getElementsByTagName(D)||I._document.all);if(typeof (G)=="undefined"||G===null){return MochiKit.Base.extend(null,C)}for(var F=0;F<C.length;F++){var B=C[F];var A=B.className.split(" ");for(var E=0;E<A.length;E++){if(A[E]==G){return B}}}},isParent:function(B,A){if(!B.parentNode||B==A){return false}if(B.parentNode==A){return true}return MochiKit.DOM.isParent(B.parentNode,A)}});MochiKit.Position={includeScrollOffsets:false,prepare:function(){var B=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;var A=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.windowOffset=new MochiKit.Style.Coordinates(B,A)},cumulativeOffset:function(B){var A=0;var C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent}while(B);return new MochiKit.Style.Coordinates(C,A)},realOffset:function(B){var A=0;var C=0;do{A+=B.scrollTop||0;C+=B.scrollLeft||0;B=B.parentNode}while(B);return new MochiKit.Style.Coordinates(C,A)},within:function(B,A,C){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(B,A,C)}this.xcomp=A;this.ycomp=C;this.offset=this.cumulativeOffset(B);if(B.style.position=="fixed"){this.offset.x+=this.windowOffset.x;this.offset.y+=this.windowOffset.y}return(C>=this.offset.y&&C<this.offset.y+B.offsetHeight&&A>=this.offset.x&&A<this.offset.x+B.offsetWidth)},withinIncludingScrolloffsets:function(B,A,D){var C=this.realOffset(B);this.xcomp=A+C.x-this.windowOffset.x;this.ycomp=D+C.y-this.windowOffset.y;this.offset=this.cumulativeOffset(B);return(this.ycomp>=this.offset.y&&this.ycomp<this.offset.y+B.offsetHeight&&this.xcomp>=this.offset.x&&this.xcomp<this.offset.x+B.offsetWidth)},overlap:function(B,A){if(!B){return 0}if(B=="vertical"){return((this.offset.y+A.offsetHeight)-this.ycomp)/A.offsetHeight}if(B=="horizontal"){return((this.offset.x+A.offsetWidth)-this.xcomp)/A.offsetWidth}},absolutize:function(C){C=MochiKit.DOM.getElement(C);if(C.style.position=="absolute"){return }MochiKit.Position.prepare();var E=MochiKit.Position.positionedOffset(C);var D=C.clientWidth;var A=C.clientHeight;var B={position:C.style.position,left:E.x-parseFloat(C.style.left||0),top:E.y-parseFloat(C.style.top||0),width:C.style.width,height:C.style.height};C.style.position="absolute";C.style.top=E.y+"px";C.style.left=E.x+"px";C.style.width=D+"px";C.style.height=A+"px";return B},positionedOffset:function(B){var A=0,C=0;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;B=B.offsetParent;if(B){p=MochiKit.DOM.getStyle(B,"position");if(p=="relative"||p=="absolute"){break}}}while(B);return new MochiKit.Style.Coordinates(C,A)},relativize:function(B,A){B=MochiKit.DOM.getElement(B);if(B.style.position=="relative"){return }MochiKit.Position.prepare();var D=parseFloat(B.style.top||0)-(A.top||0);var C=parseFloat(B.style.left||0)-(A.left||0);B.style.position=A.position;B.style.top=D+"px";B.style.left=C+"px";B.style.width=A.width;B.style.height=A.height},clone:function(B,C){B=MochiKit.DOM.getElement(B);C=MochiKit.DOM.getElement(C);C.style.position="absolute";var A=this.cumulativeOffset(B);C.style.top=A.y+"px";C.style.left=A.x+"px";C.style.width=B.offsetWidth+"px";C.style.height=B.offsetHeight+"px"},page:function(D){var A=0;var C=0;var B=D;do{A+=B.offsetTop||0;C+=B.offsetLeft||0;if(B.offsetParent==document.body&&MochiKit.DOM.getStyle(B,"position")=="absolute"){break}}while(B=B.offsetParent);B=D;do{A-=B.scrollTop||0;C-=B.scrollLeft||0}while(B=B.parentNode);return new MochiKit.Style.Coordinates(C,A)}};if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Color");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[]);JSAN.use("MochiKit.Style",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.Base"}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.DOM"}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.Style"}if(typeof (MochiKit.Color)=="undefined"){MochiKit.Color={}}MochiKit.Color.NAME="MochiKit.Color";MochiKit.Color.VERSION="1.4";MochiKit.Color.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Color.toString=function(){return this.__repr__()};MochiKit.Color.Color=function(D,B,A,C){if(typeof (C)=="undefined"||C===null){C=1}this.rgb={r:D,g:B,b:A,a:C}};MochiKit.Color.Color.prototype={__class__:MochiKit.Color.Color,toString:function(){return this.toRGBString()},repr:function(){var B=this.rgb;var A=[B.r,B.g,B.b,B.a];return this.__class__.NAME+"("+A.join(", ")+")"}};MochiKit.Base.update(MochiKit.Color.Color,{fromComputedStyle:function(E,D){var F=MochiKit.DOM;var A=MochiKit.Color.Color;for(E=F.getElement(E);E;E=E.parentNode){var C=MochiKit.Style.computedStyle.apply(F,arguments);if(!C){continue}var B=A.fromString(C);if(!B){break}if(B.asRGB().a>0){return B}}return null},fromBackground:function(B){var A=MochiKit.Color.Color;return A.fromComputedStyle(B,"backgroundColor","background-color")||A.whiteColor()},fromText:function(B){var A=MochiKit.Color.Color;return A.fromComputedStyle(B,"color","color")||A.blackColor()},namedColors:function(){return MochiKit.Base.clone(MochiKit.Color.Color._namedColors)}});MochiKit.Base.update(MochiKit.Color,{__new__:function(){var A=MochiKit.Base;A.nameFunctions(this);this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)}}});MochiKit.Color.EXPORT=["Color"];MochiKit.Color.EXPORT_OK=["clampColorComponent","rgbToHSL","hslToRGB","rgbToHSV","hsvToRGB","toColorPart"];MochiKit.Color.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Color);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Iter");dojo.require("MochiKit.Base")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof (MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Iter depends on MochiKit.Base!"}if(typeof (MochiKit.Iter)=="undefined"){MochiKit.Iter={}}MochiKit.Iter.NAME="MochiKit.Iter";MochiKit.Iter.VERSION="1.4";MochiKit.Base.update(MochiKit.Iter,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},registerIteratorFactory:function(B,A,D,C){MochiKit.Iter.iteratorRegistry.register(B,A,D,C)},iter:function(D,C){var B=MochiKit.Iter;if(arguments.length==2){return B.takewhile(function(F){return F!=C},D)}if(typeof (D.next)=="function"){return D}else{if(typeof (D.iter)=="function"){return D.iter()}}try{return B.iteratorRegistry.match(D)}catch(E){var A=MochiKit.Base;if(E==A.NotFound){E=new TypeError(typeof (D)+": "+A.repr(D)+" is not iterable")}throw E}},repeat:function(B,C){var A=MochiKit.Base;if(typeof (C)=="undefined"){return{repr:function(){return"repeat("+A.repr(B)+")"},toString:A.forwardCall("repr"),next:function(){return B}}}return{repr:function(){return"repeat("+A.repr(B)+", "+C+")"},toString:A.forwardCall("repr"),next:function(){if(C<=0){throw MochiKit.Iter.StopIteration}C-=1;return B}}},next:function(A){return A.next()},ifilter:function(C,B){var A=MochiKit.Base;B=MochiKit.Iter.iter(B);if(C===null){C=A.operator.truth}return{repr:function(){return"ifilter(...)"},toString:A.forwardCall("repr"),next:function(){while(true){var D=B.next();if(C(D)){return D}}return undefined}}},ifilterfalse:function(C,B){var A=MochiKit.Base;B=MochiKit.Iter.iter(B);if(C===null){C=A.operator.truth}return{repr:function(){return"ifilterfalse(...)"},toString:A.forwardCall("repr"),next:function(){while(true){var D=B.next();if(!C(D)){return D}}return undefined}}},imap:function(C,H,F){var A=MochiKit.Base;var D=MochiKit.Iter;var B=A.map(D.iter,A.extend(null,arguments,1));var G=A.map;var E=D.next;return{repr:function(){return"imap(...)"},toString:A.forwardCall("repr"),next:function(){return C.apply(this,G(E,B))}}},list:function(C){var A=MochiKit.Base;if(typeof (C.slice)=="function"){return C.slice()}else{if(A.isArrayLike(C)){return A.concat(C)}}var B=MochiKit.Iter;C=B.iter(C);var E=[];try{while(true){E.push(C.next())}}catch(D){if(D!=B.StopIteration){throw D}return E}return undefined},forEach:function(E,D,B){var A=MochiKit.Base;if(arguments.length>2){D=A.bind(D,B)}if(A.isArrayLike(E)){try{for(var C=0;C<E.length;C++){D(E[C])}}catch(F){if(F!=MochiKit.Iter.StopIteration){throw F}}}else{B=MochiKit.Iter;B.exhaust(B.imap(D,E))}},every:function(C,B){var A=MochiKit.Iter;try{A.ifilterfalse(B,C).next();return false}catch(D){if(D!=A.StopIteration){throw D}return true}},arrayLikeIter:function(B){var A=0;return{repr:function(){return"arrayLikeIter(...)"},toString:MochiKit.Base.forwardCall("repr"),next:function(){if(A>=B.length){throw MochiKit.Iter.StopIteration}return B[A++]}}},hasIterateNext:function(A){return(A&&typeof (A.iterateNext)=="function")},iterateNextIter:function(A){return{repr:function(){return"iterateNextIter(...)"},toString:MochiKit.Base.forwardCall("repr"),next:function(){var B=A.iterateNext();if(B===null||B===undefined){throw MochiKit.Iter.StopIteration}return B}}}});MochiKit.Iter.EXPORT_OK=["iteratorRegistry","arrayLikeIter","hasIterateNext","iterateNextIter",];MochiKit.Iter.EXPORT=["StopIteration","registerIteratorFactory","iter","count","cycle","repeat","next","izip","ifilter","ifilterfalse","islice","imap","applymap","chain","takewhile","dropwhile","tee","list","reduce","range","sum","exhaust","forEach","every","sorted","reversed","some","iextend","groupby","groupby_as_array"];MochiKit.Iter.__new__=function(){var A=MochiKit.Base;if(typeof (StopIteration)!="undefined"){this.StopIteration=StopIteration}else{this.StopIteration=new A.NamedError("StopIteration")}this.iteratorRegistry=new A.AdapterRegistry();this.registerIteratorFactory("arrayLike",A.isArrayLike,this.arrayLikeIter);this.registerIteratorFactory("iterateNext",this.hasIterateNext,this.iterateNextIter);this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)};A.nameFunctions(this)};MochiKit.Iter.__new__();if(MochiKit.__export__){reduce=MochiKit.Iter.reduce}MochiKit.Base._exportSymbols(this,MochiKit.Iter);if(typeof (dojo)!="undefined"){dojo.provide("MochiKit.Visual");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style");dojo.require("MochiKit.Color");dojo.require("MochiKit.Iter")}if(typeof (JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[]);JSAN.use("MochiKit.Style",[]);JSAN.use("MochiKit.Color",[]);JSAN.use("MochiKit.Iter",[])}try{if(typeof (MochiKit.Base)==="undefined"||typeof (MochiKit.DOM)==="undefined"||typeof (MochiKit.Style)==="undefined"||typeof (MochiKit.Color)==="undefined"||typeof (MochiKit.Iter)==="undefined"){throw""}}catch(e){throw"MochiKit.Visual depends on MochiKit.Base, MochiKit.DOM, MochiKit.Style, MochiKit.Color and MochiKit.Iter!"}if(typeof (MochiKit.Visual)=="undefined"){MochiKit.Visual={}}MochiKit.Visual.NAME="MochiKit.Visual";MochiKit.Visual.VERSION="1.4";MochiKit.Visual.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Visual.toString=function(){return this.__repr__()};MochiKit.Visual.forceRerendering=function(A){try{A=MochiKit.DOM.getElement(A);var C=document.createTextNode(" ");A.appendChild(C);A.removeChild(C)}catch(B){}};MochiKit.Visual.PAIRS={slide:["slideDown","slideUp"],blind:["blindDown","blindUp"],appear:["appear","fade"],size:["grow","shrink"]};MochiKit.Visual.Transitions={};MochiKit.Visual.Transitions.linear=function(A){return A};MochiKit.Visual.Transitions.sinoidal=function(A){return(-Math.cos(A*Math.PI)/2)+0.5};MochiKit.Visual.Transitions.reverse=function(A){return 1-A};MochiKit.Visual.Transitions.flicker=function(A){return((-Math.cos(A*Math.PI)/4)+0.75)+Math.random()/4};MochiKit.Visual.Transitions.wobble=function(A){return(-Math.cos(A*Math.PI*(9*A))/2)+0.5};MochiKit.Visual.Transitions.pulse=function(A){return(Math.floor(A*10)%2==0?(A*10-Math.floor(A*10)):1-(A*10-Math.floor(A*10)))};MochiKit.Visual.Transitions.none=function(A){return 0};MochiKit.Visual.Transitions.full=function(A){return 1};MochiKit.Visual.ScopedQueue=function(){this.__init__()};MochiKit.Base.update(MochiKit.Visual.ScopedQueue.prototype,{__init__:function(){this.effects=[];this.interval=null},add:function(D){var E=new Date().getTime();var A=(typeof (D.options.queue)=="string")?D.options.queue:D.options.queue.position;var B=MochiKit.Iter.forEach;switch(A){case"front":B(this.effects,function(F){if(F.state=="idle"){F.startOn+=D.finishOn;F.finishOn+=D.finishOn}});break;case"end":var C;B(this.effects,function(G){var F=G.finishOn;if(F>=(C||F)){C=F}});E=C||E;break}D.startOn+=E;D.finishOn+=E;if(!D.options.queue.limit||this.effects.length<D.options.queue.limit){this.effects.push(D)}if(!this.interval){this.interval=setInterval(MochiKit.Base.bind(this.loop,this),40)}},remove:function(A){this.effects=MochiKit.Base.filter(function(B){return B!=A},this.effects);if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var A=new Date().getTime();MochiKit.Iter.forEach(this.effects,function(B){B.loop(A)})}});MochiKit.Visual.Queues={instances:{},get:function(A){if(typeof (A)!="string"){return A}if(!this.instances[A]){this.instances[A]=new MochiKit.Visual.ScopedQueue()}return this.instances[A]}};MochiKit.Visual.Queue=MochiKit.Visual.Queues.get("global");MochiKit.Visual.DefaultOptions={transition:MochiKit.Visual.Transitions.sinoidal,duration:1,fps:25,sync:false,from:0,to:1,delay:0,queue:"parallel"};MochiKit.Visual.Base=function(){};MochiKit.Visual.Base.prototype={__class__:MochiKit.Visual.Base,start:function(B){var A=MochiKit.Visual;this.options=MochiKit.Base.setdefault(B||{},A.DefaultOptions);this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.event("beforeStart");if(!this.options.sync){A.Queues.get(typeof (this.options.queue)=="string"?"global":this.options.queue.scope).add(this)}},loop:function(C){if(C>=this.startOn){if(C>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");this.finish();this.event("afterFinish");return }var B=(C-this.startOn)/(this.finishOn-this.startOn);var A=Math.round(B*this.options.fps*this.options.duration);if(A>this.currentFrame){this.render(B);this.currentFrame=A}}},render:function(A){if(this.state=="idle"){this.state="running";this.event("beforeSetup");this.setup();this.event("afterSetup")}if(this.state=="running"){if(this.options.transition){A=this.options.transition(A)}A*=(this.options.to-this.options.from);A+=this.options.from;this.event("beforeUpdate");this.update(A);this.event("afterUpdate")}},cancel:function(){if(!this.options.sync){MochiKit.Visual.Queues.get(typeof (this.options.queue)=="string"?"global":this.options.queue.scope).remove(this)}this.state="finished"},setup:function(){},finish:function(){},update:function(A){},event:function(A){if(this.options[A+"Internal"]){this.options[A+"Internal"](this)}if(this.options[A]){this.options[A](this)}},repr:function(){return"["+this.__class__.NAME+", options:"+MochiKit.Base.repr(this.options)+"]"}};MochiKit.Visual.Opacity=function(B,A){this.__init__(B,A)};MochiKit.Visual.Opacity.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Opacity.prototype,{__init__:function(C,B){var A=MochiKit.Base;var D=MochiKit.DOM;this.element=D.getElement(C);if(A.isIE()&&(!this.element.currentStyle.hasLayout)){D.setStyle(this.element,{zoom:1})}B=A.update({from:D.getOpacity(this.element)||0,to:1},B||{});this.start(B)},update:function(A){MochiKit.DOM.setOpacity(this.element,A)}});MochiKit.Visual.Move=function(B,A){this.__init__(B,A)};MochiKit.Visual.Move.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Move.prototype,{__init__:function(B,A){this.element=MochiKit.DOM.getElement(B);A=MochiKit.Base.update({x:0,y:0,mode:"relative"},A||{});this.start(A)},setup:function(){var D=MochiKit.DOM;D.makePositioned(this.element);var B=this.element.style;var C=B.visibility;var A=B.display;if(A=="none"){B.visibility="hidden";B.display=""}this.originalLeft=parseFloat(D.getStyle(this.element,"left")||"0");this.originalTop=parseFloat(D.getStyle(this.element,"top")||"0");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}if(A=="none"){B.visibility=C;B.display=A}},update:function(A){MochiKit.DOM.setStyle(this.element,{left:Math.round(this.options.x*A+this.originalLeft)+"px",top:Math.round(this.options.y*A+this.originalTop)+"px"})}});MochiKit.Visual.Scale=function(B,C,A){this.__init__(B,C,A)};MochiKit.Visual.Scale.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Scale.prototype,{__init__:function(B,C,A){this.element=MochiKit.DOM.getElement(B);A=MochiKit.Base.update({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:C},A||{});this.start(A)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=MochiKit.DOM.getStyle(this.element,"position");var B=MochiKit.Iter.forEach;var A=MochiKit.Base.bind;this.originalStyle={};B(["top","left","width","height","fontSize"],A(function(D){this.originalStyle[D]=this.element.style[D]},this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var C=MochiKit.DOM.getStyle(this.element,"font-size")||"100%";B(["em","px","%"],A(function(D){if(C.indexOf(D)>0){this.fontSize=parseFloat(C);this.fontSizeType=D}},this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}else{if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}else{this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}}},update:function(A){var B=(this.options.scaleFrom/100)+(this.factor*A);if(this.options.scaleContent&&this.fontSize){MochiKit.DOM.setStyle(this.element,{fontSize:this.fontSize*B+this.fontSizeType})}this.setDimensions(this.dims[0]*B,this.dims[1]*B)},finish:function(){if(this.restoreAfterFinish){MochiKit.DOM.setStyle(this.element,this.originalStyle)}},setDimensions:function(A,D){var E={};if(this.options.scaleX){E.width=Math.round(D)+"px"}if(this.options.scaleY){E.height=Math.round(A)+"px"}if(this.options.scaleFromCenter){var C=(A-this.dims[0])/2;var B=(D-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){E.top=this.originalTop-C+"px"}if(this.options.scaleX){E.left=this.originalLeft-B+"px"}}else{if(this.options.scaleY){E.top=-C+"px"}if(this.options.scaleX){E.left=-B+"px"}}}MochiKit.DOM.setStyle(this.element,E)}});MochiKit.Visual.fade=function(C,B){var D=MochiKit.DOM;var A=D.getInlineOpacity(C);B=MochiKit.Base.update({from:D.getOpacity(C)||1,to:0,afterFinishInternal:function(E){if(E.options.to!==0){return }MochiKit.Style.hideElement(E.element);D.setStyle(E.element,{opacity:A})}},B||{});return new MochiKit.Visual.Opacity(C,B)};MochiKit.Visual.appear=function(C,B){var D=MochiKit.DOM;var A=MochiKit.Visual;B=MochiKit.Base.update({from:(D.getStyle(C,"display")=="none"?0:D.getOpacity(C)||0),to:1,afterFinishInternal:function(E){A.forceRerendering(E.element)},beforeSetupInternal:function(E){D.setOpacity(E.element,E.options.from);MochiKit.Style.showElement(E.element)}},B||{});return new A.Opacity(C,B)};MochiKit.Visual.blindUp=function(B,A){var C=MochiKit.DOM;B=C.getElement(B);C.makeClipping(B);A=MochiKit.Base.update({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(D){MochiKit.Style.hideElement(D.element);C.undoClipping(D.element)}},A||{});return new MochiKit.Visual.Scale(B,0,A)};MochiKit.Visual.blindDown=function(C,B){var D=MochiKit.DOM;C=D.getElement(C);var A=MochiKit.Style.getElementDimensions(C);B=MochiKit.Base.update({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:A.h,originalWidth:A.w},restoreAfterFinish:true,afterSetupInternal:function(E){D.makeClipping(E.element);D.setStyle(E.element,{height:"0px"});MochiKit.Style.showElement(E.element)},afterFinishInternal:function(E){D.undoClipping(E.element)}},B||{});return new MochiKit.Visual.Scale(C,100,B)};MochiKit.Visual.Color=MochiKit.Color.Color;MochiKit.Visual.getElementsComputedStyle=MochiKit.DOM.computedStyle;MochiKit.Visual.__new__=function(){var A=MochiKit.Base;A.nameFunctions(this);this.EXPORT_TAGS={":common":this.EXPORT,":all":A.concat(this.EXPORT,this.EXPORT_OK)}};MochiKit.Visual.EXPORT=["roundElement","roundClass","tagifyText","multiple","toggle","Base","Parallel","Opacity","Move","Scale","Highlight","ScrollTo","fade","appear","puff","blindUp","blindDown","switchOff","dropOut","shake","slideDown","slideUp","squish","grow","shrink","pulsate","fold"];MochiKit.Visual.EXPORT_OK=["PAIRS"];MochiKit.Visual.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Visual);var log4javascript;(function(){function D(){return function(){}}function G(J,I){for(var H in I){J[H]=I[H]}}var E=D();var C=D();G(C.prototype,{addAppender:E,removeAppender:E,removeAllAppenders:E,log:E,setLevel:E,getLevel:E,trace:E,debug:E,info:E,warn:E,error:E,fatal:E});var A=function(){return new C()};log4javascript={isStub:true,version:"dummy",logLog:{setQuietMode:E,setAlertAllErrors:E,debug:E,warn:E,error:E},addErrorListener:E,removeErrorListener:E,setEnabled:E,setShowStackTraces:E,isEnabled:E,evalInScope:E,getLogger:A,getDefaultLogger:A,getNullLogger:A,Level:D(),LoggingEvent:D(),Layout:D(),Appender:D()};log4javascript.LoggingEvent.prototype={getThrowableStrRep:E};log4javascript.Level.prototype={toString:E,equals:E,isGreaterOrEqual:E};var F=new log4javascript.Level();G(log4javascript.Level,{ALL:F,TRACE:F,DEBUG:F,INFO:F,WARN:F,ERROR:F,FATAL:F,OFF:F});log4javascript.Layout.prototype={defaults:{},format:E,ignoresThrowable:E,getContentType:E,allowBatching:E,getDataValues:E,setKeys:E,setCustomField:E,hasCustomFields:E};log4javascript.SimpleLayout=D();log4javascript.SimpleLayout.prototype=new log4javascript.Layout();log4javascript.XmlLayout=D();log4javascript.XmlLayout.prototype=new log4javascript.Layout();log4javascript.XmlLayout.prototype.escapeCdata=E;log4javascript.JsonLayout=D();log4javascript.JsonLayout.prototype=new log4javascript.Layout();G(log4javascript.JsonLayout.prototype,{setReadable:E,isReadable:E});log4javascript.HttpPostDataLayout=D();log4javascript.HttpPostDataLayout.prototype=new log4javascript.Layout();log4javascript.PatternLayout=D();log4javascript.PatternLayout.prototype=new log4javascript.Layout();log4javascript.NullLayout=D();log4javascript.NullLayout.prototype=new log4javascript.Layout();log4javascript.Appender=D();log4javascript.Appender.prototype={layout:new log4javascript.PatternLayout(),threshold:log4javascript.Level.ALL,doAppend:E,append:E,setLayout:E,getLayout:E,setThreshold:E,getThreshold:E,toString:E};log4javascript.AlertAppender=D();log4javascript.AlertAppender.prototype=new log4javascript.Appender();log4javascript.ArrayAppender=D();log4javascript.ArrayAppender.prototype=new log4javascript.Appender();log4javascript.AjaxAppender=D();log4javascript.AjaxAppender.prototype=new log4javascript.Appender();G(log4javascript.AjaxAppender.prototype,{isTimed:E,setTimed:E,getTimerInterval:E,setTimerInterval:E,isWaitForResponse:E,setWaitForResponse:E,getBatchSize:E,setBatchSize:E,setRequestSuccessCallback:E,setFailCallback:E,sendAll:E,defaults:{requestSuccessCallback:null,failCallback:null}});function B(){}B.prototype=new log4javascript.Appender();G(B.prototype,{create:E,isNewestMessageAtTop:E,setNewestMessageAtTop:E,isScrollToLatestMessage:E,setScrollToLatestMessage:E,getWidth:E,setWidth:E,getHeight:E,setHeight:E,getMaxMessages:E,setMaxMessages:E});log4javascript.InPageAppender=D();log4javascript.InPageAppender.prototype=new B();G(log4javascript.InPageAppender.prototype,{isInitiallyMinimized:E,setInitiallyMinimized:E,hide:E,show:E,isVisible:E,close:E,defaults:{layout:new log4javascript.PatternLayout(),maxMessages:null}});log4javascript.InlineAppender=log4javascript.InPageAppender;log4javascript.PopUpAppender=D();log4javascript.PopUpAppender.prototype=new B();G(log4javascript.PopUpAppender.prototype,{isUseOldPopUp:E,setUseOldPopUp:E,isComplainAboutPopUpBlocking:E,setComplainAboutPopUpBlocking:E,isFocusPopUp:E,setFocusPopUp:E,isReopenWhenClosed:E,setReopenWhenClosed:E,close:E,defaults:{layout:new log4javascript.PatternLayout(),maxMessages:null}});log4javascript.BrowserConsoleAppender=D();log4javascript.BrowserConsoleAppender.prototype=new log4javascript.Appender()})();var log4javascript_dummy=log4javascript;if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.external=="undefined"){bobj.external={}}if(typeof bobj.external.date=="undefined"){bobj.external.date={}}bobj.external.date.MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");bobj.external.date.DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");bobj.external.date.LZ=function(A){return(A<0||A>9?"":"0")+A};bobj.external.date.isDate=function(C,B){var A=bobj.external.date.getDateFromFormat(C,B);if(!A){return false}return true};bobj.external.date.compareDates=function(E,F,C,D){var B=bobj.external.date.getDateFromFormat(E,F);var A=bobj.external.date.getDateFromFormat(C,D);if(!B||!A){return -1}else{if(B.getTime()>A.getTime()){return 1}}return 0};bobj.external.date.formatDate=function(f,a){a=a+"";var J="";var T=0;var e="";var D="";var I=f.getFullYear()+"";var F=f.getMonth()+1;var b=f.getDate();var N=f.getDay();var L=f.getHours();var V=f.getMinutes();var P=f.getSeconds();var R,S,B,Q,g,C,Z,Y,W,O,n,L,l,G,A,X;var U=new Object();while(I.length<4){I="0"+I}U.y=""+I;U.yyyy=I;U.yy=I.substring(2,4);U.Y=U.y;U.YY=U.yy;U.YYYY=U.yyyy;U.M=F;U.MM=bobj.external.date.LZ(F);U.MMM=bobj.external.date.MONTH_NAMES[F-1];U.NNN=bobj.external.date.MONTH_NAMES[F+11];U.d=b;U.dd=bobj.external.date.LZ(b);U.D=U.d;U.DD=U.dd;U.E=bobj.external.date.DAY_NAMES[N+7];U.EE=bobj.external.date.DAY_NAMES[N];U.H=L;U.HH=bobj.external.date.LZ(L);if(L==0){U.h=12}else{if(L>12){U.h=L-12}else{U.h=L}}U.hh=bobj.external.date.LZ(U.h);if(L>11){U.K=L-12}else{U.K=L}U.k=L+1;U.KK=bobj.external.date.LZ(U.K);U.kk=bobj.external.date.LZ(U.k);if(L>11){U.a="PM"}else{U.a="AM"}U.m=V;U.mm=bobj.external.date.LZ(V);U.s=P;U.ss=bobj.external.date.LZ(P);while(T<a.length){e=a.charAt(T);D="";while((a.charAt(T)==e)&&(T<a.length)){D+=a.charAt(T++)}if(U[D]!=null){J=J+U[D]}else{J=J+D}}return J};bobj.external.date._isInteger=function(C){var B="1234567890";for(var A=0;A<C.length;A++){if(B.indexOf(C.charAt(A))==-1){return false}}return true};bobj.external.date._getInt=function(F,D,E,C){for(var A=C;A>=E;A--){var B=F.substring(D,D+A);if(B.length<E){return null}if(bobj.external.date._isInteger(B)){return B}}return null};bobj.external.date.getDateFromFormat=function(T,M){T=T+"";M=M+"";var S=0;var I=0;var O="";var D="";var R="";var F,E;var G=null;var Q=null;var P=null;var A=null;var N=null;var K=null;var H="";while(I<M.length){O=M.charAt(I);D="";while((M.charAt(I)==O)&&(I<M.length)){D+=M.charAt(I++)}if(D=="yyyy"||D=="YYYY"||D=="yy"||D=="YY"||D=="y"||D=="Y"){if(D=="yyyy"||D=="YYYY"){F=4;E=4}if(D=="yy"||D=="YY"){F=2;E=2}if(D=="y"||D=="Y"){F=2;E=4}G=bobj.external.date._getInt(T,S,F,E);if(G==null){return null}S+=G.length;if(G.length==2){if(G>70){G=1900+(G-0)}else{G=2000+(G-0)}}}else{if(D=="MMM"||D=="NNN"){Q=0;for(var L=0;L<bobj.external.date.MONTH_NAMES.length;L++){var B=bobj.external.date.MONTH_NAMES[L];if(T.substring(S,S+B.length).toLowerCase()==B.toLowerCase()){if(D=="MMM"||(D=="NNN"&&L>11)){Q=L+1;if(Q>12){Q-=12}S+=B.length;break}}}if((Q<1)||(Q>12)){return null}}else{if(D=="EE"||D=="E"){for(var L=0;L<bobj.external.date.DAY_NAMES.length;L++){var J=bobj.external.date.DAY_NAMES[L];if(T.substring(S,S+J.length).toLowerCase()==J.toLowerCase()){S+=J.length;break}}}else{if(D=="MM"||D=="M"){Q=bobj.external.date._getInt(T,S,D.length,2);if(Q==null||(Q<1)||(Q>12)){return null}S+=Q.length}else{if(D=="dd"||D=="DD"||D=="d"||D=="D"){P=bobj.external.date._getInt(T,S,D.length,2);if(P==null||(P<1)||(P>31)){return null}S+=P.length}else{if(D=="hh"||D=="h"){A=bobj.external.date._getInt(T,S,D.length,2);if(A==null||(A<1)||(A>12)){return null}S+=A.length}else{if(D=="HH"||D=="H"){A=bobj.external.date._getInt(T,S,D.length,2);if(A==null||(A<0)||(A>23)){return null}S+=A.length}else{if(D=="KK"||D=="K"){A=bobj.external.date._getInt(T,S,D.length,2);if(A==null||(A<0)||(A>11)){return null}S+=A.length}else{if(D=="kk"||D=="k"){A=bobj.external.date._getInt(T,S,D.length,2);if(A==null||(A<1)||(A>24)){return null}S+=A.length;A--}else{if(D=="mm"||D=="m"){N=bobj.external.date._getInt(T,S,D.length,2);if(N==null||(N<0)||(N>59)){return null}S+=N.length}else{if(D=="ss"||D=="s"){K=bobj.external.date._getInt(T,S,D.length,2);if(K==null||(K<0)||(K>59)){return null}S+=K.length}else{if(D=="a"){if(T.substring(S,S+2).toLowerCase()=="am"){H="AM"}else{if(T.substring(S,S+2).toLowerCase()=="pm"){H="PM"}else{return null}}S+=2}else{if(T.substring(S,S+D.length)!=D){return null}else{S+=D.length}}}}}}}}}}}}}}if(S!=T.length){return null}if(Q==2){if(((G%4==0)&&(G%100!=0))||(G%400==0)){if(P>29){return null}}else{if(P>28){return null}}}if((Q==4)||(Q==6)||(Q==9)||(Q==11)){if(P>30){return null}}if(A!==null){if(A<12&&H=="PM"){A=A-0+12}else{if(A>11&&H=="AM"){A-=12}}}var C=new Date(G,Q-1,P,A,N,K);C.setFullYear(G);return C};_userAgent=navigator.userAgent?navigator.userAgent.toLowerCase():null;_ie=(document.all!=null)?true:false;_dom=(document.getElementById!=null)?true:false;_isQuirksMode=(document.compatMode!="CSS1Compat");_dtd4=!_ie||(document.compatMode!="BackCompat");_moz=_dom&&!_ie;_show="visible";_hide="hidden";_hand=_ie?"hand":"pointer";_appVer=navigator.appVersion.toLowerCase();_webKit=(_userAgent.indexOf("safari")>=0)||(_userAgent.indexOf("applewebkit")>=0);_mac=(_appVer.indexOf("macintosh")>=0)||(_appVer.indexOf("macos")>=0);_opera=(_userAgent.indexOf("opera")!=-1);_userAgent=navigator.userAgent?navigator.userAgent.toLowerCase():null;_saf=_moz&&(_userAgent.indexOf("safari")>=0);_ctrl=0;_shift=1;_alt=2;_ie6=_ie&&(_appVer.indexOf("msie 5")<0);_small=(screen.height<=600);_curDoc=document;_curWin=self;_tooltipWin=self;_tooltipDx=0;_tooltipDy=0;_codeWinName="_CW";_leftBtn=(_ie||_saf)?1:0;_preloadArr=new Array;_widgets=new Array;_resizeW=_ie6?"col-resize":"E-resize";_resizeH=_ie6?"row-resize":"S-resize";_ddData=new Array;_dontNeedEncoding=null;_thex=null;_defaultButtonWidth=60;function initDom(D,C,E,B,A){_skin=D;_lang=E;_style=C;if(B){_curWin=B;_curDoc=B.document}_tooltipWin=_curWin;if(A){_codeWinName="_CW"+A}_curWin[_codeWinName]=self}function styleSheet(){includeCSS("style")}function isLayerDisplayed(A){var B=A?A.style:null;if(B){if(B.display=="none"||B.visibility=="hidden"){return false}else{var C=A.parentNode;if(C!=null){return isLayerDisplayed(C)}else{return true}}}else{return true}}function safeSetFocus(A){if(A&&A.focus&&isLayerDisplayed(A)){A.focus()}}function newWidget(B){var A=new Object;A.id=B;A.layer=null;A.css=null;A.getHTML=Widget_getHTML;A.beginHTML=Widget_getHTML;A.endHTML=Widget_getHTML;A.write=Widget_write;A.begin=Widget_begin;A.end=Widget_end;A.init=Widget_init;A.move=Widget_move;A.resize=Widget_resize;A.setBgColor=Widget_setBgColor;A.show=Widget_show;A.getWidth=Widget_getWidth;A.getHeight=Widget_getHeight;A.setHTML=Widget_setHTML;A.setDisabled=Widget_setDisabled;A.focus=Widget_focus;A.setDisplay=Widget_setDisplay;A.isDisplayed=Widget_isDisplayed;A.appendHTML=Widget_appendHTML;A.setTooltip=Widget_setTooltip;A.initialized=Widget_initialized;A.widx=_widgets.length;_widgets[A.widx]=A;return A}function new_Widget(A){return newWidget(A.id)}function getEvent(B,A){if(_ie&&(B==null)){B=A?A.event:_curWin.event}return B}function Widget_param(C,B,A){var D=C?C[B]:null;return D==null?A:D}function Widget_appendHTML(){append(_curDoc.body,this.getHTML())}function Widget_getHTML(){return""}function Widget_write(A){_curDoc.write(this.getHTML(A))}function Widget_begin(){_curDoc.write(this.beginHTML())}function Widget_end(){_curDoc.write(this.endHTML())}function Widget_init(){var A=this;A.layer=getLayer(A.id);A.css=A.layer.style;A.layer._widget=A.widx;if(A.initialHTML){A.setHTML(A.initialHTML)}}function Widget_move(A,C){var B=this.css;if(A!=null){if(_moz){B.left=""+A+"px"}else{B.pixelLeft=A}}if(C!=null){if(_moz){B.top=""+C+"px"}else{B.pixelTop=C}}}function Widget_focus(){safeSetFocus(this.layer)}function Widget_setBgColor(A){this.css.backgroundColor=A}function Widget_show(A){this.css.visibility=A?_show:_hide}function Widget_getWidth(){return this.layer.offsetWidth}function Widget_getHeight(){return this.layer.offsetHeight}function Widget_setHTML(A){var B=this;if(B.layer){B.layer.innerHTML=A}else{B.initialHTML=A}}function Widget_setDisplay(A){if(this.css){this.css.display=A?"":"none"}}function Widget_isDisplayed(){if(this.css.display=="none"){return false}else{return true}}function Widget_setDisabled(A){if(this.layer){this.layer.disabled=A}}function Widget_resize(A,B){if(A!=null){this.css.width=""+(Math.max(0,A))+"px"}if(B!=null){this.css.height=""+(Math.max(0,B))+"px"}}function Widget_setTooltip(A){this.layer.title=A}function Widget_initialized(){return this.layer!=null}function newGrabberWidget(A,D,G,F,H,E,C,B,I){o=newWidget(A);o.resizeCB=D;o.x=G;o.y=F;o.w=H;o.h=E;o.dx=0;o.dy=0;o.min=null;o.max=null;o.isHori=C;o.preloaded=new Image;o.preloaded.src=_skin+"../resizepattern.gif";o.buttonCB=B;o.allowGrab=true;o.collapsed=false;o.isFromButton=false;o.showGrab=GrabberWidget_showGrab;o.setCollapsed=GrabberWidget_setCollapsed;o.tooltipButton=I;o.getHTML=GrabberWidget_getHTML;o.enableGrab=GrabberWidget_enableGrab;o.setMinMax=GrabberWidget_setMinMax;if(window._allGrabbers==null){window._allGrabbers=new Array}o.index=_allGrabbers.length;_allGrabbers[o.index]=o;o.buttonLyr=null;o.setButtonImage=GrabberWidget_setButtonImage;o.getImgOffset=GrabberWidget_getImgOffset;return o}function GrabberWidget_setCollapsed(B,A){this.collapsed=B;this.setButtonImage(false,A)}function GrabberWidget_getImgOffset(A){var B=this;if(B.isHori){B.dx=(B.collapsed?12:0)+(A?6:0);B.dy=0}else{B.dy=(B.collapsed?12:0)+(A?6:0);B.dx=0}}function GrabberWidget_setButtonImage(A,B){var C=this;C.getImgOffset(A);C.tooltipButton=B;if(C.layer){if(C.buttonLyr==null){C.buttonLyr=getLayer("grabImg_"+C.id)}if(C.buttonLyr){changeSimpleOffset(C.buttonLyr,C.dx,C.dy,null,B)}}}function GrabberWidget_enableGrab(A){var B=this;B.allowGrab=A;if(B.css){B.css.cursor=B.allowGrab?(B.isHori?_resizeW:_resizeH):"default"}}function GrabberWidget_getHTML(){var B=this;var A=B.isHori?_resizeW:_resizeH;var D='onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".GrabberWidget_down(event,'"+B.index+"',this);return false;\"";var C=_ie?('<img onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+B.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+A+'">'):('<div onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" id="modal_'+B.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+A+'"></div>');return getBGIframe("grabIframe_"+B.id)+C+'<table cellpadding="0" cellspacing="0" border="0" '+D+' id="'+B.id+'" style="overflow:hidden;position:absolute;left:'+B.x+"px;top:"+B.y+"px;width:"+B.w+"px;height:"+B.h+"px;cursor:"+A+'"><tr><td></td></tr></table>'}function GrabberWidget_setMinMax(B,A){this.min=B;this.max=A}function GrabberWidget_button(e,index,lyr){var o=_allGrabbers[index];o.isFromButton=true;lyr.onmouseup=eval("_curWin."+_codeWinName+".GrabberWidget_buttonup")}function GrabberWidget_buttonover(C,B,A){var D=_allGrabbers[B];D.setButtonImage(true)}function GrabberWidget_buttonout(C,B,A){var D=_allGrabbers[B];D.setButtonImage(false)}function GrabberWidget_buttonup(A){GrabberWidget_up(A)}function GrabberWidget_showGrab(){var D=this,C=D.mod,E=D.iframe,B=D.layer.style,A=C.style;E.setDisplay(true)}function GrabberWidget_down(e,index,lyr){var o=_allGrabbers[index];window._theGrabber=o;if(o.mod==null){o.mod=getLayer("modal_"+o.id);o.iframe=newWidget("grabIframe_"+o.id);o.iframe.init()}o.mod.onmousemove=eval("_curWin."+_codeWinName+".GrabberWidget_move");o.mod.onmouseup=eval("_curWin."+_codeWinName+".GrabberWidget_up");o.grabStartPosx=parseInt(lyr.style.left);o.grabStartPosy=parseInt(lyr.style.top);o.grabStartx=eventGetX(e);o.grabStarty=eventGetY(e);var mod=o.mod,ifr=o.iframe,stl=o.layer.style,st=mod.style;stl.backgroundImage="url('"+_skin+"../resizepattern.gif')";o.prevZ=stl.zIndex;stl.zIndex=9999;ifr.css.zIndex=9998;st.width="100%";st.height="100%";mod.style.display="block";var p=getPos(o.layer);ifr.move(p.x,p.y);ifr.resize(o.getWidth(),o.getHeight());if(!o.isFromButton){o.showGrab()}return false}function GrabberWidget_move(F){var C=_theGrabber,E=C.layer,H=C.mod;if(C.isFromButton){if(C.isHori){var I=eventGetX(F),D=C.grabStartx;if((I<D-3)||(I>D+3)){C.isFromButton=false}}else{var A=eventGetY(F),B=C.grabStarty;if((G<B-3)||(G>B+3)){C.isFromButton=false}}if(!C.isFromButton){C.showGrab()}}if(!C.isFromButton){if(C.allowGrab){var I=C.isHori?Math.max(0,C.grabStartPosx-C.grabStartx+eventGetX(F)):null;var G=C.isHori?null:Math.max(0,C.grabStartPosy-C.grabStarty+eventGetY(F));if(C.isHori){if(C.min!=null){I=Math.max(I,C.min)}if(C.max!=null){I=Math.min(I,C.max)}}else{if(C.min!=null){G=Math.max(G,C.min)}if(C.max!=null){G=Math.min(G,C.max)}}eventCancelBubble(F);C.move(I,G);getPos(C.layer);if(C.buttonCB){var J=C.buttonLyr.style;if(J.display!="none"){J.display="none"}}C.iframe.move(I,G)}}}function GrabberWidget_up(E){var F=_theGrabber,B=F.layer,D=F.mod,C=B.style;C.backgroundImage="";C.zIndex=F.prevZ;var G=F.iframe;G.move(-100,-100);G.resize(1,1);G.setDisplay(false);eventCancelBubble(E);var A=D.style;A.display="none";A.width="0px";A.height="0px";if(F.buttonCB){F.buttonLyr.style.display=""}if(F&&(F.isFromButton)){if(F.buttonCB){F.buttonCB()}F.isFromButton=false}if(F.allowGrab&&(!F.isFromButton)){if(F.resizeCB){F.resizeCB(parseInt(B.style.left),parseInt(B.style.top))}}}function newButtonWidget(C,L,H,D,F,Q,G,I,B,M,K,P,N,J,A,O){var E=newWidget(C);E.label=L;E.cb=H;E.width=D;E.hlp=F;E.tooltip=Q;E.tabIndex=G;E.isGray=false;E.isDefault=false;E.txt=null;E.icn=null;E.margin=I?I:0;E.extraStyle="";E.isDelayCallback=true;if(B){E.url=B;E.w=M;E.h=K;E.dx=P;E.dy=N;E.disDx=(A!=null)?A:P;E.disDy=(O!=null)?O:N;E.imgRight=J?true:false}E.getHTML=ButtonWidget_getHTML;E.setDisabled=ButtonWidget_setDisabled;E.setText=ButtonWidget_setText;E.changeImg=ButtonWidget_changeImg;E.oldInit=E.init;E.init=ButtonWidget_init;E.isDisabled=ButtonWidget_isDisabled;E.setDefaultButton=ButtonWidget_setDefaultButton;E.executeCB=ButtonWidget_executeCB;E.setTooltip=ButtonWidget_setTooltip;E.setDelayCallback=ButtonWidget_setDelayCallback;E.instIndex=ButtonWidget_currInst;ButtonWidget_inst[ButtonWidget_currInst++]=E;return E}ButtonWidget_inst=new Array;ButtonWidget_currInst=0;function ButtonWidget_getHTML(){with(this){var clk=_codeWinName+".ButtonWidget_clickCB("+this.instIndex+');return false;"';var clcbs='onclick="'+clk+'" ';if(_ie){clcbs+='ondblclick="'+clk+'" '}var isDefaultSty=(this.isDefault&&!this.isGray);clcbs+='onkeydown=" return '+_codeWinName+".ButtonWidget_keydownCB(event,"+this.instIndex+');" ';var url1=_skin+"button.gif",addPar=' style="'+extraStyle+"cursor:"+_hand+";margin-left:"+margin+"px; margin-right:"+margin+'px; "'+clcbs+" ",tip=attr("title",tooltip),idText="theBttn"+id,idIcon="theBttnIcon"+id;var bg=backImgOffset(url1,0,isDefaultSty?105:42);var lnkB="<a "+attr("id",idText)+" "+tip+" "+attr("tabindex",tabIndex)+' href="javascript:void(0)" class="wizbutton" role="button">';var l=(label!=null);var im=(this.url?('<td align="'+(l?(this.imgRight?"right":"left"):"center")+'" style="'+bg+'" width="'+(!l&&(width!=null)?width+6:w+6)+'">'+(l?"":lnkB)+simpleImgOffset(url,w,h,this.isGray?disDs:dx,this.isGray?disDy:dy,idIcon,null,(l?"":tooltip),"cursor:"+_hand)+(l?"":"</a>")+"</td>"):"");return'<table onmouseover="return true" '+attr("id",id)+" "+addPar+' border="0" cellspacing="0" cellpadding="0"><tr valign="middle"><td height="21" width="5" style="'+backImgOffset(url1,0,isDefaultSty?63:0)+'"></td>'+(this.imgRight?"":im)+(l?("<td "+attr("width",width)+attr("id","theBttnCenterImg"+id)+' align="center" class="'+(this.isGray?"wizbuttongray":"wizbutton")+'" style="padding-left:3px;padding-right:3px;'+bg+'"><nobr>'+lnkB+label+"</a></nobr></td>"):"")+(this.imgRight?im:"")+'<td height="21" width="5" style="'+backImgOffset(url1,0,isDefaultSty?84:21)+'"></td></tr></table>'}}function ButtonWidget_setDelayCallback(A){this.isDelayCallback=(A==true)}function ButtonWidget_setDisabled(F){var E=this,D=F?"default":_hand;E.isGray=F;if(E.layer){var B=F?"wizbuttongray":"wizbutton";if(E.txt.className!=B){E.txt.className=B;E.txt.style.cursor=D;E.css.cursor=D;if(E.icn){changeSimpleOffset(E.icn,E.isGray?E.disDx:E.dx,E.isGray?E.disDy:E.dy);E.icn.style.cursor=D}if(E.isDefault){var A=!F,C=_skin+"button.gif";changeSimpleOffset(E.leftImg,0,A?63:0,C);changeOffset(E.centerImg,0,A?105:42,C);changeSimpleOffset(E.rightImg,0,A?84:21,C)}}}}function ButtonWidget_setDefaultButton(){var C=this;if(C.layer){var A=!C.isGray,B=_skin+"button.gif";changeSimpleOffset(C.leftImg,0,A?63:0,B);changeOffset(C.centerImg,0,A?105:42,B);changeSimpleOffset(C.rightImg,0,A?84:21,B)}C.isDefault=true}function ButtonWidget_isDisabled(){return this.isGray}function ButtonWidget_setText(A){this.txt.innerHTML=convStr(A)}function ButtonWidget_setTooltip(A){var B=this;B.tooltip=A;B.layer.title=A;if(B.txt){B.txt.title=A}if(B.icn){B.icn.title=A}}function ButtonWidget_init(){var B=this;B.oldInit();B.txt=getLayer("theBttn"+this.id);B.icn=getLayer("theBttnIcon"+this.id);B.leftImg=getLayer("theBttnLeftImg"+this.id);B.centerImg=getLayer("theBttnCenterImg"+this.id);B.rightImg=getLayer("theBttnRightImg"+this.id);var A=B.isGray?"wizbuttongray":"wizbutton";if(B.txt.className!=A){B.setDisabled(B.isGray)}}function ButtonWidget_changeImg(B,A,E,D,C,F){var G=this;if(C){G.url=C}if(B!=null){G.dx=B}if(A!=null){G.dy=A}if(E!=null){G.disDx=E}if(D!=null){G.disDy=D}if(F!=null){G.tooltip=F}if(G.icn){changeSimpleOffset(G.icn,G.isGray?G.disDx:G.dx,G.isGray?G.disDy:G.dy,G.url,G.tooltip)}}function ButtonWidget_clickCB(A){var B=ButtonWidget_inst[A];if(B&&!B.isGray){if(B.isDelayCallback){setTimeout("ButtonWidget_delayClickCB("+A+")",1)}else{ButtonWidget_delayClickCB(A)}}}function ButtonWidget_delayClickCB(A){var B=ButtonWidget_inst[A];B.executeCB()}function ButtonWidget_executeCB(){var o=this;if(o.cb){if(typeof o.cb!="string"){o.cb()}else{eval(o.cb)}}}function ButtonWidget_keydownCB(D,B){var A=eventGetKey(D);var C=ButtonWidget_inst[B];if(A==13&&C.cb){eventCancelBubble(D)}return true}function newScrolledZoneWidget(G,C,E,B,D,A){var F=newWidget(G);F.borderW=C;F.padding=E;F.w=B;F.h=D;F.oldResize=F.resize;F.beginHTML=ScrolledZoneWidget_beginHTML;F.endHTML=ScrolledZoneWidget_endHTML;F.resize=ScrolledZoneWidget_resize;F.bgClass=(A)?A:"insetBorder";return F}function ScrolledZoneWidget_beginHTML(){var A=this.w,B=this.h;var C=_moz?2*(this.borderW+this.padding):0;if(typeof (A)=="number"){if(_moz){A=Math.max(0,A-C)}A=""+A+"px"}if(typeof (B)=="number"){if(_moz){B=Math.max(0,B-C)}B=""+B+"px"}return'<div tabindex=-1 align="left" class="'+this.bgClass+'" id="'+this.id+'" style="border-width:'+this.borderW+"px;padding:"+this.padding+"px;"+sty("width",A)+sty("height",B)+'overflow:auto">'}function ScrolledZoneWidget_endHTML(){return"</div>"}function ScrolledZoneWidget_resize(A,B){if(_moz){var C=2*(this.borderW+this.padding);if(A!=null){A=Math.max(0,A-C)}if(B!=null){B=Math.max(0,B-C)}}this.oldResize(A,B)}function newComboWidget(F,E,A,B,C){var D=newWidget(F);D.tooltip=C;D.size=1;D.getHTML=ComboWidget_getHTML;D.beginHTML=ComboWidget_beginHTML;D.endHTML=ComboWidget_endHTML;D.changeCB=E;D.noMargin=A;D.width=B==null?null:""+B+"px";D.add=ComboWidget_add;D.del=ComboWidget_del;D.getSelection=ComboWidget_getSelection;D.select=ComboWidget_select;D.valueSelect=ComboWidget_valueSelect;D.getCount=ComboWidget_getCount;D.oldSetDisabled=D.setDisabled;D.setDisabled=ComboWidget_setDisabled;D.setUndefined=ComboWidget_setUndefined;D.delByID=ComboWidget_delByID;D.findByValue=ComboWidget_findByValue;D.findByText=ComboWidget_findByText;D.getValue=ComboWidget_getValue;D.isGrayed=ComboWidget_isGrayed;D.clearSelection=ComboWidget_clearSelection;D.isDisabled=false;D.multi=false;D.undef=false;D.isCombo=true;D.undefId=D.id+"__undef";D.disabledId=D.id+"__disabled";return D}_extrCmbS=(_moz?"font-size:12px;":"");function ComboWidget_beginHTML(){var B=this,A=((_moz&&!B.isCombo)?"font-size:12px;":"");return"<select "+(B.multi?"multiple":"")+" "+(B.noMargin?'style="'+sty("width",B.width)+A+'"':'style="'+sty("width",B.width)+"margin-left:10px;"+A+'"')+' class="listinputs" '+attr("onchange",_codeWinName+".ComboWidget_changeCB(event,this)")+attr("onclick",_codeWinName+".ComboWidget_clickCB(event,this)")+attr("ondblclick",_codeWinName+".ComboWidget_dblClickCB(event,this)")+attr("onkeyup",_codeWinName+".ComboWidget_keyUpCB(event,this)")+attr("onkeydown",_codeWinName+".ComboWidget_keyDownCB(event,this)")+attr("id",B.id)+attr("name",B.id)+attr("title",B.tooltip)+'size="'+B.size+'">'}function ComboWidget_clearSelection(){var A=this;if(A.layer){A.layer.selectedIndex=-1}}function ComboWidget_endHTML(){return"</select>"}function ComboWidget_getHTML(A){return this.beginHTML()+(A?A:"")+this.endHTML()}function ComboWidget_add(B,F,C,G,E){var D=this.layer,A=_curDoc.createElement("option");if(_ie){D.options.add(A)}else{D.appendChild(A)}if(A.innerText!=null){A.innerText=B}else{A.innerHTML=convStr(B)}A.value=F;if(G!=null){A.id=G}if(C){A.selected=true}if(E){A.style.color="gray"}return A}function ComboWidget_getSelection(){var C=this.layer,B=C.selectedIndex;if(B<0){return null}var A=new Object;A.index=B;A.value=C.options[B].value;A.text=C.options[B].text;return A}function ComboWidget_select(B){var D=this,C=D.layer,A=C.options.length;if(B==null){C.selectedIndex=-1}if((B<0)||(B>=A)){B=A-1}if(B>=0){C.selectedIndex=B}D.setUndefined(false)}function ComboWidget_valueSelect(B){var F=this,E=F.layer,D=E.options,A=D.length;for(var C=0;C<A;C++){if(D[C].value==B){D[C].selected=true;F.setUndefined(false);break}}}function ComboWidget_del(A){var B=this.layer;if(A==null){B.options.length=0}else{if(_ie){B.remove(A)}else{B.options[A]=null}this.select(A)}}function ComboWidget_changeCB(B,A){var C=getWidget(A);if(C.changeCB){C.changeCB(B)}}function ComboWidget_clickCB(B,A){var C=getWidget(A);if(C.clickCB){C.clickCB(B)}}function ComboWidget_dblClickCB(B,A){var C=getWidget(A);if(C.dblClickCB){C.dblClickCB(B)}}function ComboWidget_keyUpCB(B,A){var C=getWidget(A);if(C.keyUpCB){C.keyUpCB(B)}}function ComboWidget_keyDownCB(C,A){var B=eventGetKey(C);var D=getWidget(A);if(D.isCombo&&(B==27||B==13)){eventCancelBubble(C)}else{if(B==13&&D.keyUpCB){eventCancelBubble(C)}}}function ComboWidget_getCount(){return this.layer.options.length}function ComboWidget_delByID(B){var A=getLayer(B);if(A!=null){this.del(A.index)}A=null}function ComboWidget_setDisabled(D,B){var C=this;C.oldSetDisabled(D);C.isDisabled=D;if(D==true){var A=getLayer(C.disabledId);if(A==null){C.add("","",true,C.disabledId)}else{C.layer.selectedIndex=A.index}}else{C.delByID(C.disabledId)}}function ComboWidget_setUndefined(B){var C=this;C.undef=B;if(B==true){var A=getLayer(C.undefId);if(A==null){C.add("","",true,C.undefId)}else{C.layer.selectedIndex=A.index}}else{C.delByID(C.undefId)}}function ComboWidget_findByValue(G){var F=this,E=F.layer,D=E.options,A=D.length;for(var C=0;C<A;C++){if(D[C].value==G){var B=new Object;B.index=C;B.value=E.options[C].value;B.text=E.options[C].text;return B}}return null}function ComboWidget_findByText(B){var G=this,F=G.layer,E=F.options,A=E.length;for(var D=0;D<A;D++){if(E[D].text==B){var C=new Object;C.index=D;C.value=F.options[D].value;C.text=F.options[D].text;return C}}return null}function ComboWidget_getValue(C){var F=this,E=F.layer,D=E.options,A=D.length;if(C==null||C<0||C>A){return null}var B=new Object;B.index=C;B.value=E.options[C].value;return B}function ComboWidget_isGrayed(B){var E=this,D=E.layer,C=D.options,A=C.length;if(B==null||B<0||B>A){return false}return(D.options[B].style.color=="gray")}function newListWidget(A,F,E,B,J,I,G,D,H){var C=newComboWidget(A,F,true,B,I);C.clickCB=H;C.dblClickCB=G;C.keyUpCB=D;C.size=J;C.multi=E;C.getMultiSelection=ListWidget_getMultiSelection;C.setUndefined=ListWidget_setUndefined;C.isUndefined=ListWidget_isUndefined;C.change=ListWidget_change;C.isCombo=false;return C}function ListWidget_setUndefined(A){var B=this;B.undef=A;if(A==true){B.layer.selectedIndex=-1}}function ListWidget_isUndefined(){return(this.layer.selectedIndex==-1)}function ListWidget_getMultiSelection(){var F=this.layer,E=new Array,A=F.options.length;for(var D=0;D<A;D++){var C=F.options[D];if(C.selected){var B=new Object;B.index=D;B.value=C.value;B.text=C.text;E[E.length]=B}}return E}function ListWidget_change(B,A){var C=this;if(B!=null){C.multi=B;C.layer.multiple=B}if(A!=null){C.size=A;C.layer.size=A}}function newInfoWidget(F,E,B,D,A){var C=newWidget(F);C.title=E?E:"";C.boldTitle=B?B:"";C.text=D?D:"";C.height=(A!=null)?A:55;C.getHTML=InfoWidget_getHTML;C.setText=InfoWidget_setText;C.setTitle=InfoWidget_setTitle;C.setTitleBold=InfoWidget_setTitleBold;C.oldResize=C.resize;C.resize=InfoWidget_resize;C.textLayer=null;return C}function InfoWidget_setText(D,B){var C=this;D=D?D:"";C.text=D;if(C.layer){var A=C.textLayer;if(A==null){A=C.textLayer=getLayer("infozone_"+C.id)}if(A){A.innerHTML=B?D:convStr(D,false,true)}}}function InfoWidget_setTitle(C){var B=this;C=C?C:"";B.title=C;if(B.layer){var A=B.titleLayer;if(A==null){A=B.titleLayer=getLayer("infotitle_"+B.id)}if(A){A.innerHTML=convStr(C)}}}function InfoWidget_setTitleBold(C){var B=this;C=C?C:"";B.boldTitle=C;if(B.layer){var A=B.titleLayerBold;if(A==null){A=B.titleLayerBold=getLayer("infotitlebold_"+B.id)}if(A){A.innerHTML=convStr(C)}}}function InfoWidget_getHTML(){var A=this;return'<div class="dialogzone" align="left" style="overflow:hidden;'+sty("width",A.width)+sty("height",""+A.height+"px")+'" id="'+A.id+'"><nobr>'+img(_skin+"../help.gif",16,16,"top",null,_helpLab)+'<span class="dialogzone" style="padding-left:5px" id="infotitle_'+A.id+'">'+convStr(A.title)+'</span><span style="padding-left:5px" class="dialogzonebold" id="infotitlebold_'+A.id+'">'+convStr(A.boldTitle)+"</span></nobr><br>"+getSpace(1,2)+'<div class="infozone" align="left" id="infozone_'+A.id+'" style="height:'+(A.height-18-(_moz?10:0))+"px;overflow"+(_ie?"-y":"")+':auto">'+convStr(A.text,false,true)+"</div></div>"}function InfoWidget_resize(B,C){var D=this;if(B!=null){D.w=B}if(C!=null){D.h=C}D.oldResize(B,C);if(D.layer){var A=D.textLayer;if(A==null){A=D.textLayer=getLayer("infozone_"+D.id)}if(A){if(D.h!=null){A.style.height=""+Math.max(0,D.h-(_ie?18:28))+"px"}}}}function newCheckWidget(A,H,F,E,I,G,D,C){var B=newWidget(A);B.text=H;B.convText=C;B.changeCB=F;B.idCheckbox="check_"+A;B.checkbox=null;B.kind="checkbox";B.name=B.idCheckbox;B.bold=E;B.imgUrl=I;B.imgW=G;B.imgH=D;B.getHTML=CheckWidget_getHTML;B.setText=CheckWidget_setText;B.parentInit=Widget_init;B.init=CheckWidget_init;B.check=CheckWidget_check;B.isChecked=CheckWidget_isChecked;B.setDisabled=CheckWidget_setDisabled;B.isDisabled=CheckWidget_isDisabled;B.uncheckOthers=CheckWidget_uncheckOthers;B.isIndeterminate=CheckWidget_isIndeterminate;B.setIndeterminate=CheckWidget_setIndeterminate;B.layerClass=("dialogzone"+(B.bold?"bold":""));B.nobr=true;return B}function CheckWidget_getHTML(){var B=this,A=B.layerClass;return'<table border="0" onselectstart="return false" cellspacing="0" cellpadding="0" class="'+A+'"'+attr("id",B.id)+'><tr valign="middle"><td style="height:20px;width:21px"><input style="margin:'+(_moz?3:0)+'px" onclick="'+_codeWinName+'.CheckWidget_changeCB(event,this)" type="'+B.kind+'"'+attr("id",B.idCheckbox)+attr("name",B.name)+"></td>"+(B.imgUrl?'<td><label style="padding-left:2px" for="'+B.idCheckbox+'">'+img(B.imgUrl,B.imgW,B.imgH)+"</label></td>":"")+"<td>"+(B.nobr?"<nobr>":"")+'<label style="padding-left:'+(B.imgUrl?4:2)+'px" id="label_'+B.id+'" for="'+B.idCheckbox+'">'+(B.convText?convStr(B.text):B.text)+"</label>"+(B.nobr?"</nobr>":"")+"</td></tr></table>"}function CheckWidget_setText(A){var B=this;B.text=A;if(B.layer){if(B.labelLyr==null){B.labelLyr=getLayer("label_"+B.id)}B.labelLyr.innerHTML=B.convText?convStr(A):A}}function CheckWidget_init(){this.parentInit();this.checkbox=getLayer(this.idCheckbox)}function CheckWidget_check(A){this.checkbox.checked=A;if(A){this.uncheckOthers()}}function CheckWidget_isChecked(){return this.checkbox.checked}function CheckWidget_changeCB(B,A){var C=getWidget(A);C.uncheckOthers();if(C.changeCB){C.changeCB(B)}}function CheckWidget_setDisabled(A){this.checkbox.disabled=A;if(_moz){this.checkbox.className=(A?"dialogzone":"")}}function CheckWidget_isDisabled(){return this.checkbox.disabled}function CheckWidget_uncheckOthers(){}function CheckWidget_isIndeterminate(){return this.checkbox.indeterminate}function CheckWidget_setIndeterminate(A){this.checkbox.indeterminate=A}function newRadioWidget(A,I,J,G,F,K,H,D,C){var B=newCheckWidget(A,J,G,F,K,H,D,C);B.kind="radio";B.name=I;if(_RadioWidget_groups[I]==null){_RadioWidget_groups[I]=new Array}B.groupInstance=_RadioWidget_groups[I];var E=B.groupInstance;B.groupIdx=E.length;E[E.length]=B;B.uncheckOthers=RadioWidget_uncheckOthers;return B}var _RadioWidget_groups=new Array;function RadioWidget_uncheckOthers(){var D=this.groupInstance,B=this.groupIdx,A=D.length;for(var C=0;C<A;C++){if(C!=B){var E=D[C].checkbox;if(E){E.checked=false}}}}function newTextFieldWidget(C,G,J,F,I,B,K,D,A,H){var E=newWidget(C);E.tooltip=K;E.changeCB=G;E.maxChar=J;E.keyUpCB=F;E.enterCB=I;E.noMargin=B;E.width=D==null?null:""+D+"px";E.focusCB=A;E.blurCB=H;E.disabled=false;E.getHTML=TextFieldWidget_getHTML;E.getValue=TextFieldWidget_getValue;E.setValue=TextFieldWidget_setValue;E.intValue=TextFieldWidget_intValue;E.intPosValue=TextFieldWidget_intPosValue;E.select=TextFieldWidget_select;E.setDisabled=TextFieldWidget_setDisabled;E.beforeChange=null;E.wInit=E.init;E.init=TextFieldWidget_init;E.oldValue="";E.helpTxt="";E.isHelpTxt=false;E.setHelpTxt=TextFieldWidget_setHelpTxt;E.eraseHelpTxt=TextFieldWidget_eraseHelpTxt;E.enterCancelBubble=true;return E}function TextFieldWidget_setDisabled(B){var A=this;A.disabled=B;if(A.layer){A.layer.disabled=B}}function TextFieldWidget_init(){var A=this;A.wInit();A.layer.value=""+(A.oldValue!="")?A.oldValue:"";if(A.helpTxt&&!A.oldValue){A.setHelpTxt(A.helpTxt)}}function TextFieldWidget_getHTML(){var A=this;return"<input"+(A.disabled?" disabled":"")+' oncontextmenu="event.cancelBubble=true;return true" style="'+sty("width",this.width)+(_moz?"margin-top:1px;margin-bottom:1px;padding-left:5px;padding-right:2px;":"")+(_isQuirksMode?"height:20px;":"height:16px;")+"margin-left:"+(this.noMargin?0:10)+'px" onfocus="'+_codeWinName+'.TextFieldWidget_focus(this)" onblur="'+_codeWinName+'.TextFieldWidget_blur(this)" onchange="'+_codeWinName+'.TextFieldWidget_changeCB(event,this)" onkeydown=" return '+_codeWinName+'.TextFieldWidget_keyDownCB(event,this);" onkeyup=" return '+_codeWinName+'.TextFieldWidget_keyUpCB(event,this);" onkeypress=" return '+_codeWinName+'.TextFieldWidget_keyPressCB(event,this);" type="text" '+attr("maxLength",this.maxChar)+' ondragstart="event.cancelBubble=true;return true" onselectstart="event.cancelBubble=true;return true" class="textinputs" id="'+this.id+'" name="'+this.id+'"'+attr("title",this.tooltip)+' value="">'}function TextFieldWidget_getValue(){var A=this;if(A.isHelpTxt){return""}else{return A.layer?A.layer.value:A.oldValue}}function TextFieldWidget_setValue(A){var B=this;if(B.layer){B.eraseHelpTxt();B.layer.value=""+A}else{B.oldValue=A}}function TextFieldWidget_changeCB(B,A){var C=getWidget(A);C.eraseHelpTxt();if(C.beforeChange){C.beforeChange()}if(C.changeCB){C.changeCB(B)}}function TextFieldWidget_keyPressCB(B,A){var C=getWidget(A);if(eventGetKey(B)==13){C.enterKeyPressed=true;return false}else{C.enterKeyPressed=false}return true}function TextFieldWidget_keyUpCB(B,A){var C=getWidget(A);C.eraseHelpTxt();if(eventGetKey(B)==13&&C.enterKeyPressed){if(C.beforeChange){C.beforeChange()}if(C.enterCB){if(C.enterCancelBubble){eventCancelBubble(B)}C.enterCB(B)}return false}else{if(C.keyUpCB){C.keyUpCB(B)}}C.enterKeyPressed=false;return true}function TextFieldWidget_keyDownCB(B,A){var C=getWidget(A);C.eraseHelpTxt();C.enterKeyPressed=false;if(eventGetKey(B)==13){return true}else{if(eventGetKey(B)==8){eventCancelBubble(B)}}return true}function TextFieldWidget_eraseHelpTxt(){var A=this;if(A.isHelpTxt){A.layer.value=""}A.isHelpTxt=false;A.layer.style.color="black"}function TextFieldWidget_focus(A){var B=getWidget(A);B.eraseHelpTxt();if(B.focusCB){B.focusCB()}}function TextFieldWidget_blur(A){var B=getWidget(A);if(B.beforeChange){B.beforeChange()}if(B.blurCB){B.blurCB()}}function TextFieldWidget_intValue(A){var B=parseInt(this.getValue());return isNaN(B)?A:B}function TextFieldWidget_intPosValue(A){var B=this.intValue(A);return(B<0)?A:B}function TextFieldWidget_select(){this.layer.select()}function TextFieldWidget_setHelpTxt(A){var B=this;B.helpTxt=A;if(B.layer&&(B.layer.value=="")){B.isHelpTxt=true;B.layer.value=A;B.layer.style.color="#808080"}}function newIntFieldWidget(C,G,I,F,H,B,J,D,A){var E=newTextFieldWidget(C,G,I,F,H,B,J,D);E.min=-Number.MAX_VALUE;E.max=Number.MAX_VALUE;E.customCheckCB=A;E.setMin=IntFieldWidget_setMin;E.setMax=IntFieldWidget_setMax;E.setValue=IntFieldWidget_setValue;E.beforeChange=IntFieldWidget_checkChangeCB;E.value="";return E}function IntFieldWidget_setMin(A){if(!isNaN(A)){this.min=A}}function IntFieldWidget_setMax(A){if(!isNaN(A)){this.max=A}}function IntFieldWidget_setValue(B){var C=this,A=C.layer;B=""+B;if(B==""){if(A){A.value=""}C.oldValue="";return }var D=parseInt(B);value="";if(!isNaN(D)&&(D>=C.min)&&(D<=C.max)&&((C.customCheckCB==null)||C.customCheckCB(D))){value=D;C.oldValue=value}else{if(C.oldValue){value=C.oldValue}}if(A){A.value=""+value}}function IntFieldWidget_checkChangeCB(){var A=this;A.setValue(A.layer.value)}function newFrameZoneWidget(E,A,C,B){var D=newWidget(E);D.w=(A!=null)?""+Math.max(0,A-10)+"px":null;D.h=(C!=null)?""+Math.max(0,C-10)+"px":null;D.reverse=(B!=null)?B:false;D.cont=null;D.beginHTML=FrameZoneWidget_beginHTML;D.endHTML=FrameZoneWidget_endHTML;D.oldResize=D.resize;D.resize=FrameZoneWidget_resize;return D}function FrameZoneWidget_resize(A,B){var D=this;var C=D.layer.display!="none";if(C&_moz&&!_saf){D.setDisplay(false)}D.oldResize(A,B);if(C&_moz&&!_saf){D.setDisplay(true)}}function FrameZoneWidget_beginHTML(){var A=this;return'<table width="100%" style="'+sty("width",A.w)+sty("height",A.h)+'" id="'+A.id+'" cellspacing="0" cellpadding="4" border="0"><tbody><tr><td valign="top" class="dlgFrame" id="frame_cont_'+A.id+'" style="padding:5px">'}function FrameZoneWidget_endHTML(){var A=this;return"</td></tr></tbody></table>"}function arrayAdd(E,G,D,B){var F=E[G],A=F.length;if((B==null)||(typeof B!="number")){B=-1}if((B<0)||(B>A)){B=A}if(B!=A){var C=F.slice(B);F.length=B+1;F[B]=D;F=F.concat(C)}else{F[B]=D}E[G]=F;return B}function arrayRemove(D,F,A){var E=D[F],C=E.length-1;if(A==null){E.length=0;D[F]=E;return -1}if((A<0)||(A>C)){return -1}if(A==C){E.length=C}else{var B=E.slice(A+1);E.length=A;E=E.concat(B)}D[F]=E;return A}function getFrame(name,par){if(par==null){par=self}var frames=par.frames,w=eval("frames."+name);if(w==null){return w}var l=frames.length;for(var i=0;i<l;i++){w=frames[i];try{if(w.name==name){return w}}catch(exc){}}return null}function frameGetUrl(A){return A.location.href}function frameReload(A){var B=A.location;B.replace(B.href)}function setTopFrameset(){_curWin._topfs="topfs"}function getTopFrameset(A){if(A==null){A=self}if(A._topfs=="topfs"){return A}else{if(A!=top){return getTopFrameset(A.parent)}else{return null}}}function convStr(D,A,C){D=""+D;var B=D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");if(A){B=B.replace(/ /g,"&nbsp;")}if(C){B=B.replace(/\n/g,"<br>")}return B}function escapeCR(B){B=""+B;var A=B.replace(/\r/g,"").replace(/\n/g,"\\n");return A}function addDblClickCB(B,A){if(B.addEventListener&&!_saf){B.addEventListener("dblclick",A,false)}else{B.ondblclick=A}}function img(E,A,C,F,B,D){B=(B?B:"");if(D==null){D=""}return"<img"+attr("width",A)+attr("height",C)+attr("src",E)+attr("alt",D)+attr("align",F)+' border="0" hspace="0" vspace="0" '+(B?B:"")+">"}function imgOffset(A,G,D,J,I,B,F,C,H,E){return img(_skin+"../transp.gif",G,D,E,(F?F:"")+" "+attr("id",B)+' style="float:left;'+backImgOffset(A,J,I)+(H?H:"")+'"',C)}function simpleImgOffset(A,G,D,J,I,B,F,C,H,E){if(_ie){if(J==null){J=0}if(I==null){I=0}return"<div "+(F?F:"")+" "+attr("id",B)+' style="position:relative;padding:0px;width:'+G+"px;height:"+D+"px;overflow:hidden;"+(H?H:"")+'">'+img(A,null,null,(E?E:"top"),'style="margin:0px;position:relative;top:'+(-I)+"px;left:"+(-J)+'px" tabIndex="-1"',C)+"</div>"}else{return imgOffset(A,G,D,J,I,B,F,C,H,E)}}function changeSimpleOffset(E,B,A,D,F){if(_ie){E=E.childNodes[0];var C=E.style;if((D!=null)&&(D!=E.src)){E.src=D}if(B!=null){C.left=""+(-B)+"px"}if(A!=null){C.top=""+(-A)+"px"}if(F!=null){E.title=F;E.alt=F}}else{changeOffset(E,B,A,D,F)}}function backImgOffset(C,B,A){return"background-image:url('"+C+"');background-position:"+(-B)+"px "+(-A)+"px;"}function changeOffset(E,B,A,D,F){var C=E.style;if(C){if((B!=null)&&(A!=null)){C.backgroundPosition=""+(-B)+"px "+(-A)+"px"}if(D){C.backgroundImage="url('"+D+"')"}}if(F){E.title=F}}function includeCSS(B,C){if(typeof (_skin)=="string"&&_skin!=""){var A="";if(C){A=_skin+"../"+B}else{A=_skin+B}A+=".css";_curDoc.write('<link rel="stylesheet" type="text/css" href="'+A+'">')}}function getLayer(A){return _curDoc.getElementById(A)}function setLayerTransp(A,B){if(_ie){A.style.filter=(B==null)?"":"progid:DXImageTransform.Microsoft.Alpha( style=0,opacity="+B+")"}else{A.style.MozOpacity=(B==null)?1:B/100}}function getPos(B,A){A=A?A:null;for(var D=0,C=0;(B!=null)&&(B!=A);D+=B.offsetLeft,C+=B.offsetTop,B=B.offsetParent){}return{x:D,y:C}}function getPos2(B,A){var A=A?A:null;var D=0;var C=0;while(B.parentNode||B.offsetParent){if(B.offsetParent){D+=B.offsetLeft;C+=B.offsetTop;B=B.offsetParent}else{if(B.parentNode){if(B.style){if(B.style.left){D+=B.style.left}if(B.style.top){C+=B.style.top}}B=B.parentNode}else{break}}}if(A){relToCord=getPos2(A);D-=relToCord.x;C-=relToCord.y}return{x:D,y:C}}function getPosScrolled(C,B){B=B?B:null;if(_ie){for(var E=0,D=0;(C!=null)&&(C!=B);E+=C.offsetLeft-C.scrollLeft,D+=C.offsetTop-C.scrollTop,C=C.offsetParent){}}else{var A=C;for(var E=0,D=0;(C!=null)&&(C!=B);E+=C.offsetLeft,D+=C.offsetTop,C=C.offsetParent){}for(C=A;(C!=null)&&(C!=B);C=C.parentNode){if(C.scrollLeft!=null){E-=C.scrollLeft;D-=C.scrollTop}}}E+=getScrollX();D+=getScrollY();return{x:E,y:D}}function getWidget(B){if(B==null){return null}var A=B._widget;if(A!=null){return _widgets[A]}else{return getWidget(B.parentNode)}}function getWidgetFromID(B){if(B==null){return null}var A=getLayer(B);return getWidget(A)}function attr(A,B){return(B!=null?" "+A+'="'+B+'" ':"")}function sty(A,B){return(B!=null?A+":"+B+";":"")}function getSep(B,A){if(B==null){B=0}var C=B>0?'<td width="'+B+'">'+getSpace(B,1)+"</td>":"";return'<table style="margin-top:5px;margin-bottom:5px;" width="100%" cellspacing="0" cellpadding="0"><tr>'+C+'<td background="'+_skin+"sep"+(A?"_solid":"")+'.gif" class="smalltxt"><img alt="" src="'+_skin+'../transp.gif" width="10" height="2"></td>'+C+"</tr></table>"}function writeSep(B,A){_curDoc.write(getSep(B,A))}function getSpace(A,B){return'<table height="'+B+'" border="0" cellspacing="0" cellpadding="0"><tr><td>'+img(_skin+"../transp.gif",A,B)+"</td></tr></table>"}function writeSpace(A,B){_curDoc.write(getSpace(A,B))}function documentWidth(B){var B=B?B:_curWin;var A=Math.max(document.body.clientWidth,document.documentElement.clientWidth);A=Math.max(A,document.body.scrollWidth);return A}function documentHeight(B){var B=B?B:_curWin;var A=Math.max(document.body.clientHeight,document.documentElement.clientHeight);A=Math.max(A,document.body.scrollHeight);return A}function winWidth(B){var A;var B=B?B:_curWin;if(_ie){if(_isQuirksMode){A=B.document.body.clientWidth}else{A=B.document.documentElement.clientWidth}}else{A=B.innerWidth}return A}function winHeight(B){var B=B?B:_curWin;var A;if(_ie){if(_isQuirksMode){A=document.body.clientHeight}else{A=document.documentElement.clientHeight}}else{A=B.innerHeight}return A}function getScrollX(A){var B=0;var A=A?A:_curWin;if(typeof (A.scrollX)=="number"){B=A.scrollX}else{B=Math.max(A.document.body.scrollLeft,A.document.documentElement.scrollLeft)}return B}function getScrollY(B){var A=0;var B=B?B:_curWin;if(typeof (B.scrollY)=="number"){A=window.scrollY}else{A=Math.max(B.document.body.scrollTop,B.document.documentElement.scrollTop)}return A}function winScrollTo(A,C,B){B=B?B:_curWin;B.scrollTo(A,C)}function eventGetKey(B,A){A=A?A:_curWin;return _ie?A.event.keyCode:B.keyCode}function eventGetX(A){return _ie?_curWin.event.clientX:A.clientX?A.clientX:A.pageX}function eventGetY(A){return _ie?_curWin.event.clientY:A.clientY?A.clientY:A.pageY}function xpos(D,C,B,A){if((A==null)||(!_ie)){A=1}return((C.clientX/A)-getPos(D).x)+getScrollX()}function ypos(D,C,B,A){if((A==null)||(!_ie)){A=1}return((C.clientY/A)-getPos(D).y)+(_ie?B.body.scrollTop:0)}function absxpos(B,A){if((A==null)||(!_ie)){return B.clientX}else{return B.clientX/A}}function absypos(B,A){if((A==null)||(!_ie)){return B.clientY}else{return B.clientY/A}}function eventCancelBubble(C,B){B=B?B:_curWin;var A=_ie?B.event:C;if(A){A.cancelBubble=true;if(A.stopPropagation){A.stopPropagation()}}}function isHidden(B){if((B==null)||(B.tagName=="BODY")){return false}var A=B.style;if((A==null)||(A.visibility==_hide)||(A.display=="none")){return true}return isHidden(B.parentNode)}function opt(C,A,B){return'<option value="'+C+'" '+(B?"selected":"")+">"+convStr(""+A)+"</option>"}function lnk(C,D,A,F,B,E){if(D==null){D="return false"}B=B?B:"";return"<a"+attr("class",A)+attr("id",F)+attr("href","javascript:void(0)")+attr("onclick",D)+attr("ondblclick",E)+B+">"+C+"</a>"}_oldErrHandler=null;function localErrHandler(){return true}function canScanFrames(A){var B=true,D=null;if(_moz){_oldErrHandler=window.onerror;window.onerror=localErrHandler}try{D=A.document;B=false}catch(C){}if(_moz){window.onerror=_oldErrHandler}return(!B&&(D!=null))}function getBGIframe(A){return'<iframe id="'+A+'" name="'+A+'" style="display:none;left:0px;position:absolute;top:0px" src="'+_skin+'../../empty.html" frameBorder="0" scrolling="no"></iframe>'}function getDynamicBGIFrameLayer(){var A=false;if(_curWin.BGIFramePool){BGIFrames=_curWin.BGIFramePool.split(",");BGIFCount=BGIFrames.length;for(var B=0;B<BGIFCount;B++){if(BGIFrames[B]!="1"){A=true;break}}}else{B=0;BGIFrames=new Array}BGIFrames[B]="1";_curWin.BGIFramePool=BGIFrames.join(",");if(!A){targetApp(getBGIframe("BGIFramePool_"+B))}return getLayer("BGIFramePool_"+B)}function holdBGIFrame(B){var A=getLayer(B);if(A){A.style.display=""}id=parseInt(B.split("_")[1]);BGIFrames=_curWin.BGIFramePool.split(",");BGIFrames[id]=1;_curWin.BGIFramePool=BGIFrames.join(",")}function releaseBGIFrame(B){var A=getLayer(B);if(A){A.style.display="none"}id=parseInt(B.split("_")[1]);BGIFrames=_curWin.BGIFramePool.split(",");BGIFrames[id]=0;_curWin.BGIFramePool=BGIFrames.join(",")}function append(D,B,F){if(_ie){D.insertAdjacentHTML("BeforeEnd",B)}else{var A=F?F:_curDoc;var C=A.createRange();C.setStartBefore(D);var E=C.createContextualFragment(B);D.appendChild(E)}}function append2(D,B,F){if(_ie){D.insertAdjacentHTML("afterBegin",B)}else{var A=F?F:_curDoc;var C=A.createRange();C.setStartBefore(D);var E=C.createContextualFragment(B);D.appendChild(E)}}function insBefore(D,B,F){if(_ie){D.insertAdjacentHTML("BeforeBegin",B)}else{var A=F?F:_curDoc;var C=_curDoc.createRange();C.setEndBefore(D);var E=C.createContextualFragment(B);D.parentNode.insertBefore(E,D)}}function insBefore2(D,B,F){if(_ie){D.insertAdjacentHTML("BeforeBegin",B)}else{var A=F?F:_curDoc;var C=_curDoc.createRange();C.setStartBefore(D);var E=C.createContextualFragment(B);D.parentNode.insertBefore(E,D)}}function targetApp(A){append(_curDoc.body,A)}function preloadImg(B){var A=_preloadArr[_preloadArr.length]=new Image;A.src=B}_staticUnicBlockWhileWaitWidgetID="staticUnicBlockWhileWaitWidgetID";function hideBlockWhileWaitWidget(){var A=getLayer(_staticUnicBlockWhileWaitWidgetID);if(A){A.style.display="none"}}function newBlockWhileWaitWidget(A){if(window._BlockWhileWaitWidget!=null){return window._BlockWhileWaitWidget}var B=newWidget(_staticUnicBlockWhileWaitWidgetID);B.getPrivateHTML=BlockWhileWaitWidget_getPrivateHTML;B.init=BlockWhileWaitWidget_init;B.show=BlockWhileWaitWidget_show;window._BlockWhileWaitWidget=B;return B}function BlockWhileWaitWidget_init(){}function BlockWhileWaitWidget_getPrivateHTML(){return'<div id="'+this.id+'" onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0"  style="background-image:url('+_skin+'../transp.gif);z-index:5000;cursor:wait;position:absolute;top:0px;left:0px;width:100%;height:100%"></div>'}function BlockWhileWaitWidget_show(A){var B=this;if(B.layer==null){B.layer=getLayer(B.id);if(B.layer==null){targetApp(B.getPrivateHTML());B.layer=getLayer(B.id);B.css=B.layer.style}else{B.css=B.layer.style}}B.setDisplay(A)}function isTextInput(A){var B=_ie?A.srcElement:A.target;var C=false;if(B.tagName=="TEXTAREA"){C=true}if((B.tagName=="INPUT")&&((B.type.toLowerCase()=="text")||(B.type.toLowerCase()=="password"))){C=true}return C}function isTextArea(A){var B=_ie?A.srcElement:A.target;if(B.tagName=="TEXTAREA"){return true}else{return false}}function LZ(A){return(A<0||A>9?"":"0")+A}if(bobj.crv.config.isDebug){localErrHandler=null}initDom(bobj.crvUri("../dhtmllib/images/")+bobj.crv.config.skin+"/","",bobj.crv.config.lang);styleSheet();_allBOIcons=new Array;_allBOIconsMenus=new Array;_menuType_simple=0;_menuType_color=1;_menuType_border=2;function NewLabelWidget(D,C,A){var B=newWidget(D);B.text=C;B.convBlanks=A;B.getHTML=LabelWidget_getHTML;B.setDisabled=LabelWidget_setDisabled;B.dis=false;return B}function LabelWidget_setDisabled(A){var B=this;if(B.dis!=A){B.dis=A;if(B.layer){B.layer.className="iconText"+(A?"Dis":"")}}}function LabelWidget_getHTML(){var A=this;return'<div id="'+A.id+'" class="iconText'+(A.dis?"Dis":"")+'" style="white-space:nowrap;margin-right:4px;margin-left:4px;cursor:default">'+convStr(A.text,A.convBlanks)+"</div>"}function newIconWidget(C,B,M,I,F,H,G,N,K,A,L,J,E){var D=newWidget(C);D.src=B;D.clickCB=M;D.text=I;D.alt=F;D.isTabEnabled=J;D.ariaHasPopUp=E;D.width=null;D.txtAlign="left";D.border=4;D.txtNoPadding=false;D.allowDblClick=false;if(B){D.w=(H!=null)?H:16;D.h=(G!=null)?G:16;D.dx=(N!=null)?N:0;D.dy=(K!=null)?K:0;D.disDx=(A!=null)?A:0;D.disDy=(L!=null)?L:0}else{D.w=1;D.h=16}D.dis=false;D.disp=true;D.margin=1;D.extraHTML="";D.imgLayer=null;D.txtLayer=null;D.overCB="IconWidget_overCB";D.outCB="IconWidget_outCB";D.isDisplayed=IconWidget_isDisplayed;D.setDisplay=IconWidget_setDisplay;D.getHTML=IconWidget_getHTML;D.getTxtWidth=IconWidget_getTxtWidth;D.index=_allBOIcons.length++;D.nocheckClass="iconnocheck";D.hoverClass="iconhover";D.checkClass="iconcheck";D.checkhoverClass="iconcheckhover";D.currentClass=D.nocheckClass;D.currentHoverClass=D.hoverClass;D.setClasses=IconWidget_setClasses;D.internalUpCB=null;D.internalDownCB=IconWidget_internalDownCB;D.internalUpCB=IconWidget_internalUpCB;D.isHover=false;D.changeTooltip=IconWidget_changeTooltip;D.changeText=IconWidget_changeText;D.changeImg=IconWidget_changeImg;D.setDisabled=IconWidget_setDisabled;D.isDisabled=IconWidget_isDisabled;D.acceptClick=IconWidget_acceptClick;_allBOIcons[D.index]=D;D.outEnable=true;D.setCrs=IconWidget_setCrs;D.oldRes=D.resize;D.resize=IconWidget_resize;D.iconOldInit=D.init;D.init=IconWidget_init;return D}function newIconMenuWidget(C,B,O,K,F,J,G,P,L,A,N,E,I,H){var D=newWidget(C);if(typeof (H)=="undefined"){H=E?_menuType_color:_menuType_simple}D.menuItemType=E?_isColor:_isNotColor;var M=_openMenu.replace("{0}",(K?K:(F?F:"")));D.icon=newIconWidget("iconMenu_icon_"+C,B,IconMenuWidget_iconClickCB,K,F,J,G,P,L,A,N,false);D.arrow=newIconWidget("iconMenu_arrow_"+C,_skin+"menus.gif",IconMenuWidget_arrowClickCB,null,M,7,16,0,81,0,97,true);switch(H){case _menuType_color:D.menu=newMenuColorWidget("iconMenu_menu_"+C,IconMenuWidget_hideCB);break;case _menuType_border:D.menu=newMenuBordersWidget("iconMenu_menu_"+C,IconMenuWidget_hideCB,I,IconBordersMenuWidget_internalClickCB);break;default:case _menuType_simple:D.menu=newMenuWidget("iconMenu_menu_"+C,IconMenuWidget_hideCB,I);break}D.icon.par=D;D.arrow.par=D;D.menu.parIcon=D;D.icon.margin=0;D.arrow.margin=0;D.icon.overCB="IconWidget_none";D.icon.outCB="IconWidget_none";D.arrow.overCB="IconWidget_none";D.arrow.outCB="IconWidget_none";D.margin=1;D.spc=0;D.getHTML=IconMenuWidget_getHTML;D.clickCB=O;D.getMenu=IconMenuWidget_getMenu;D.menIcnOldInit=D.init;D.init=IconMenuWidget_init;D.removeAllMenuItems=IconMenuWidget_removeAllMenuItems;D.index=_allBOIconsMenus.length++;_allBOIconsMenus[D.index]=D;D.setDisabled=IconMenuWidget_setDisabled;D.isDisabled=IconMenuWidget_isDisabled;D.disableMenu=IconMenuWidget_disableMenu;D.changeText=IconMenuWidget_changeText;D.imwpResize=D.resize;D.resize=IconMenuWidget_resize;D.focus=IconMenuWidget_focus;D.changeArrowTooltip=IconMenuWidget_changeArrowTooltip;D.disp=true;D.isDisplayed=IconWidget_isDisplayed;D.setDisplay=IconWidget_setDisplay;return D}function IconMenuWidget_removeAllMenuItems(){this.menu.removeAll();this.menu.resetItemCount()}function IconMenuWidget_changeText(A){this.icon.changeText(A)}function IconMenuWidget_changeArrowTooltip(A){this.arrow.changeTooltip(A,false)}function IconMenuWidget_resize(A,B){var D=this;if(A!=null){A=Math.max(0,A-2*D.margin)}var C=D.layer.display!="none";if(C&_moz&&!_saf){D.setDisplay(false)}D.imwpResize(A,B);if(A!=null){D.icon.resize(Math.max(0,A-13-D.spc))}if(C&_moz&&!_saf){D.setDisplay(true)}}function IconMenuWidget_setDisabled(A){var B=this;if(A){if(B.menu.isShown()){B.menu.show(false)}IconMenuWidgetOutCB(B.index)}B.icon.setDisabled(A);B.arrow.setDisabled(A)}function IconMenuWidget_isDisabled(){return(this.icon.dis==true)}function IconMenuWidget_internalCB(){var C=this,A=null;if(C.id!=null){A=(C.menuItemType!=_isLastUsedColor)?C.id.slice(6):C.color}var B=C.par.parIcon;B.oldColor=B.curColor;B.curColor=A;if(B.curColor!=null){B.showSample()}if(B.clickColor){B.clickColor()}}function IconMenuWidget_focus(){var A=this;A.arrow.focus()}function IconMenuWidget_disableMenu(A){var B=this;B.arrow.setDisabled(A);B.menu.setDisabled(A)}function IconMenuWidget_getMenu(){return this.menu}function IconWidget_none(){}function IconMenuWidget_init(){var B=this;B.menIcnOldInit();B.icon.init();B.arrow.init();B.menu.init();var A=B.layer;A.onmouseover=IconMenuWidget_OverCB;A.onmouseout=IconMenuWidget_OutCB}function IconMenuWidget_getHTML(){var B=this,A=B.disp?"":"display:none;";return'<table id="'+B.id+'" cellspacing="0" cellpadding="0" border="0" style="'+A+"margin:"+B.margin+'px"><tr><td>'+B.icon.getHTML()+'</td><td style="padding-left:'+B.spc+'px" width="'+(13+B.spc)+'">'+B.arrow.getHTML()+"</td></table>"}function IconMenuWidget_OverCB(){IconMenuWidgetOverCB(getWidget(this).index);return true}function IconMenuWidget_OutCB(){IconMenuWidgetOutCB(getWidget(this).index)}function IconMenuWidgetOverCB(A){o=_allBOIconsMenus[A];IconWidget_overCB(o.icon.index);IconWidget_overCB(o.arrow.index)}function IconMenuWidgetOutCB(A){o=_allBOIconsMenus[A];if(!o.menu.isShown()){IconWidget_outCB(o.icon.index);IconWidget_outCB(o.arrow.index)}else{IconWidget_overCB(o.icon.index);IconWidget_overCB(o.arrow.index)}}function IconMenuWidget_iconClickCB(){var C=this.par;if(C.clickCB==null){var B=C.layer;var A=getPos2(B);C.menu.show(!C.menu.isShown(),A.x,A.y+C.getHeight()+1,null,null,C);IconMenuWidgetOverCB(C.index)}else{C.clickCB()}}function IconMenuWidget_arrowClickCB(){var C=this.par,B=C.layer;var A=getPos2(B);C.menu.show(!C.menu.isShown(),A.x,A.y+C.getHeight()+1,null,null,C);IconMenuWidgetOverCB(C.index)}function IconMenuWidget_hideCB(){var A=this.parIcon;if(A.arrow){A.arrow.focus()}IconMenuWidgetOutCB(A.index)}function newSingleIconMenuWidget(C,B,N,J,F,I,G,O,K,A,M,E,H){var L=_openMenu.replace("{0}",(J?J:(F?F:"")));var D=newIconWidget(C,B,SingleIconMenuWidget_clickCB,null,L,I,G,O,K,A,M,true);D.icon=newIconWidget("singleIconMenu_icon_"+C,B,null,J,null,I,G,O,K,A,M,false);D.arrow=newIconWidget("singleIcon_arrow_"+C,_skin+"menus.gif",SingleIconMenuWidget_iconClickCB,null,L,7,16,0,81,0,97,false);D.menu=newMenuWidget("singleIconMenu_menu_"+C,SingleIconMenuWidget_hideCB,H);D.icon.par=D;D.arrow.par=D;D.menu.parIcon=D;D.icon.margin=0;D.arrow.margin=0;D.icon.overCB="IconWidget_none";D.icon.outCB="IconWidget_none";D.arrow.overCB="IconWidget_none";D.arrow.outCB="IconWidget_none";D.margin=1;D.spc=0;D.getHTML=SingleIconMenuWidget_getHTML;D.getMenu=IconMenuWidget_getMenu;D.menIcnOldInit=D.init;D.init=SingleIconMenuWidget_init;D.removeAllMenuItems=IconMenuWidget_removeAllMenuItems;D.index=_allBOIconsMenus.length++;_allBOIconsMenus[D.index]=D;D.setDisabled=IconMenuWidget_setDisabled;D.isDisabled=IconMenuWidget_isDisabled;D.disableMenu=IconMenuWidget_disableMenu;D.changeText=IconMenuWidget_changeText;D.imwpResize=D.resize;D.resize=IconMenuWidget_resize;D.changeArrowTooltip=IconMenuWidget_changeArrowTooltip;D.disp=true;D.isDisplayed=IconWidget_isDisplayed;D.setDisplay=IconWidget_setDisplay;return D}function SingleIconMenuWidget_init(){var B=this;B.menIcnOldInit();B.menu.init();var A=B.layer;A.onmouseover=SingleIconMenuWidget_OverCB;A.onmouseout=SingleIconMenuWidget_OutCB}function SingleIconMenuWidget_getHTML(){var B=this,A=B.disp?"":"display:none;";return'<table id="'+B.id+'" cellspacing="0" cellpadding="0" border="0" style="'+A+"margin:"+B.margin+'px" role="button"><tr><td class="singleIconMenuL"></td><td class="singleIconMenuM">'+B.icon.getHTML()+'</td><td class="singleIconMenuM" style="padding-left:'+B.spc+'px" width="'+(13+B.spc)+'">'+B.arrow.getHTML()+'</td><td class="singleIconMenuR"></td></tr></table>'}function SingleIconMenuWidget_OverCB(){SingleIconMenuWidgetOverCB(getWidget(this).index);return true}function SingleIconMenuWidget_OutCB(){SingleIconMenuWidgetOutCB(getWidget(this).index)}function SingleIconMenuWidgetOverCB(A){o=_allBOIconsMenus[A];IconWidget_overCB(o.index)}function SingleIconMenuWidgetOutCB(A){o=_allBOIconsMenus[A];if(!o.menu.isShown()){IconWidget_outCB(o.index)}else{IconWidget_overCB(o.index)}}function SingleIconMenuWidget_clickCB(){var C=this,B=C.layer;var A=getPos2(B);C.menu.show(!C.menu.isShown(),A.x,A.y+C.getHeight()+1,null,null,C);SingleIconMenuWidgetOverCB(C.index)}function SingleIconMenuWidget_iconClickCB(){}function SingleIconMenuWidget_hideCB(){var A=this.parIcon;A.focus();SingleIconMenuWidgetOutCB(A.index)}function newIconCheckWidget(C,B,K,H,E,G,F,L,I,A,J){var D=newIconWidget(C,B,K,H,E,G,F,L,I,A,J);D.checked=false;D.internalUpCB=IconCheckWidget_internalUpCB;D.internalDownCB=IconCheckWidget_internalDownCB;D.check=IconCheckWidget_check;D.isChecked=IconCheckWidget_isChecked;D.oldInit=D.init;D.init=IconCheckWidget_init;D.isRadio=false;return D}function newPaletteContainerWidget(D,A,B){var C=newWidget(D);C.beginHTML=PaletteContainerWidget_beginHTML;C.endHTML=PaletteContainerWidget_endHTML;C.add=PaletteContainerWidget_add;C.palettes=new Array;C.contextMenu=A;C.margin=(B!=null)?B:4;return C}function newPaletteWidget(C,A){var B=newWidget(C);B.getHTML=PaletteWidget_getHTML;B.add=PaletteWidget_add;B.disableChildren=PaletteWidget_disableChildren;B.items=new Array;B.oldInit=B.init;B.init=PaletteWidget_init;B.beginRightZone=PaletteWidget_beginRightZone;B.height=A;B.rightZoneIndex=-1;B.sepCount=0;B.vertPadding=4;B.isLeftTableFixed=false;return B}function newPaletteVerticalSepWidget(B){var A=newWidget(B);A.getHTML=PaletteVerticalSepWidget_getHTML;A.isSeparator=true;return A}function PaletteVerticalSepWidget_getHTML(){return img(_skin+"iconsep.gif",6,22,null,' id="'+this.id+'" ')}function getPaletteSep(){return img(_skin+"iconsep.gif",6,22)}function IconRadioWidget_uncheckOthers(){var D=this.groupInstance,B=this.groupIdx,A=D.length;for(var C=0;C<A;C++){if(C!=B){var E=D[C];if(E){E.check(false)}}}}function PaletteWidget_beginRightZone(){this.rightZoneIndex=this.items.length}function PaletteSepWidget_getHTML(){return'<div style="background-image:url('+_skin+'sep.gif);height:2px;padding:0px;margin-top:0px;margin-bottom:0px;margin-left:4px;margin-right:4px">'+getSpace(1,2)+"</div>"}function PaletteContainerWidget_beginHTML(){var B=this;var A=B.contextMenu?('oncontextmenu="'+_codeWinName+'.PaletteContainerWidget_contextMenu(this,event);return false"'):"";return"<div "+A+'class="palette" style="overflow:hidden;margin:'+B.margin+'px;" id="'+B.id+'">'}_delayedMenu=null;function PaletteContainerWidget_contextMenu(B,A){if(_ie){A=_curWin.event}_delayedMenu=getWidget(B).contextMenu;setTimeout("_delayedMenu.par=null;_delayedMenu.show(true,"+absxpos(A)+","+absypos(A)+")",1)}function PaletteContainerWidget_endHTML(){return"</div>"}function PaletteContainerWidget_add(A){this.palettes[this.palettes.length]=A;return A}function PaletteWidget_getHTML(){var G=this,C=G.items,B=C.length,A=new Array;j=0;A[j++]='<table style="position:relative;overflow:hidden" id="'+G.id+'" '+attr("height",G.height)+' cellspacing="0" cellpadding="0" width="100%"><tbody><tr valign="middle">';A[j++]='<td width="100%" align="left" style="padding-left:'+G.vertPadding+'px;padding-right:4px"><table cellspacing="0" cellpadding="0"'+(G.isLeftTableFixed?'style="table-layout:fixed;width:100%"':"")+'><tbody><tr valign="middle">';var F=false;for(var D=0;D<B;D++){if(D==G.rightZoneIndex){A[j++]='</tr></tbody></table></td><td align="right" style="padding-right:'+G.vertPadding+'px"><table cellspacing="0" cellpadding="0"><tbody><tr valign="middle">';F=true}var E=C[D];A[j++]="<td>"+E.getHTML()+"</td>"}if(!F){A[j++]='</tr></tbody></table></td><td align="right" style="padding-right:4px"><table cellspacing="0" cellpadding="0"><tbody><tr valign="middle"><td></td>'}A[j++]="</tr></tbody></table></td></tr></tbody></table>";return A.join("")}function PaletteWidget_add(A){if(A==null){A=newPaletteVerticalSepWidget(this.id+"_palettesep_"+(this.sepCount++))}this.items[this.items.length]=A;return A}function PaletteWidget_disableChildren(B){var A=this.items;for(var C in A){var D=A[C];if(D&&(D.isSep!=true)){D.setDisabled(B)}}}function PaletteWidget_init(){this.oldInit();var A=this.items;for(var B in A){var C=A[B];if(C){C.init()}}}function IconWidget_isDisplayed(){return this.disp}function IconWidget_setDisplay(C){var B=this;if(B.css){var A=C?"block":"none";if(B.css.display!=A){B.css.display=A}}B.disp=C}function IconWidget_getTxtWidth(){var B=this,A=B.width;if(A!=null){A=A-(B.margin*2);A=A-(B.src?B.w+B.border:1);A=A-(B.txtNoPadding?0:((B.src?4:2)+2));if(_ie){A-=2}else{A-=2}return Math.max(0,A)}else{return -1}}function IconWidget_init(){var D=this,B=false;D.iconOldInit();var A=D.layer;A.tabIndex=D.dis?-1:0;A.title=(D.alt?D.alt:(D.text?D.text:""));if(D.clickCB){A.onclick=IconWidget_upCB;A.onmousedown=IconWidget_downCB;if(D.allowDblClick&&(_ie||_saf)){B=true;addDblClickCB(A,IconWidget_upCB)}A.onkeydown=IconWidget_keydownCB;A.onmouseover=IconWidget_realOverCB;A.onmouseout=IconWidget_realOutCB}if(!B){addDblClickCB(A,IconWidget_retFalse)}A.onselectstart=IconWidget_retFalse;var C=D.disp?"block":"none";if(D.css.display!=C){D.css.display=C}}function IconWidget_getHTML(){var E=this,B=E.src?'<div style="overflow:hidden;height:'+(E.h+E.border)+"px;width:"+(E.w+E.border)+"px;cursor:"+(E.clickCB?(!E.acceptClick()?"default":_hand):"default")+'">'+simpleImgOffset(E.src,E.w,E.h,E.dis?E.disDx:E.dx,E.dis?E.disDy:E.dy,"IconImg_"+E.id,null,E.alt,"margin:2px;")+E.extraHTML+"</div>":'<div class="iconText" style="width:1px;height:'+(E.h+E.border)+'px"></div>';var A='style="white-space:nowrap;',D=E.getTxtWidth();if(D>=0){A+="text-overflow:ellipsis;overflow:hidden;width:"+D+"px"}A+='"';var C=E.disp?"":"display:none;";return'<table style="'+C+"height:"+(E.h+E.border+(_moz?2:0))+"px;"+(E.width!=null?"width:"+E.width+"px;":"")+"margin:"+E.margin+'px" id="'+E.id+'"  class="'+E.nocheckClass+'" cellspacing="0" cellpadding="0" border="0" role="button" '+(E.ariaHasPopUp?'aria-haspopup="true"':"")+'><tr valign="middle"><td>'+((E.clickCB&&_ie)?lnk(B,null,null,null,' tabIndex="-1"'):B)+"</td>"+(E.text?'<td align="'+E.txtAlign+'" style="padding-left:'+(E.txtNoPadding?0:(E.src?4:2))+"px;padding-right:"+(E.txtNoPadding?0:2)+'px"><div id="IconImg_Txt_'+E.id+'" class="iconText'+(E.dis?"Dis":"")+'" '+A+">"+convStr(E.text)+"</div></td>":"")+"</tr></table>"}function IconWidget_realOutCB(){var o=getWidget(this);eval(o.outCB+"("+o.index+")")}function IconWidget_realOverCB(){var o=getWidget(this);eval(o.overCB+"("+o.index+")");return true}function IconWidget_retFalse(){return false}function IconWidget_resize(A,B){var D=this;if(D.layer){D.oldRes(A,B)}if(D.txtLayer==null){D.txtLayer=getLayer("IconImg_Txt_"+D.id)}if(A!=null){D.width=A;var C=D.getTxtWidth();if(D.txtLayer&&(C>=0)){D.txtLayer.style.width=""+C+"px"}}if(B!=null){D.h=B?(B-D.border):D.h;if(D.txtLayer&&(D.h>=0)){D.txtLayer.style.height=""+D.h+"px"}}}function IconWidget_changeTooltip(B,A){var C=this;if(B==null){return }if(!A){C.alt=B}if(C.layer){C.layer.title=B}if(C.imgLayer==null){C.imgLayer=getLayer("IconImg_"+this.id)}if(C.imgLayer){changeSimpleOffset(C.imgLayer,null,null,null,B)}}function IconWidget_changeText(A){var B=this;B.text=A;if(B.layer){if(B.txtLayer==null){B.txtLayer=getLayer("IconImg_Txt_"+B.id)}B.txtLayer.innerHTML=convStr(A)}}function IconWidget_changeImg(B,A,D){var C=this;if(D){C.src=D}if(B!=null){C.dx=B}if(A!=null){C.dy=A}if(C.layer&&(C.imgLayer==null)){C.imgLayer=getLayer("IconImg_"+this.id)}if(C.imgLayer){changeSimpleOffset(C.imgLayer,B,A,C.src)}}function IconWidget_internalDownCB(){if(!this.dis){this.currentHoverClass=this.checkhoverClass}}function IconWidget_internalUpCB(){if(!this.dis){this.currentHoverClass=this.hoverClass}}function IconWidget_setCrs(){var B=this,A=(B.clickCB?(!B.acceptClick()?"default":_hand):"default");B.css.cursor=A;if(B.src){if(B.imgLayer==null){B.imgLayer=getLayer("IconImg_"+B.id)}if(B.imgLayer){B.imgLayer.style.cursor=A}}}function IconWidget_downCB(){var A=getWidget(this);if((A.layer)&&(A.acceptClick())){A.internalDownCB();A.layer.className=A.currentHoverClass;if((A.par!=null&&A.par.menu==_globMenuCaptured)||(A!=null&&A.menu&&A.menu==_globMenuCaptured)){MenuWidget_releaseGlobMenuCaptured()}}if(_ie||_saf){return false}}function IconWidget_upCB(){var A=getWidget(this);if((A.layer)&&(A.acceptClick())){A.internalUpCB();A.layer.className=A.isHover?A.currentHoverClass:A.currentClass;A.setCrs();delayedClickCB(A.index)}}function IconWidget_keydownCB(A){if(eventGetKey(A)==13||eventGetKey(A)==32){var B=getWidget(this);if((B.layer)&&(B.acceptClick())){B.internalUpCB();B.layer.className=B.isHover?B.currentHoverClass:B.currentClass;B.setCrs();setTimeout("delayedClickCB("+B.index+")",1)}eventCancelBubble(A)}}function delayedClickCB(A){var B=_allBOIcons[A];if(B.beforeClickCB){B.beforeClickCB()}if(B.clickCB){B.clickCB()}}function IconWidget_overCB(A){var B=_allBOIcons[A];B.setCrs();if((B.layer)&&(!B.dis)&&!(B.par&&B.par.checked)){B.isHover=true;B.layer.className=B.currentHoverClass}}function IconWidget_outCB(A){var B=_allBOIcons[A];if((B.layer)&&(B.outEnable)&&!(B.par&&B.par.checked)){B.isHover=false;B.layer.className=B.currentClass}}function IconCheckWidget_init(){var A=this;A.oldInit();A.check(A.checked,true)}function IconCheckWidget_internalDownCB(){var A=this;if(A.acceptClick()){A.currentHoverClass=A.checked?A.hoverClass:A.checkhoverClass}}function IconCheckWidget_internalUpCB(){var A=this;if(A.acceptClick()){A.checked=A.isRadio?true:!A.checked;A.currentClass=A.checked?this.checkClass:this.nocheckClass;A.currentHoverClass=A.checked?this.checkhoverClass:this.hoverClass}}function IconCheckWidget_check(A,B){var C=this;if((C.checked!=A)||B){C.checked=A;if(C.layer){C.layer.className=C.currentClass=C.checked?this.checkClass:this.nocheckClass;C.currentHoverClass=C.checked?this.checkhoverClass:this.hoverClass}}if(C.checked&&C.beforeClickCB){if(C.layer){C.beforeClickCB()}}}function IconCheckWidget_isChecked(){return this.checked}function IconWidget_setClasses(B,A,C,D){var E=this;E.nocheckClass=B;E.checkClass=A;E.hoverClass=C;E.checkhoverClass=D;E.currentClass=E.nocheckClass;E.currentHoverClass=E.hoverClass}function IconWidget_setDisabled(A){var B=this;if(B.dis!=A){B.dis=A;if(B.layer){B.setCrs();if(B.src){if(B.imgLayer==null){B.imgLayer=getLayer("IconImg_"+this.id)}changeSimpleOffset(B.imgLayer,A?B.disDx:B.dx,A?B.disDy:B.dy)}if(B.text){if(B.txtLayer==null){B.txtLayer=getLayer("IconImg_Txt_"+B.id)}B.txtLayer.className="iconText"+(A?"Dis":"");if(A){B.layer.className=B.currentClass}}if(B.isTabEnabled){B.layer.tabIndex=B.dis?-1:0}}}}function IconWidget_isDisabled(){return this.dis?this.dis:false}function IconWidget_acceptClick(){var A=this;if(A.isDisabled()){return false}if(A.isRadio&&A.checked){return false}return true}function newCustomCombo(D,H,B,E,M,C,I,G,L,J,A,K){var F=newIconMenuWidget(D,C,null," ",M,I,G,L,J,A,K);F.icon.width=E!=null?Math.max(0,E-13):50-(2*F.margin);F.icon.setClasses("combonocheck","combocheck","combohover","combocheck");F.icon.clip;F.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");F.spc=0;F.margin=2;if(C==null){F.icon.h=12;F.arrow.h=12;F.arrow.dy+=2;F.arrow.disDy+=2}F.counter=0;F.changeCB=H;F.selectedItem=null;F.setOldDid=F.setDisabled;F.disabled=false;F.ccomboOldInit=F.init;F.init=CustomCombo_init;F.add=CustomCombo_add;F.addSeparator=CustomCombo_addSeparator;F.addMenuItem=CustomCombo_addMenuItem;F.select=CustomCombo_select;F.getSelection=CustomCombo_getSelection;F.valueShow=CustomCombo_valueShow;F.valueSelect=CustomCombo_valueSelect;F.setUndefined=CustomCombo_setUndefined;F.setDisabled=CustomCombo_setDisabled;F.getVisibleItemsCount=CustomCombo_getVisibleItemsCount;F.selectItem=CustomCombo_selectItem;F.getItemByIndex=CustomCombo_getItemByIndex;F.getItemIndex=CustomCombo_getItemIndex;F.setItemDisabled=CustomCombo_setItemDisabled;return F}function CustomCombo_init(){var B=this;B.ccomboOldInit();if(B.disabled){B.icon.changeTooltip(B.icon.alt?B.icon.alt:"",true)}var A=_openMenu.replace("{0}",(B.icon.alt?B.icon.alt:""));B.arrow.changeTooltip(A)}function CustomCombo_add(B,E,A){var D=this;var C=D.menu.addCheck(D.id+"_it_"+(D.counter++),B,CustomCombo_internalCB);C.val=""+E;C.parCombo=D;C.isComboVal=true;if((D.selectedItem==null)||A){D.selectItem(C)}}function CustomCombo_addSeparator(){this.menu.addSeparator()}function CustomCombo_addMenuItem(B,F,C,E,I,G,D,A,H){this.menu.add(B,F,C,E,I,G,D,A,H)}function CustomCombo_internalCB(){var A=this,B=A.parCombo;B.selectItem(A);if(B.changeCB){B.changeCB()}}function CustomCombo_getItemByIndex(A){var B=this.menu.items;return((A>=0)&&(A<B.length))?B[A]:null}function CustomCombo_getItemIndex(F){var B=this.menu.items,A=B.length,C=0;for(var D=0;D<A;D++){var E=B[D];if(E.isComboVal){if(E.id==F.id){return C}C++}}return -1}function CustomCombo_selectItem(A){var B=this;if(B.selectedItem){B.selectedItem.check(false)}if(A){B.val=A.val;B.icon.changeText(B.disabled?"":A.text);B.selectedItem=A;A.check(true);if(B.disabled){B.icon.changeTooltip(B.icon.alt?B.icon.alt:"",true)}else{B.icon.changeTooltip(B.icon.alt?(B.icon.alt+" ("+A.text)+")":(A.text),true)}}else{B.val=null;B.icon.changeText("");B.icon.changeTooltip(B.icon.alt?B.icon.alt:"",true);B.selectedItem=null}}function CustomCombo_setDisabled(B){var A=this;if(A.selectedItem){A.icon.changeText(B?"":A.selectedItem.text)}A.disabled=B;A.setOldDid(B);if(B){A.icon.changeTooltip(A.icon.alt?A.icon.alt:"",true)}}function CustomCombo_select(A){var C=this,B=C.getItemByIndex(A);if(B){C.selectItem(B)}}function CustomCombo_setItemDisabled(A,B){var D=this,C=D.getItemByIndex(A);if(C){C.setDisabled(B)}}function CustomCombo_getSelection(){var B=this,A=B.selectedItem;if(A){return{index:B.getItemIndex(A),value:A.val}}else{return null}}function CustomCombo_valueSelect(C){C=""+C;var F=this,B=F.menu.items,A=B.length;for(var D=0;D<A;D++){var E=B[D];if((E.isComboVal)&&(E.val==C)&&(E.isShown)){F.selectItem(E);return true}}return false}function CustomCombo_valueShow(D,B){D=""+D;var G=this,C=G.menu.items,A=C.length;for(var E=0;E<A;E++){var F=C[E];if((F.isComboVal)&&(F.val==D)){F.show(B);return }}}function CustomCombo_setUndefined(A){var B=this;if(A){B.selectItem(null)}}function CustomCombo_getVisibleItemsCount(){var E=this,B=E.menu.items,A=B.length,F=0;for(var C=0;C<A;C++){var D=B[C];if((D.isComboVal)&&(D.isShown)){F++}}return F}function newComboTextFieldWidget(C,G,J,F,I,B,K,D,A,H){var E=newTextFieldWidget(C,G,J,F,I,B,K,D,A,H);E.par=null;E.oldInit=E.init;E.init=ComboTextFieldWidget_init;E.setContentEditable=ComboTextFieldWidget_setContentEditable;E.isContentEditable=ComboTextFieldWidget_isContentEditable;E.getHTML=ComboTextFieldWidget_getHTML;E.oldSetDisabled=E.setDisabled;E.setDisabled=ComboTextFieldWidget_setDisabled;return E}function ComboTextFieldWidget_init(){var B=this;B.oldInit();var A=B.layer;if(A!=null){B.setContentEditable(true);A.onclick=ComboTextFieldWidget_onClick}}function ComboTextFieldWidget_setContentEditable(C){var B=this,A=B.layer;B.contentEditable=C;if(A){if(_moz){A.readOnly=!C}else{A.contentEditable=C}A.style.cursor=C?"text":_hand;A.className=C?"comboEditable":"combo"}}function ComboTextFieldWidget_isContentEditable(){var A=this;return A.contentEditable}function ComboTextFieldWidget_onClick(){var A=getWidget(this);if(A.contentEditable){return }if(A.par!=null){A.par.clickCB()}}function ComboTextFieldWidget_getHTML(){var A=this;return"<input"+(A.disabled?" disabled":"")+' oncontextmenu="event.cancelBubble=true;return true" style="'+sty("width",this.width)+(_moz?"margin-top:1px;margin-bottom:1px;padding-left:5px;padding-right:2px;":"")+(_isQuirksMode?"height:20px;":"height:16px;")+"margin-left:"+(this.noMargin?0:10)+'px" onfocus="'+_codeWinName+'.TextFieldWidget_focus(this)" onblur="'+_codeWinName+'.TextFieldWidget_blur(this)" onchange="'+_codeWinName+'.TextFieldWidget_changeCB(event,this)" onkeydown=" return '+_codeWinName+'.TextFieldWidget_keyDownCB(event,this);" onkeyup=" return '+_codeWinName+'.TextFieldWidget_keyUpCB(event,this);" onkeypress=" return '+_codeWinName+'.TextFieldWidget_keyPressCB(event,this);" type="text" '+attr("maxLength",this.maxChar)+' ondragstart="event.cancelBubble=true;return true" onselectstart="event.cancelBubble=true;return true" class="combo" id="'+this.id+'" name="'+this.id+'"'+attr("title",this.tooltip)+' value="">'}function ComboTextFieldWidget_setDisabled(B){var A=this;A.oldSetDisabled(B)}function newTextComboWidget(A,H,J,G,E,B,F,I){var C=newWidget(A);C.text=newComboTextFieldWidget((I?I:"text_"+A),TextComboWidget_checkCB,H,null,TextComboWidget_enterCB,true,J,G-13);var D=_openMenu.replace("{0}",(J?J:""));C.arrow=newIconWidget("arrow_"+A,_skin+"menus.gif",TextComboWidget_arrowClickCB,null,D,7,16,0,81,0,97,true,true);C.menu=newMenuWidget("menu_"+A,TextComboWidget_hideCB,F);C.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");C.text.par=C;C.arrow.par=C;C.menu.parIcon=C;C.arrow.margin=0;C.arrow.overCB="IconWidget_none";C.arrow.outCB="IconWidget_none";C.margin=0;C.spc=0;C.counter=0;C.arrow.h=12;C.arrow.dy+=2;C.arrow.disDy+=2;C.index=_allBOIconsMenus.length++;_allBOIconsMenus[C.index]=C;C.menIcnOldInit=C.init;C.init=TextComboWidget_init;C.imwpResize=C.resize;C.resize=TextComboWidget_resize;C.getHTML=TextComboWidget_getHTML;C.setDisabled=TextComboWidget_setDisabled;C.isDisabled=TextComboWidget_isDisabled;C.add=TextComboWidget_add;C.addSeparator=TextComboWidget_addSeparator;C.addMenuItem=TextComboWidget_addMenuItem;C.select=TextComboWidget_select;C.getSelection=TextComboWidget_getSelection;C.valueShow=TextComboWidget_valueShow;C.valueSelect=TextComboWidget_valueSelect;C.setUndefined=TextComboWidget_setUndefined;C.setContentEditable=TextComboWidget_setContentEditable;C.isContentEditable=TextComboWidget_isContentEditable;C.changeCB=E;C.checkCB=B;C.clickCB=TextComboWidget_clickCB;C.selectItem=TextComboWidget_selectItem;C.getItemByIndex=TextComboWidget_getItemByIndex;C.getItemIndex=TextComboWidget_getItemIndex;C.setItemDisabled=TextComboWidget_setItemDisabled;C.text.enterCancelBubble=false;return C}function TextComboWidget_init(){var B=this;B.menIcnOldInit();B.text.init();B.arrow.init();B.menu.init();var A=B.layer;A.onmouseover=TextCombo_OverCB;A.onmouseout=TextCombo_OutCB}function TextComboWidget_getHTML(){var B=this,A="";A+='<table id="'+B.id+'" cellspacing="0" cellpadding="0" border="0" style="cursor:default;margin:'+B.margin+'px"><tbody><tr>';A+="<td>"+B.text.getHTML()+"</td>";A+='<td style="padding-left:'+B.spc+'px" width="'+(13+B.spc)+'">'+B.arrow.getHTML()+"</td>";A+="</tr></tbody></table>";return A}function TextComboWidget_resize(A,B){var D=this;if(A!=null){A=Math.max(0,A-2*D.margin)}var C=D.layer.display!="none";if(C&_moz&&!_saf){D.setDisplay(false)}D.imwpResize(A,B);if(C&_moz&&!_saf){D.setDisplay(true)}}function TextComboWidget_add(B,E,A){var D=this;var C=D.menu.addCheck(D.id+"_it_"+(D.counter++),B,TextComboWidget_internalCB);C.val=""+E;C.parCombo=D;C.isComboVal=true;if((D.selectedItem==null)||A){D.selectItem(C)}}function TextComboWidget_addSeparator(){this.menu.addSeparator()}function TextComboWidget_addMenuItem(B,F,C,E,I,G,D,A,H){this.menu.add(B,F,C,E,I,G,D,A,H)}function TextComboWidget_setDisabled(B){var A=this;A.text.setDisabled(B);A.arrow.setDisabled(B);A.menu.setDisabled(B);A.disabled=B}function TextComboWidget_isDisabled(){var A=this;return A.disabled}function TextComboWidget_select(A){var C=this,B=C.getItemByIndex(A);if(B){C.selectItem(B)}}function TextComboWidget_setItemDisabled(A,B){var D=this,C=D.getItemByIndex(A);if(C){C.setDisabled(B)}}function TextComboWidget_getSelection(){var C=this,B=C.selectedItem;var A=C.text.getValue();if(B){return{index:C.getItemIndex(B),value:B.val}}else{return{index:-1,value:A}}}function TextComboWidget_valueSelect(C){C=""+C;var F=this,B=F.menu.items,A=B.length;for(var D=0;D<A;D++){var E=B[D];if((E.isComboVal)&&(E.val==C)){F.selectItem(E);return }}F.text.setValue(C)}function TextComboWidget_valueShow(D,B){D=""+D;var G=this,C=G.menu.items,A=C.length;for(var E=0;E<A;E++){var F=C[E];if((F.isComboVal)&&(F.val==D)){F.show(B);return }}G.text.setValue(D);G.text.show(B)}function TextComboWidget_setUndefined(A){var B=this;if(A){B.selectItem(null)}}function TextComboWidget_setContentEditable(B){var A=this;A.text.setContentEditable(B)}function TextComboWidget_isContentEditable(){var A=this;return A.text.isContentEditable()}function TextComboWidget_selectItem(A){var B=this;if(B.selectedItem){B.selectedItem.check(false)}if(A){B.val=A.val;B.text.setValue(A.text);B.selectedItem=A;A.check(true)}else{B.val=null;B.text.setValue("");B.selectedItem=null}}function TextComboWidget_getItemByIndex(A){var B=this.menu.items;return((A>=0)&&(A<B.length))?B[A]:null}function TextComboWidget_getItemIndex(F){var B=this.menu.items,A=B.length,C=0;for(var D=0;D<A;D++){var E=B[D];if(E.isComboVal){if(E.id==F.id){return C}C++}}return -1}function TextComboWidget_changeCB(){var B=this.par;var A=true;if(B.checkCB){A=B.checkCB()}if(!A){return }if(B.changeCB){B.changeCB()}}function TextComboWidget_enterCB(){var B=this.par;if(B.selectedItem){B.selectedItem.check(false);B.selectedItem=null}var A=true;if(B.checkCB){A=B.checkCB()}if(!A){return }if(B.changeCB){B.changeCB()}}function TextComboWidget_checkCB(){var A=this.par;if(A.checkCB){A.checkCB()}}function TextComboWidget_hideCB(){var A=this.parIcon;if(A.arrow){A.arrow.focus()}TextComboOutCB(A.index)}function TextComboWidget_arrowClickCB(){this.par.clickCB()}function TextComboWidget_clickCB(){var B=this,A=B.layer;B.menu.show(!B.menu.isShown(),getPosScrolled(A).x,getPosScrolled(A).y+B.getHeight()+1,null,null,B);TextComboOverCB(B.index)}function TextCombo_OverCB(){TextComboOverCB(getWidget(this).index);return true}function TextComboOverCB(A){var B=_allBOIconsMenus[A];IconWidget_overCB(B.arrow.index)}function TextCombo_OutCB(A){TextComboOutCB(getWidget(this).index)}function TextComboOutCB(A){var B=_allBOIconsMenus[A];if(!B.menu.isShown()){IconWidget_outCB(B.arrow.index)}else{IconWidget_overCB(B.arrow.index)}}function TextComboWidget_internalCB(){var A=this,B=A.parCombo;B.selectItem(A);if(B.changeCB){B.changeCB()}}function TextComboWidget_keyUpCB(){}_menusZIndex=2000;_menusItems=new Array;_globMenuCaptured=null;_isColor=0;_isLastUsedColor=1;_isNotColor=2;_currentFocus=null;_mitemH=22;function newMenuWidget(D,A,C){var B=newWidget(D);B.items=new Array;B.par=null;B.container=null;B.currentSub=-1;B.nextSub=-1;B.zIndex=_menusZIndex;B.hideCB=A;B.beforeShowCB=C;B.accelEnabled=true;B.init=MenuWidget_init;B.justInTimeInit=MenuWidget_justInTimeInit;B.getHTML=MenuWidget_getHTML;B.show=MenuWidget_show;B.setAccelEnabled=MenuWidget_setAccelEnabled;B.isAccelEnabled=MenuWidget_isAccelEnabled;B.internalAdd=B.add=MenuWidget_add;B.addCheck=MenuWidget_addCheck;B.addSeparator=MenuWidget_addSeparator;B.insert=MenuWidget_insert;B.insertCheck=MenuWidget_insertCheck;B.insertSeparator=MenuWidget_insertSeparator;B.getItem=MenuWidget_getItem;B.getItemByID=MenuWidget_getItemByID;B.isShown=MenuWidget_isShown;B.remove=MenuWidget_remove;B.removeAll=MenuWidget_removeAll;B.removeByID=MenuWidget_removeByID;B.resetItemCount=MenuWidget_resetItemCount;B.resetTooltips=MenuWidget_resetTooltips;B.showSub=MenuWidget_showSub;B.captureClicks=MenuWidget_captureClicks;B.releaseClicks=MenuWidget_releaseClicks;B.focus=MenuWidget_focus;B.restoreFocus=MenuWidget_restoreFocus;B.hasVisibleItem=MenuWidget_hasVisibleItem;B.updateIndex=MenuWidget_updateIndex;B.getTotalNumItems=MenuWidget_getTotalNumItems;B.clickCB=new Array;B.clickCBDocs=new Array;B.write=MenuWidget_write;B.alignLeft=false;B.sepCount=0;B.itemCount=0;return B}function MenuWidget_captureClicks(C){var F=this;if(F.par==null){if(C==null){_globMenuCaptured=F;F.clickCB.length=0;F.clickCBDocs.length=0;C=_curWin}if(canScanFrames(C)){if(_moz){_oldErrHandler=window.onerror;window.onerror=localErrHandler}try{d=C.document;F.clickCB[F.clickCB.length]=d.onmousedown;F.clickCBDocs[F.clickCBDocs.length]=d;d.onmousedown=MenuWidget_globalClick;var B=C.frames,A=B.length;for(var D=0;D<A;D++){F.captureClicks(B[D])}}catch(E){}if(_moz){window.onerror=_oldErrHandler}}}}function MenuWidget_releaseClicks(){var D=this;if(D.par==null){var A=D.clickCB.length;for(var B=0;B<A;B++){try{D.clickCBDocs[B].onmousedown=D.clickCB[B]}catch(C){}D.clickCB[B]=null;D.clickCBDocs[B]=null}D.clickCB.length=0;D.clickCBDocs.length=0}}_menuItem=null;function MenuWidget_focus(){var D=this,B=D.items,A=B.length;for(var C=0;C<A;C++){if(B[C].isShown&&!B[C].isSeparator){_menuItem=B[C];setTimeout("_menuItem.focus()",1);if(D.endLink){D.endLink.show(true)}if(D.startLink){D.startLink.show(true)}break}}}function MenuWidget_keepFocus(B){var A=getWidget(getLayer(B));if(A){A.focus()}}function MenuWidget_restoreFocus(){var A=this;if(A.endLink){A.endLink.show(false)}if(A.startLink){A.startLink.show(false)}if(A.parIcon){A.parIcon.focus()}else{if(A.par){A.par.focus()}else{if(A.parCalendar){A.parCalendar.focus()}}}}function MenuWidget_keyDown(D,B){var C=getWidget(getLayer(D));var A=eventGetKey(B);if(A==27&&C){C.restoreFocus();C.show(false);if(C.par&&C.par.par){C.par.par.currentSub=-1}C.currentSub=-1;eventCancelBubble(B)}else{if(C&&(A==109||A==37)){if(C.par&&C.par.par){C.restoreFocus();C.show(false);C.par.par.currentSub=-1;C.currentSub=-1}}else{if(A==13){eventCancelBubble(B)}}}}function MenuWidget_releaseGlobMenuCaptured(){var A=_globMenuCaptured;if(A!=null){A.releaseClicks();_globMenuCaptured=null}}function MenuWidget_globalClick(){var A=_globMenuCaptured;if(A!=null){MenuWidget_releaseGlobMenuCaptured();A.show(false)}}function MenuWidget_add(B,K,D,J,N,L,E,A,M,G){var C=this,F=C.items.length,H=null;if(B.substr(0,9)!="_menusep_"){C.itemCount++;H=C.itemCount}var I=C.items[F]=newMenuItem(C,B,K,D,H,J,N,L,E,A,M,false,G);I.menuIndex=F;I.dynHTML();return I}function MenuWidget_addCheck(B,K,D,J,N,L,E,A,M,G){var C=this,F=C.items.length,H=null;if(B.substr(0,9)!="_menusep_"){C.itemCount++;H=C.itemCount}var I=C.items[F]=newMenuItem(C,B,K,D,H,J,N,L,E,A,M,true,G);I.menuIndex=F;I.dynHTML();return I}function MenuWidget_addSeparator(){var A=this.internalAdd("_menusep_"+(this.sepCount++));A.isSeparator=true;return A}function MenuWidget_insert(I,B,K,D,J,O,M,E,A,N,G){var C=this,F=C.items.length,H=null;if(B.substr(0,9)!="_menusep_"){C.itemCount++;H=C.itemCount}var L=newMenuItem(C,B,K,D,H,J,O,M,E,A,N,false,G);arrayAdd(C,"items",L,I);C.updateIndex();L.dynHTML();return L}function MenuWidget_insertCheck(I,B,K,D,J,O,M,E,A,N,G){var C=this,F=C.items.length,H=null;if(B.substr(0,9)!="_menusep_"){C.itemCount++;H=C.itemCount}var L=newMenuItem(C,B,K,D,H,J,O,M,E,A,N,true,G);arrayAdd(C,"items",L,I);C.updateIndex();L.dynHTML();return L}function MenuWidget_insertSeparator(A){var B=newMenuItem(this,"_menusep_"+(this.sepCount++));B.isSeparator=true;arrayAdd(this,"items",B,A);this.updateIndex();B.dynHTML();return B}function MenuWidget_init(){}function MenuWidget_getItem(B){var C=this,A=C.items;if((B>=0)&&(B<A.length)){return A[B]}return null}function MenuWidget_getItemByID(D){var C=this,A=C.items;for(var B in A){if(A[B].id==D){return A[B]}}return null}function MenuWidget_removeByID(D){var C=this;var B=C.getItemByID(D);if(B){arrayRemove(C,"items",B.menuIndex);C.updateIndex();if(C.layer==null){return }var A=C.layer.childNodes[0];A.deleteRow(B.menuIndex)}}function MenuWidget_removeAll(){this.remove()}function MenuWidget_remove(B){var C=this;if(B!=null){arrayRemove(C,"items",B);C.updateIndex()}else{C.items.length=0}if(C.layer==null){return }var A=C.layer.childNodes[0];if(B!=null){A.deleteRow(B)}else{while(A.firstChild){A.removeChild(A.firstChild)}}}function MenuWidget_updateIndex(){var B=this.items,A=B.length;for(var C=0;C<A;C++){B[C].menuIndex=C}}function MenuWidget_showSub(){var B=this;if(B.nextSub!=-1){if(B.nextSub!=B.currentSub){var H=B.items[B.currentSub];if(H&&H.sub){H.sub.show(false);B.currentSub=-1}var A=B.items[B.nextSub];if(A&&A.sub){var D=A.layer;var F=parseInt(B.css.left);var E=parseInt(B.css.top);for(var C=0;C<B.nextSub;C++){var I=B.items[C];if(I.isShown){if((I.icon!=null)||(I.text!=null)){E+=_mitemH}else{E+=3}}}var G=B.getWidth();F=F+G-4;A.attachSubMenu(A.sub);A.sub.show(true,F,E,false,G);B.currentSub=B.nextSub}}}else{if(B.currentSub!=-1){var H=B.items[B.currentSub];if(H&&H.sub){H.sub.show(false);B.currentSub=-1}}}}function MenuWidget_write(){}function MenuWidget_justInTimeInit(){var C=this;C.layer=getLayer(C.id);if(C.layer==null){targetApp(C.getHTML());C.layer=getLayer(C.id)}C.layer._widget=C.widx;C.css=C.layer.style;C.endLink=newWidget("endLink_"+C.id);C.endLink.init();C.startLink=newWidget("startLink_"+C.id);C.startLink.init();var A=C.items;for(var B in A){A[B].init()}}function MenuWidget_getHTML(){var F=this,C=F.items;var A=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+F.id+"',event);return true\" ";var E='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="startLink_'+F.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+F.id+'\');return false;" ></a><table style="display:none;" class="menuFrame" id="'+F.id+'" cellspacing="0" cellpadding="0" border="0" '+A+' dir="ltr" role="menu"><tbody><tr><td><table cellspacing="0" cellpadding="0" border="0"><tbody>';for(var D=0,B=C.length;D<B;D++){C[D].needsRightPart=F.accelEnabled;E+=C[D].getHTML()}E+='</tbody></td></tr></tbody></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="endLink_'+F.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+F.id+"');return false;\" ></a>";return E}function MenuWidget_show(L,J,H,E,C,I){var B=this;if(B.layer==null){B.justInTimeInit()}var F=B.css;if(L){B.iframeLyr=getDynamicBGIFrameLayer();B.iframeCss=B.iframeLyr.style;if(B.beforeShowCB){B.beforeShowCB()}if(!B.hasVisibleItem()){return }B.captureClicks();F.display="block";F.zIndex=(B.zIndex+1);F.visibility="hidden";F.left="-1000px";F.top="-1000px";var K=B.getWidth();var D=B.getHeight();if(B.alignLeft){J-=K}if(I){var M=I.getWidth();if(M>K){J=J+M-K}}var A=J+K+4,G=H+D+4;if(A-getScrollX()>winWidth()){if(I){J=Math.max(0,winWidth()-K)}else{J=Math.max(0,J-4-(K+((C!=null)?C-12:0)))}}if(G-getScrollY()>winHeight()){H=Math.max(0,H-4-D+(C!=null?30:0))}F.left=""+J+"px";F.top=""+H+"px";F.visibility="visible";iCss=B.iframeCss;iCss.left=""+J+"px";iCss.top=""+H+"px";iCss.width=""+K+"px";iCss.height=""+D+"px";iCss.zIndex=B.zIndex-1;iCss.display="block";if(_ie){H-=2;J-=2}B.nextSub=-1;B.showSub();B.focus()}else{if(E&&B.par&&B.par.par){B.par.par.show(L,J,H,E)}if(B.iframeLyr){releaseBGIFrame(B.iframeLyr.id)}F.display="none";if(B.iframeCss){B.iframeCss.display="none"}B.nextSub=-1;B.showSub();if(B.hideCB){B.hideCB()}B.releaseClicks()}}function MenuWidget_setAccelEnabled(A){var B=this;B.accelEnabled=A}function MenuWidget_isAccelEnabled(A){var B=this;return B.accelEnabled}function MenuWidget_isShown(){var A=this;if(A.layer==null){return false}else{return(A.css.display=="block")}}function MenuWidget_hasVisibleItem(){var D=this;if(D.isMenuColor||D.isCalendar){return true}var A=D.items;for(var B in A){var C=A[B];if(C&&!(C.isSeparator==true)&&C.isShown){return true}}return false}function MenuWidget_getTotalNumItems(){var B=this,A=B.items;return A.length-B.sepCount}function MenuWidget_resetItemCount(){var A=this;A.itemCount=0}function MenuWidget_resetTooltips(){var A=this;A.resetItemCount();len=A.items.length;for(i=0;i<len;i++){A.items[i].updateTooltip()}}function newMenuItem(I,C,K,E,H,J,N,L,F,B,M,A,G){var D=new Object;D.par=I;D.id=C;D.text=K;D.cb=E;D.itemNo=H;D.icon=J;D.dx=(N==null)?0:N;D.dy=(L==null)?0:L;D.disDx=(B==null)?D.dx:B;D.disDy=(M==null)?D.dy:M;D.sub=null;D.layer=null;D.iconTDLayer=null;D.iconLayer=null;D.textLayer=null;D.textOnlyLayer=null;D.accel=null;D.accelLayer=null;D.hasNoLayer=false;D.isSeparator=false;D.disabled=(F!=null)?F:false;D.isShown=true;D.alt=G;D.needsRightPart=true;D.index=_menusItems.length;_menusItems[D.index]=D;D.menuIndex=-1;D.isCheck=A;D.checked=false;D.menuItemType=_isNotColor;D.init=MenuItem_init;D.leftZoneClass="menuLeftPart";D.leftZoneSelClass="menuLeftPartSel";D.totalNumItems=null;D.attachSubMenu=MenuItem_attachSubMenu;D.getHTML=MenuItem_getHTML;D.getHTMLPart=MenuItem_getHTMLPart;D.dynHTML=MenuItem_dynHTML;D.setDisabled=MenuItem_setDisabled;D.check=MenuItem_check;D.isChecked=MenuItem_isChecked;D.show=MenuItem_show;D.setText=MenuItem_setText;D.setIcon=MenuItem_setIcon;D.setAccelerator=MenuItem_setAccelerator;D.focus=MenuItem_focus;D.setTextClass=MenuItem_setTextClass;D.updateTooltip=MenuItem_updateTooltip;return D}function MenuItem_setTextClass(A){var B=this;if(B.textOnlyLayer){B.textOnlyLayer.className=A}}function MenuItem_init(){if(!this.hasNoLayer){var A=this,B=A.par.id;A.layer=getLayer(B+"_item_"+A.id);A.layer._boIndex=A.index;if(!A.isSeparator){if((A.icon!=null)||(A.isCheck)){A.iconLayer=getLayer(B+"_item_icon_"+A.id);A.iconTDLayer=getLayer(B+"_item_td_"+A.id)}A.textLayer=getLayer(B+"_text_"+A.id);A.textOnlyLayer=getLayer(B+"_span_text_"+A.id);A.hiddenLabelLayer=getLayer(B+"_hiddenLabel_"+A.id);A.accelLayer=getLayer(B+"_accel_"+A.id);if(!A.isCheck){A.updateTooltip()}}if(A.isCheck){A.check(A.checked,true)}}}function MenuItem_attachSubMenu(C){var B=this;B.sub=C;C.par=B;C.zIndex=B.par.zIndex+2;if(B.layer){if(B.arrowLayer==null){B.arrowLayer=getLayer(B.par.id+"_item_arrow_"+B.id)}var A=B.disabled;changeSimpleOffset(B.arrowLayer,A?7:0,A?81:64)}return C}function MenuItem_check(A,C){var D=this;if((D.checked!=A)||C){D.checked=A;if(D.par.layer){var B=D.layer;if(B){if(D.icon==null){changeSimpleOffset(D.iconLayer,0,(D.checked?48:0),null,(D.checked?_menuCheckLab:""))}changeOffset(D.iconTDLayer,0,(D.checked?0:0));if(D.checkFrame==null){D.checkFrame=getLayer(D.par.id+"_item_check_"+D.id)}D.checkFrame.className="menuIcon"+(D.checked?"Check":"");D.updateTooltip()}}}}function MenuItem_setDisabled(A){var C=this;if(C.disabled!=A){C.disabled=A;if(C.par.layer){var B=C.layer;if(B){B.style.cursor=A?"default":_hand;if(C.icon){changeSimpleOffset(C.iconLayer,A?C.disDx:C.dx,A?C.disDy:C.dy)}var D="menuTextPart"+(C.disabled?"Disabled":"");if(D!=C.textLayer.className){C.textLayer.className=D}if(C.accel&&(D!=C.accelLayer.className)){C.accelLayer.className=D}if(C.sub){if(C.arrowLayer==null){C.arrowLayer=getLayer(C.par.id+"_item_arrow_"+C.id)}changeSimpleOffset(C.arrowLayer,A?7:0,A?81:64)}C.updateTooltip()}}}}function _mii(E,F){var H=E.childNodes,I=0,G=H.length,J=E._boIndex;var B=_menusItems[J];if(B.disabled){F=0}else{if(F){B.par.nextSub=B.menuIndex;MenuItem_callShowSub(J,true);if(B.par.par){if(B.par.par.par){B.par.par.par.nextSub=B.par.par.menuIndex}}}}var C=0;for(var D=0;D<G;D++){var A=H[D];if(A.tagName!=null){if(C==0){A.className=F?B.leftZoneSelClass:B.leftZoneClass}else{if(C==1){A.className="menuTextPart"+(F?"Sel":"")+(B.disabled?"Disabled":"")}else{if(B.accel&&(C==2)){A.className="menuTextPart"+(F?"Sel":"")+(B.disabled?"Disabled":"");break}else{A.className="menuRightPart"+(F?"Sel":"")}}}C++}}}function MenuItem_getHTMLPart(C){var G=this;switch(C){case 0:var B=null,E=' class="menuIcon'+(G.checked?"Check":"")+'"';if(G.isCheck&&(G.icon==null)){B=simpleImgOffset(_skin+"menus.gif",16,16,0,G.checked?48:0,(G.par.id+"_item_icon_"+G.id),null,(G.checked?_menuCheckLab:""))}else{B=G.icon?simpleImgOffset(G.icon,16,16,G.disabled?G.disDx:G.dx,G.disabled?G.disDy:G.dy,(G.par.id+"_item_icon_"+G.id),null,G.alt?G.alt:""):(getSpace(16,16))}if(G.isCheck){B='<div id="'+G.par.id+"_item_check_"+G.id+'" class="menuIcon'+(G.checked?"Check":"")+'" style="width:16px;height:16px;padding:2px">'+B+"</div>"}return B;case 1:var D=(G.par.id+"_span_text_"+G.id);var A=' onkeydown="'+_codeWinName+'._mikd(this, event);return true" ';var F='<label for="'+D+'" id="'+(G.par.id+"_hiddenLabel_"+G.id)+'" style="display:none;" ></label>';return'<span id="'+D+'" '+A+' tabIndex="0" role="menuitem">'+convStr(G.text)+"</span>"+F;case 2:return simpleImgOffset(_skin+"menus.gif",16,16,G.sub?(G.disabled?7:0):0,G.sub?(G.disabled?81:64):0,G.par.id+"_item_arrow_"+G.id,null,null,null,"right");case 3:return'<table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table>';case 4:return convStr(G.accel)}}function MenuItem_getHTML(){var E=this;if((E.icon!=null)||(E.text!=null)){var D=' onclick="'+_codeWinName+'._micl(this,event);return true" oncontextmenu="'+_codeWinName+'._micl(this,event);return false" onmouseover="'+_codeWinName+'._mii(this,1)" onmouseout="'+_codeWinName+'._mii(this,0);" ';var A=' onkeydown="'+_codeWinName+'._mikd(this,event);return true" ';var B=new Array(),C=0;B[C++]='<tr onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" id="'+(E.par.id+"_item_"+E.id)+'" style="'+(!E.isShown?"display:none;":"")+"height:"+_mitemH+"px;width:24px;cursor:"+(E.disabled?"default":_hand)+'" '+D+A+' valign="middle">';B[C++]='<td id="'+(E.par.id+"_item_td_"+E.id)+'" style="width:23px;height:'+_mitemH+'px;" align="center" class="'+E.leftZoneClass+'">';B[C++]=E.getHTMLPart(0);B[C++]="</td>";B[C++]="<td "+(E.centered?' align="center" ':"")+' style="height:'+_mitemH+'px" id="'+(E.par.id+"_text_"+E.id)+'" class="menuTextPart'+(E.disabled?"Disabled":"")+'">';B[C++]=E.getHTMLPart(1);B[C++]="</td>";if(E.needsRightPart){if(E.accel!=null){B[C++]='<td class="menuTextPart'+(E.disabled?"Disabled":"")+'" id="'+(E.par.id+"_accel_"+E.id)+'" align="right" style="height:'+_mitemH+'px"  tabIndex="-1">';B[C++]=E.getHTMLPart(4);B[C++]="</td>"}else{B[C++]='<td class="menuRightPart" align="right" style="width:40px;height:'+_mitemH+'px;" >';B[C++]=E.getHTMLPart(2);B[C++]="</td>"}}else{B[C++]='<td class="menuRightPart" align="right" style="width:2px;height:'+_mitemH+'px;" >';B[C++]=img(_skin+"../transp.gif",1,1,null,null,null);B[C++]="</td>"}B[C++]="</tr>";return B.join("")}else{return'<tr onmousedown="'+_codeWinName+'._minb(event)" onclick="'+_codeWinName+'._minb(event)" id="'+(E.par.id+"_item_"+E.id)+'" onmouseup="'+_codeWinName+'._minb(event)" style="height:3px"><td class="'+E.leftZoneClass+'" style="width:24px;height:3px;border:0px"></td><td colspan="2" style="padding-left:5px;padding-right:5px;border:0px">'+E.getHTMLPart(3)+"</td></tr>"}}function MenuItem_dynHTML(){var A=this;if(A.par.layer==null){return }var F=A.par.layer.childNodes[0],I=F.insertRow(A.menuIndex),J=I.style;I.onmousedown=_minb;I.onmouseup=_minb;I.id=(A.par.id+"_item_"+A.id);if((A.icon!=null)||(A.text!=null)){var D=I.insertCell(0),C=I.insertCell(1),B=I.insertCell(2),H=D.style,G=C.style,E=B.style;I.onclick=MenuItem_clickCallTrue;I.oncontextmenu=MenuItem_clickCallFalse;I.onmouseover=MenuItem_invertCall1;I.onmouseout=MenuItem_invertCall0;J.height=""+_mitemH+"px";J.width="24px";J.cursor=(A.disabled?"default":_hand);D.id=(A.par.id+"_item_td_"+A.id);H.width="23px";H.height=""+_mitemH+"px";D.innerHTML=A.getHTMLPart(0);D.align="center";D.className=A.leftZoneClass;if(A.centered){C.align="center"}G.height=""+_mitemH+"px";C.id=(A.par.id+"_text_"+A.id);C.className="menuTextPart"+(A.disabled?"Disabled":"");C.innerHTML=A.getHTMLPart(1);if(A.accel){B.className="menuTextPart"+(A.disabled?"Disabled":"");B.align="right";E.height=""+_mitemH+"px";B.innerHTML=A.getHTMLPart(4)}else{B.className="menuRightPart";B.align="right";E.width="40px";E.height=""+_mitemH+"px";B.innerHTML=A.getHTMLPart(2)}A.init()}else{I.onclick=_minb;I.style.height="3px";var D=I.insertCell(0),C=I.insertCell(1),H=D.style,G=C.style;D.className=A.leftZoneClass;H.width="24px";H.height="3px";H.border="0px";C.colSpan="2";G.paddingLeft="5px";G.paddingRight="5px";C.innerHTML=A.getHTMLPart(3)}}function MenuItem_isChecked(){return this.checked}function MenuItem_setText(A){var B=this,C=B.par.id;B.text=A;if(B.textLayer){B.textLayer.innerHTML=B.getHTMLPart(1);B.textOnlyLayer=getLayer(C+"_span_text_"+B.id)}}function MenuItem_setAccelerator(B,A){var C=this,D=C.par.id;C.accel=((A!=null)?_modifiers[A]:"")+B;if(C.accelLayer){C.accelLayer.innerHTML=C.getHTMLPart(4)}}function MenuItem_setIcon(B,A,E,D,C){var F=this;F.url=C?C:F.url;F.dx=(B!=null)?B:F.dx;F.dy=(A!=null)?A:F.dy;F.disDx=(E!=null)?E:F.disDx;F.disDy=(D!=null)?D:F.disDy;if(F.icon&&F.iconLayer){changeSimpleOffset(F.iconLayer,F.disabled?F.disDx:F.dx,F.disabled?F.disDy:F.dy,F.url)}}function MenuItem_show(A){var B=this;B.isShown=A;if(B.layer!=null){B.layer.style.display=A?"":"none"}}function _micl(B,C){eventCancelBubble(C);var A=B._boIndex,D=_menusItems[A];D.layer=B;if(!D.disabled){if(D.sub){D.par.nextSub=D.menuIndex;MenuItem_callShowSub(A)}else{D.par.show(false,0,0,true);if(D.isCheck){if(D.par.uncheckAll){D.par.uncheckAll()}D.check(!D.checked)}if(D.par.container&&D.par.container.updateButton){D.par.container.updateButton(A)}_mii(B,0,A);D.par.nextSub=-1;if(D.cb){setTimeout("MenuItem_delayedClick("+A+")",1)}}}}function _mikd(E,G){while(E&&!E._boIndex){E=E.parentNode}if(!E||!E._boIndex){return }var B=E._boIndex,H=_menusItems[B];H.layer=E;var D=eventGetKey(G);switch(D){case 32:case 13:_micl(E,G);break;case 107:case 39:if(!H.disabled&&H.sub){_micl(E,G)}break;case 109:case 37:break;case 40:var C=H.par.items,A=C.length;for(var F=H.menuIndex+1;F<A;F++){if(C[F].isShown&&!C[F].isSeparator){C[F].focus();break}}break;case 38:var C=H.par.items,A=C.length;for(var F=H.menuIndex-1;F>=0;F--){if(C[F].isShown&&!C[F].isSeparator){C[F].focus();break}}break}}function MenuItem_callShowSub(A,B){var C=_menusItems[A];if(B){setTimeout("MenuItem_delayedShowSub("+A+")",500)}else{MenuItem_delayedShowSub(A)}}function MenuItem_delayedShowSub(A){var B=_menusItems[A];B.par.showSub()}function _minb(A){eventCancelBubble(A)}function MenuItem_delayedClick(A){var B=_menusItems[A];if(B.cb){B.cb()}}function MenuItem_clickCallTrue(A){_micl(this,A);return true}function MenuItem_clickCallFalse(A){_micl(this,A);return false}function MenuItem_invertCall0(A){_mii(this,0)}function MenuItem_invertCall1(A){_mii(this,1)}function MenuItem_focus(){var A=this;if(isLayerDisplayed(A.layer)&&A.textOnlyLayer&&A.textOnlyLayer.focus){A.textOnlyLayer.focus()}}function MenuItem_updateTooltip(){var B=this;if(B.textOnlyLayer&&!B.isSeparator){if(B.textOnlyLayer.innerHTML){B.textOnlyLayer.title=B.textOnlyLayer.innerHTML}B.textOnlyLayer.title+=B.checked?" "+_menuCheckLab:"";if(B.disabled){B.textOnlyLayer.title=(B.textOnlyLayer.title!=null?B.textOnlyLayer.title:"")+" "+_menuDisableLab}if(B.hiddenLabelLayer){var A=((_moz&&B.textOnlyLayer.title)?B.textOnlyLayer.title:"")+B.itemNo+_of+B.par.getTotalNumItems();B.hiddenLabelLayer.innerHTML=A}}}function newScrollMenuWidget(A,I,H,B,N,M,K,G,F,J,D,L,E){var C=newWidget(A);C.list=newListWidget("list_"+A,ScrollMenuWidget_changeCB,H,B,N,M,ScrollMenuWidget_dblClickCB,ScrollMenuWidget_keyUpCB,ScrollMenuWidget_clickCB);C.list.par=C;C.label=NewLabelWidget("label_"+A,J,D);C.showLabel=F;C.changeCB=I;C.menuClickCB=E;C.dblClickCB=K;C.keyUpCB=G;C.beforeShowCB=L;C.zIndex=_menusZIndex;C.init=ScrollMenuWidget_init;C.justInTimeInit=ScrollMenuWidget_justInTimeInit;C.setDisabled=ScrollMenuWidget_setDisabled;C.write=ScrollMenuWidget_write;C.getHTML=ScrollMenuWidget_getHTML;C.show=ScrollMenuWidget_show;C.add=ScrollMenuWidget_add;C.del=ScrollMenuWidget_del;C.getSelection=ScrollMenuWidget_getSelection;C.select=ScrollMenuWidget_select;C.clearSelection=ScrollMenuWidget_clearSelection;C.valueSelect=ScrollMenuWidget_valueSelect;C.getCount=ScrollMenuWidget_getCount;C.isShown=MenuWidget_isShown;C.captureClicks=MenuWidget_captureClicks;C.releaseClicks=MenuWidget_releaseClicks;C.clickCB=new Array;C.clickCBDocs=new Array;return C}function ScrollMenuWidget_init(){}function ScrollMenuWidget_clearSelection(){var A=this;if(A.list){A.list.clearSelection()}}function ScrollMenuWidget_justInTimeInit(){var A=this;A.layer=getLayer(A.id);if(A.layer==null){append2(_curDoc.body,A.getHTML());A.layer=getLayer(A.id)}A.layer._widget=A.widx;A.css=A.layer.style;A.css.visibility="hidden";A.list.init();A.label.init()}function ScrollMenuWidget_setDisabled(){}function ScrollMenuWidget_write(){}function ScrollMenuWidget_getHTML(){var B=this;var A="";A+='<table dir="ltr" onmousedown="event.cancelBubble=true" id="'+B.id+'" style="display:none;" class="menuFrame" cellspacing="0" cellpadding="0" border="0"><tbody>';A+='<tr><td align="center">'+B.list.getHTML()+"</td></tr>";A+='<tr><td align="center">'+B.label.getHTML()+"</td></tr>";A+="</tbody></table>";return A}function ScrollMenuWidget_show(H,G,F){var B=this;if(B.layer==null){B.justInTimeInit()}var D=B.css;if(H){if(B.beforeShowCB){B.beforeShowCB()}B.captureClicks();D.display="block";D.zIndex=(B.zIndex+1);D.visibility="hidden";D.left="-1000px";D.top="-1000px";var I=B.getWidth();var C=B.getHeight();if(B.alignLeft){G-=I}var A=G+I+4,E=F+C+4;if(A>winWidth()){G=Math.max(0,G-4-I)}if(E>winHeight()){F=Math.max(0,F-4-C)}D.left=""+G+"px";D.top=""+F+"px";D.visibility="visible";B.iframeLyr=getDynamicBGIFrameLayer();B.iframeCss=B.iframeLyr.style;iCss=B.iframeCss;iCss.left=""+G+"px";iCss.top=""+F+"px";iCss.width=""+I+"px";iCss.height=""+C+"px";iCss.zIndex=B.zIndex-1;iCss.display="block";if(_ie){F-=2;G-=2}}else{releaseBGIFrame(B.iframeLyr.id);D.display="none";iCss.display="none";B.releaseClicks()}}function ScrollMenuWidget_add(A,D,B,E){var C=this;if(C.layer==null){C.justInTimeInit()}C.list.add(A,D,B,E)}function ScrollMenuWidget_del(A){var B=this;if(B.layer==null){B.justInTimeInit()}B.list.del(A)}function ScrollMenuWidget_getSelection(){var A=this;if(A.layer==null){A.justInTimeInit()}return A.list.getSelection()}function ScrollMenuWidget_select(A){var B=this;if(B.layer==null){B.justInTimeInit()}B.list.select(A)}function ScrollMenuWidget_valueSelect(A){var B=this;if(B.layer==null){B.justInTimeInit()}B.list.valueSelect(A)}function ScrollMenuWidget_getCount(){var A=this;if(A.layer==null){A.justInTimeInit()}return A.list.getCount()}function ScrollMenuWidget_changeCB(){var A=this;if(A.par.changeCB){A.par.changeCB()}}function ScrollMenuWidget_clickCB(){var A=this;A.par.show(false);if(A.par.menuClickCB){A.par.menuClickCB()}}function ScrollMenuWidget_dblClickCB(){var A=this;A.par.show(false);if(A.par.dblClickCB){A.par.dblClickCB()}}function ScrollMenuWidget_keyUpCB(C){var E=13,B=27;var D=this;var A=eventGetKey(C);if(A==E||A==B){D.par.show(false)}if(D.par.keyUpCB){D.par.keyUpCB()}}if(window._DHTML_LIB_PSHEET_JS_LOADED==null){_DHTML_LIB_PSHEET_JS_LOADED=true;_boAllTabs=new Array;_vertTabImgW=3;_vertTabLBorderToTxt=20-_vertTabImgW-1;_vertTabLBorderToIcon=12-_vertTabImgW-1;_vertTabIconToTxt=8;_vertTabIconSize=16;_tabImgLeft=0;_tabImgMid=1;_tabImgRight=2;_tabTxt=3;_tabScrollBar=4;_tabList=5;_VertTab=2;_VertTabWithIcon=3;_HorizTabTop=4;_HorizTabBottom=5;_HorizTabTopWithClose=6;_menuBarTab=7;_vertTabHover=0;_vertTabSelected=1;_vertTabPressed=2;_vertTabNormal=3;_vertTabCSS=[["menuLeftMostSel","naviVTabLSelected","naviVTabLPressed","naviVTabNormal"],["menuLeftPartSel","naviVTabMSelected","naviVTabMPressed","naviVTabNormal"],["menuRightMostSel","naviVTabRSelected","naviVTabRPressed","naviVTabNormal"]];_vertNaviPanelMinW=120;_vertNaviPanelMaxW=180;_vertNaviPanelWithIconW=150;_vertNaviPanelH=23*8;_naviHorzTabH=24;_horizTabSelected=0;_horizTabNormal=1;_horizTabHover=2;_horizTabSelHover=3;_horizTabPressed=4;_tabListNormal=0;_tabListHover=1;_tabListPressed=2;_horizTabCSS=[["naviHTabLSelected","naviHTabLNormal","naviHTabLHover","naviHTabLSelHover","naviHTabLNormal"],["naviHTabMSelected","naviHTabMNormal","naviHTabMHover","naviHTabMSelHover","naviHTabMNormal"],["naviHTabRSelected","naviHTabRNormal","naviHTabRHover","naviHTabRSelHover","naviHTabRNormal"],["naviHTabTextSel","naviHTabText","naviHTabTextHover","naviHTabTextSelHover","naviHTabText"],["naviHScrollBarL","naviHScrollBarM","naviHScrollBarR","naviHScrlBarFirstArrow naviHScrlBarArrowPos","naviHScrlBarPrevArrow naviHScrlBarArrowPos","naviHScrlBarNextArrow naviHScrlBarArrowPos","naviHScrlBarLastArrow naviHScrlBarArrowPos","naviHScrlBarHover","naviHScrlBarPressed","naviHScrlBarDisabled","naviHScrlBarFirstDis naviHScrlBarArrowPos","naviHScrlBarPrevDis naviHScrlBarArrowPos","naviHScrlBarNextDis naviHScrlBarArrowPos","naviHScrlBarLastDis naviHScrlBarArrowPos"],["tabListTop","tabListTopHover","tabListTopPressed"]];_horizTabWithCloseCSS=[["naviHTabLSelected","naviHTabLNormal","naviHTabLHover","naviHTabLSelHover","naviHTabLNormal"],["naviHTabMSelected","naviHTabMNormal","naviHTabMHover","naviHTabMSelHover","naviHTabMNormal"],["naviHTabWithCloseRSel","naviHTabRWithCloseNormal","naviHTabWithCloseRHover","naviHTabWithCloseRSelHover","naviHTabRWithCloseNormal"],["naviHTabTextSel","naviHTabText","naviHTabTextHover","naviHTabTextSelHover","naviHTabText"],["naviHScrollBarL","naviHScrollBarM","naviHScrollBarR","naviHScrlBarFirstArrow naviHScrlBarArrowPos","naviHScrlBarPrevArrow naviHScrlBarArrowPos","naviHScrlBarNextArrow naviHScrlBarArrowPos","naviHScrlBarLastArrow naviHScrlBarArrowPos","naviHScrlBarHover","naviHScrlBarPressed","naviHScrlBarDisabled","naviHScrlBarFirstDis naviHScrlBarArrowPos","naviHScrlBarPrevDis naviHScrlBarArrowPos","naviHScrlBarNextDis naviHScrlBarArrowPos","naviHScrlBarLastDis naviHScrlBarArrowPos"]];_horizTabImgL=4;_horizTabImgR=23;_horizTabTxtPaddingL=15;_horizTabTxtPaddingR=3;_horizTabTxtPaddingB=5;_horizTabImgPadL=8;_horizTabImgToTxt=6;_horizBottomTabTxtPadB=7;_horizTabTxtToClose=5;_horizTabClosePadR=1;_noScrollBar=0;_ScrollBarAtBegin=1;_ScrollBarAtEnd=2;_horizBarWidth=100;_defaultMenuBarWidth=200;_menuBarTabHeight=22;_tabListIconWidth=19}function newTabbedZone(F,C,A,B,D){var E=newFrameZoneWidget(F,B,D);E.w=B;E.h=D;E.cb=A;E.oldIndex=-1;E.tzOldInit=E.init;E.add=TabbedZoneWidget_add;E.select=TabbedZoneWidget_select;E.getTabCSS=TabbedZoneWidget_getTabCSS;E.init=TabbedZoneWidget_init;E.beginHTML=TabbedZoneWidget_beginHTML;E.oldFrameZoneEndHTML=E.endHTML;E.endHTML=TabbedZoneWidget_endHTML;if(!C){E.tabs=newTabBarWidget("tzone_tabs_"+F,true,TabbedZone_itemClick);E.tabs.parentTabbedZone=E}else{E.tabs=C}E.beginTabHTML=TabbedZoneWidget_beginTabHTML;E.endTabHTML=TabbedZoneWidget_endTabHTML;E.beginTab=TabbedZoneWidget_beginTab;E.endTab=TabbedZoneWidget_endTab;E.showTab=TabbedZoneWidget_showTab;E.tzOldResize=E.resize;E.resize=TabbedZoneWidget_resize;return E}function TabbedZone_itemClick(){var B=this.parentTabbedZone,A=this.getSelection().index;B.select(A);if(B.cb){B.cb(A)}}function TabbedZoneWidget_add(B,E,C,H,A,F,D){var G=this;G.tabs.add(B,E,-1,C,H,A,F,D)}function TabbedZoneWidget_init(){var A=this;A.tzOldInit();A.tabs.init();A.select(0)}function TabbedZoneWidget_getTabCSS(A){if(A!=null){if(!A.zoneLayer){A.zoneLayer=getLayer(A.zoneId)}if(A.zoneLayer){return A.zoneLayer.style}}return null}function TabbedZoneWidget_showTab(B,A){var C=this.tabs.items[B];if(C){C.setDisplay(A)}}function TabbedZoneWidget_resize(B,D){var F=this;if(B!=null){F.w=B}if(D!=null){F.h=D}F.tzOldResize(B,D);var A=getLayer(F.id+"_container");if(A){if(F.w){A.style.width=F.w+"px"}if(F.h){A.style.height=F.h+"px"}}var E=F.tabs.items[F.oldIndex];if(E){var C=getLayer(E.zoneId);if(C){if(F.w){C.style.width=F.w+"px"}if(F.h){C.style.height=F.h+"px"}}}}function TabbedZoneWidget_select(D){var A=this,G=A.tabs,B=G.getSelection(),H=A.oldIndex,F;var I=G.items[A.oldIndex];A.tabs.select(D);if(I){F=A.getTabCSS(I);if(F){F.display="none"}}else{var E=G.items.length;for(var C=0;C<E;C++){F=A.getTabCSS(G.items[C]);if(F){F.display="none"}}}A.oldIndex=D;F=A.getTabCSS(G.items[D]);if(F){F.display="";A.resize(A.w,A.h)}}function TabbedZoneWidget_beginHTML(){var A=this;return'<table id="'+this.id+'" cellspacing="0" cellpadding="0" border="0" style="position:absolute;"><tbody><tr class="hideableFrame" valign="bottom" height="28"><td>'+imgOffset(_skin+"dialogframe.gif",5,5,0,0)+'</td><td valign="top" align="left" style="'+backImgOffset(_skin+"tabs.gif",0,288)+'">'+A.tabs.getHTML()+"</td><td>"+imgOffset(_skin+"dialogframe.gif",5,5,5,0)+'</td></tr><tr><td class="hideableFrame" style="'+backImgOffset(_skin+"dialogframeleftright.gif",0,0)+'"></td><td class="dialogzone"><div id="'+A.id+'_container" style="'+sty("width",A.w)+sty("height",A.h)+'">'}function TabbedZoneWidget_endHTML(){return'</div><td class="hideableFrame" style="'+backImgOffset(_skin+"dialogframeleftright.gif",5,0)+'"></td></tr><tr class="hideableFrame"><td>'+imgOffset(_skin+"dialogframe.gif",5,5,0,5)+'</td><td style="'+backImgOffset(_skin+"tabs.gif",0,187)+'"></td><td>'+imgOffset(_skin+"dialogframe.gif",5,5,5,5)+"</td></tr></tr></tbody></table>"}function TabbedZoneWidget_beginTabHTML(A){var B=this;return'<div id="'+B.zoneId+'" style="display:none;'+sty("width",B.w)+sty("height",B.h)+'">'}function TabbedZoneWidget_endTabHTML(){return"</div>"}function TabbedZoneWidget_beginTab(A){_curDoc.write(this.beginTabHTML(A))}function TabbedZoneWidget_endTab(){_curDoc.write(this.endTabHTML())}function newNaviTabWidget(C,A,L,E,F,D,M,J,B,K,I,H,G){return new_NaviTabWidget({id:C,name:A,value:L,tabType:E,clickCB:F,dblclickCB:D,tooltip:M,icon:J,iconW:B,iconH:K,iconOffX:I,iconOffY:H,closeTabCB:G})}function new_NaviTabWidget(A){var B=new_Widget(A);B.superInit=B.init;B.init=NaviTabWidget_init;B.getHTML=NaviTabWidget_getHTML;B.hasCloseButton=NaviTabWidget_hasCloseButton;B.select=NaviTabWidget_select;B.setUserData=NaviTabWidget_setUserData;B.getUserData=NaviTabWidget_getUserData;B.setMenu=NaviTabWidget_setMenu;B.getMenu=NaviTabWidget_getMenu;B.setHtml=NaviTabWidget_setHtml;B.getHtml=NaviTabWidget_getHtml;B.zoneId="tzone_tab_"+Math.round(Math.random()*12345)+new Date().getTime();B.tabType=Widget_param(A,"tabType",_HorizTabTop);B.name=Widget_param(A,"name","Tab");B.value=Widget_param(A,"value",0);B.cb=Widget_param(A,"clickCB",null);B.dblClick=Widget_param(A,"dblclickCB",null);B.icon=Widget_param(A,"icon",null);B.iconW=Widget_param(A,"iconW",(B.icon?_vertTabIconSize:1));B.iconH=Widget_param(A,"iconH",(B.icon?_vertTabIconSize:1));B.iconOffX=Widget_param(A,"iconOffX",0);B.iconOffY=Widget_param(A,"iconOffY",0);B.tooltip=Widget_param(A,"tooltip",null);B.closeTabCB=Widget_param(A,"closeTabCB",null);B.isSelected=false;B.leftimgid="naviTabL_"+B.id;B.midimgid="naviTabM_"+B.id;B.rightimgid="naviTabR_"+B.id;B.txtid="naviTabTxt_"+B.id;B.sepid="naviTabSep_"+B.id;B.closeid="naviTabClose_"+B.id;B.iconid="naviTabIcon_"+B.id;switch(B.tabType){case _VertTab:case _VertTabWithIcon:B.tabCSSTable=_vertTabCSS;break;case _HorizTabBottom:B.tabCSSTable=_horizBottomTabCSS;break;case _HorizTabTopWithClose:B.tabCSSTable=_horizTabWithCloseCSS;break;case _HorizTabTop:default:B.tabCSSTable=_horizTabCSS;break;case _menuBarTab:B.tabCSSTable=_menuBarTabCSS;break}B.mover=NaviTabWidget_mover;B.mdown=NaviTabWidget_mdown;B.keydownCB=NaviTabWidget_keydownCB;B.contextMenuCB=NaviTabWidget_contextMenuCB;B.changeState=NaviTabWidget_changeState;B.getVertHTML=NaviTabWidget_getVertHTML;B.getHorizHTML=NaviTabWidget_getHorizHTML;B.displaySep=NaviTabWidget_displaySep;B.isVert=NaviTabWidget_isVert;B.updateCloseIcon=NaviTabWidget_updateCloseIcon;B.mdown_closeIcon=NaviTabWidget_mdown_closeIcon;B.kdown_closeIcon=NaviTabWidget_kdown_closeIcon;B.clickCB=NaviTabWidget_clickCB;B.dblClickCB=NaviTabWidget_dblClickCB;B.leftimgLyr=null;B.midimgLyr=null;B.rightimgLyr=null;B.txtLyr=null;B.iconLyr=null;B.sepLyr=null;B.closeLyr=null;B.data=new Object;return B}function NaviTabWidget_init(){var A=this;A.superInit();if(A.layer){A.layer.onmouseover=A.mover;A.layer.onmouseout=A.mover;A.layer.onmousedown=A.mdown;A.layer.onmouseup=A.mdown;A.layer.onclick=A.clickCB;if(_ie){A.layer.ondblclick=A.dblClickCB}A.layer.onkeydown=A.keydownCB;A.layer.onselectstart=function(){return false};A.layer.ondragstart=function(){return false};A.layer.oncontextmenu=A.contextMenuCB}A.leftimgLyr=getLayer(A.leftimgid);A.midimgLyr=getLayer(A.midimgid);A.rightimgLyr=getLayer(A.rightimgid);A.txtLyr=getLayer(A.txtid);A.iconLyr=getLayer(A.iconid);A.sepLyr=getLayer(A.sepid);if(A.hasCloseButton()){A.closeLyr=getLayer(A.closeid);A.closeLyr.onmousedown=A.mdown_closeIcon;A.closeLyr.onkeypress=A.kdown_closeIcon;A.closeLyr.onmouseup=A.mdown_closeIcon;A.updateCloseIcon("naviHTabCloseSel",A.isSelected)}}function NaviTabWidget_getVertHTML(){var E=this;var B="";B='<table id="'+E.id+'" style="cursor:'+_hand+'" cellspacing="0" cellpadding="0" border="0">';B+='<tbody><tr height="'+_mitemH+'">';var C=E.isSelected?_vertTabSelected:_vertTabNormal;B+='<td id="'+E.leftimgid+'" class="'+E.tabCSSTable[_tabImgLeft][C]+'"><div style="width:'+_vertTabImgW+'px;"></div></td>';var A=E.par.w-2*_vertTabImgW;B+='<td id="'+E.midimgid+'" class="'+E.tabCSSTable[_tabImgMid][C]+'" width="'+A+'">';if(E.tabType==_VertTabWithIcon){B+='<table cellspacing="0" cellpadding="0" border="0" width="100%">';B+='<tbody><tr height="'+_mitemH+'">';B+='<td style="padding-left:'+_vertTabLBorderToIcon+'px;">'+imgOffset((E.icon?E.icon:(_skin+"../transp.gif")),_vertTabIconSize,E.iconH,E.iconOffX,E.iconOffY,E.iconid)+"</td>";var D=Math.max(40,A-_vertTabLBorderToIcon-_vertTabIconSize);B+='<td  style="padding-left:'+_vertTabIconToTxt+"px;width:"+D+'px;" >';B+='<div id="'+E.txtid+'" class="naviVTabText" style="width:'+(D-_vertTabIconToTxt-2)+'px;">'+convStr(E.name)+"</div></td>";B+="</tr></tbody></table>"}else{B+='<div id="'+E.txtid+'" class="naviVTabText" style="padding-left:'+_vertTabLBorderToTxt+"px;width:"+(A-_vertTabLBorderToTxt-2)+'px;">'+convStr(E.name)+"</div>"}B+="</td>";B+='<td id="'+E.rightimgid+'" class="'+E.tabCSSTable[_tabImgRight][C]+'"><div style="width:'+_vertTabImgW+'px"></div></td>';B+="</tr></tbody></table>";return B}function NaviTabWidget_hasCloseButton(){var A=this;return _HorizTabTopWithClose==A.tabType&&(!A.par.getTabIndexByName(A.name)==0||A.isFirstTabClosable)}function NaviTabWidget_getHorizHTML(){var F=this;var C='<table id="'+F.id+'" style="cursor:'+_hand+'" cellspacing="0" cellpadding="0" border="0">';C+='<tbody><tr height="'+_naviHorzTabH+'">';var E=F.isSelected?_horizTabSelected:_horizTabNormal;C+='<td id="'+F.leftimgid+'" class="'+F.tabCSSTable[_tabImgLeft][E]+'" valign="top"><div style="width:'+_horizTabImgL+'px;"></div></td>';C+='<td id="'+F.midimgid+'" valign="bottom" class="'+F.tabCSSTable[_tabImgMid][E]+'">';C+='<table cellspacing="0" cellpadding="0" border="0" width="100%">';C+='<tbody><tr height="'+_naviHorzTabH+'">';if(_menuBarTab!=F.tabType){var B=(_HorizTabTop==F.tabType||_HorizTabTopWithClose==F.tabType)?"margin-bottom:3px;":"margin-bottom:6px;";B=B+"margin-left:"+((F.iconW>1)?_horizTabImgPadL:0)+"px;";C+='<td  valign="bottom" >'+imgOffset((F.icon?F.icon:(_skin+"../transp.gif")),F.iconW,F.iconH,F.iconOffX,F.iconOffY,F.iconid,null,null,B)+"</td>"}var D=' style="padding-left:'+((F.iconW>1)?_horizTabImgToTxt:_horizTabTxtPaddingL)+"px;padding-right:"+((_HorizTabTopWithClose==F.tabType)?_horizTabTxtToClose:_horizTabTxtPaddingR)+"px;padding-bottom:"+((_HorizTabTop==F.tabType||_HorizTabTopWithClose==F.tabType)?_horizTabTxtPaddingB:_horizBottomTabTxtPadB)+'px;" ';var A='<div tabindex="0" role="tab" id="'+F.txtid+'" '+D+' class="'+F.tabCSSTable[_tabTxt][E]+'" >'+convStr(F.name)+"</div>";C+='<td valign="bottom">'+A+"</td>";if(F.hasCloseButton()){C+='<td valign="top" style="padding-right:'+_horizTabClosePadR+'px;">';C+='<div tabindex="0" class="naviHTabCloseSel" id="'+F.closeid+'" role="button" title="'+_closeTab+" "+convStr(F.name)+'"></div></td>'}C+="</tr></tbody></table>";C+="</td>";C+='<td id="'+F.rightimgid+'" class="'+F.tabCSSTable[_tabImgRight][E]+'" valign="top">';C+='<div style="width:'+((_HorizTabTopWithClose==F.tabType)?_horizTabImgL:_horizTabImgR)+'px"></div></td>';C+='<td  class="'+((F.tabType==_HorizTabBottom)?"naviHBottomTabMNormal":"naviHTabMNormal")+'">';C+='<div id="'+F.sepid+'" class="naviHTabSeparator"></div></td>';C+="</tr></tbody></table>";return C}function NaviTabWidget_isVert(){var A=this;return(A.tabType==_VertTabWithIcon||A.tabType==_VertTab)}function NaviTabWidget_getHTML(){var A=this;return(A.isVert())?A.getVertHTML():A.getHorizHTML()}function NaviTabWidget_select(A){var B=this;B.isSelected=A;B.changeState(B.isVert()?(A?_vertTabSelected:_vertTabNormal):(A?_horizTabSelected:_horizTabNormal));B.updateCloseIcon("naviHTabCloseSel",B.isSelected)}function NaviTabWidget_updateCloseIcon(B,A){var C=this;if(C.tabType==_HorizTabTopWithClose&&C.closeLyr){C.closeLyr.className=B;C.closeLyr.style.visibility=A?_show:_hide}}function NaviTabWidget_changeState(A){var B=this;if(B.layer){B.leftimgLyr.className=B.tabCSSTable[_tabImgLeft][A];B.midimgLyr.className=B.tabCSSTable[_tabImgMid][A];B.rightimgLyr.className=B.tabCSSTable[_tabImgRight][A]}if(B.txtLyr&&!B.isVert()){B.txtLyr.className=B.tabCSSTable[_tabTxt][A]}}function NaviTabWidget_mover(B){var G=getWidget(this);var B=getEvent(B);var E=(B&&B.type=="mouseover")?true:false;if(G.isVert()){G.changeState(E?_vertTabHover:(G.isSelected?_vertTabSelected:_vertTabNormal))}else{G.changeState(G.isSelected?(E?_horizTabSelHover:_horizTabSelected):(E?_horizTabHover:_horizTabNormal));var C=G.par.getPrevNextTabs(G.idx);if(!C){return }var D=C.prevTab;var A=C.nextTab;if(!G.isSelected){var F=false;if(!E){F=true;if(A){if(A.isSelected){F=false}}else{F=false}}G.displaySep(F,true);if(D){D.displaySep(E?false:((D.isSelected)?false:true),true)}}else{G.displaySep(false);if(D){D.displaySep(false)}}G.updateCloseIcon((E?"naviHTabCloseHover":"naviHTabCloseSel"),(G.isSelected||E))}}function NaviTabWidget_mdown(A){var B=getWidget(this);var A=getEvent(A);var C=(A&&A.type=="mousedown")?true:false;if(B.isVert()){B.changeState(C?_vertTabPressed:(B.isSelected?_vertTabSelected:_vertTabNormal))}}function NaviTabWidget_mdown_closeIcon(A){var B=getWidget(this);var A=getEvent(A);var C=(A&&A.type=="mousedown")?true:false;B.updateCloseIcon((C?"naviHTabClosePressed":"naviHTabCloseSel"),(C||B.isSelected));if(!C){if(B.par&&B.par.closeTab){B.par.closeTab(B.par.findTabIndex(B),B.closeTabCB)}}}function NaviTabWidget_kdown_closeIcon(B){var A=eventGetKey(B);if(A==32||A==13){eventCancelBubble(B);var C=getWidget(this);if(C.par&&C.par.closeTab){C.par.closeTab(C.par.findTabIndex(C),C.closeTabCB)}}}function NaviTabWidget_clickCB(A){var A=getEvent(A);var B=getWidget(this);if(B&&B.cb){B.cb()}eventCancelBubble(A);return false}function NaviTabWidget_dblClickCB(A){var A=getEvent(A);var B=getWidget(this);if(B&&B.dblClick){B.dblClick()}eventCancelBubble(A);return false}function NaviTabWidget_keydownCB(B){var A=eventGetKey(B);if(A==13){eventCancelBubble(B);var C=getWidget(this);if(C&&C.cb){C.cb()}}}function NaviTabWidget_displaySep(C,A){var B=this;if(!B.isVert()&&B.sepLyr){B.sepLyr.style.visibility=C?_show:_hide}}function NaviTabWidget_setUserData(A){this.data.userdata=A}function NaviTabWidget_getUserData(){return this.data.userdata}function NaviTabWidget_contextMenuCB(A){A=getEvent(A);var C=getWidget(this);var B=C.par;if(C&&C.cb){C.cb()}if(B&&B.showTabMenu){B.showTabMenu(A,C.idx)}eventCancelBubble(A);return false}function NaviTabWidget_setMenu(A){this.data.menu=A}function NaviTabWidget_getMenu(){return this.data.menu}function NaviTabWidget_setHtml(A){this.data.html=A}function NaviTabWidget_getHtml(){return this.data.html}function new_NaviBarWidget(D){var F=new_Widget(D);F.superInit=F.init;F.oldResize=F.resize;F.init=NaviBarWidget_init;F.getHTML=NaviBarWidget_getHTML;F.add=NaviBarWidget_add;F.addByPrms=NaviBarWidget_addByPrms;F.remove=NaviBarWidget_remove;F.removeAll=NaviBarWidget_removeAll;F.getCount=NaviBarWidget_getCount;F.select=NaviBarWidget_select;F.getSelection=NaviBarWidget_getSelection;F.getBarType=NaviBarWidget_getBarType;F.getMenu=NaviBarWidget_getMenu;F.showMenu=NaviBarWidget_showMenu;F.getTabMenu=NaviBarWidget_getTabMenu;F.showTabMenu=NaviBarWidget_showTabMenu;F.setShowContextMenuAllowed=NaviBarWidget_setShowContextMenuAllowed;F.getTab=NaviBarWidget_getTab;F.findTabIndex=NaviBarWidget_findTabIndex;F.getSelectedTab=NaviBarWidget_getSelectedTab;F.showTab=NaviBarWidget_showTab;F.resize=NaviBarWidget_resize;F.setTabHTML=NaviBarWidget_setTabHTML;F.getTabHTML=NaviBarWidget_getTabHTML;F.getTabIndexByName=NaviBarWidget_getTabIndexByName;F.getTabIndexByValue=NaviBarWidget_getTabIndexByValue;F.getTabID=NaviBarWidget_getTabID;var B=Widget_param(D,"w",null);var E=Widget_param(D,"h",null);F.cb=Widget_param(D,"cb",null);F.isFirstTabClosable=Widget_param(D,"isFirstTabClosable",true);F.dblclick=Widget_param(D,"dblclick",null);F.beforeShowTabMenu=Widget_param(D,"beforeShowTabMenu",null);F.type=Widget_param(D,"naviBarType",_VertTab);F.counter=0;F.items=new Array;F.selIndex=-1;F.leftLimit=0;F.showContextMenuAllowed=true;F.menu=newMenuWidget("naviBarMenu_"+F.id,null,Widget_param(D,"beforeShowMenu",null));F.tabList=null;F.showScrollBar=_noScrollBar;F.isVert=((F.type==_VertTab)||(F.type==_VertTabWithIcon))?true:false;if(F.isVert){if(B){B=Math.max(_vertNaviPanelMinW,B);B=Math.min(B,_vertNaviPanelMaxW)}F.w=(B?B:((F.type==_VertTab)?_vertNaviPanelMinW:_vertNaviPanelWithIconW))+2;if(E){var G=Math.ceil(E/_mitemH);E=(Math.max(1,G))*_mitemH}F.h=(E?E:_vertNaviPanelH)+2}else{var C=Widget_param(D,"showTabList",false);if(C){F.tabList=newMenuWidget("naviBarTabListMenu_"+F.id,null,NaviBarWidget_beforeShowTabListCB,NaviBarWidget_TabListonPositionCB);F.tabList.navibar=F}else{var A=Widget_param(D,"showScrollBar",false);F.showScrollBar=A?((_HorizTabBottom==F.type)?_ScrollBarAtBegin:_ScrollBarAtEnd):_noScrollBar}F.w=B?B:(_horizBarWidth+_scrollBarWidth);F.h=_naviHorzTabH}switch(F.type){case _VertTab:case _VertTabWithIcon:F.tabCSSTable=_vertTabCSS;break;case _HorizTabBottom:F.tabCSSTable=_horizBottomTabCSS;break;case _HorizTabTop:default:F.tabCSSTable=_horizTabCSS;break}F.trid="naviBarTR_"+F.id;F.trLyr=null;F.divid="naviBarDIV_"+F.id;F.divLyr=null;F.scrollbarid="scrlbar_"+F.id;F.firstid="f_"+F.id;F.previd="p_"+F.id;F.nextid="n_"+F.id;F.lastid="l_"+F.id;F.scrollbarLyr=null;F.firstLyr=null;F.prevLyr=null;F.nexttLyr=null;F.lastLyr=null;F.updateSepDisplay=NaviBarWidget_updateSepDisplay;F.getPrevNextTabs=NaviBarWidget_getPrevNextTabs;F.closeTab=NaviBarWidget_closeTab;F.getBarIndex=NaviBarWidget_getBarIndex;F.mover_scrollbar=NaviBarWidget_mover_scrollbar;F.mdown_scrollbar=NaviBarWidget_mdown_scrollbar;F.contextMenuCB=NaviBarWidget_contextMenuCB;F.dblclickCB=NaviBarWidget_dblclickCB;F.getItemXPos=NaviBarWidget_getItemXPos;F.par=null;F.tablistid="bartablist_"+F.id;F.tablistLyr=null;F.mover_tablist=NaviBarWidget_mover_tablist;F.mdown_tablist=NaviBarWidget_mdown_tablist;F.kdown_tablist=NaviBarWidget_kdown_tablist;F.onfocus_tablist=NaviBarWidget_onfocus_tablist;F.onblur_tablist=NaviBarWidget_onblur_tablist;F.click_tablist=NaviBarWidget_click_tablist;F.onChangeTabList=NaviBarWidget_onChangeTabList;F.showTabListIcon=NaviBarWidget_showTabListIcon;F.buildTabList=NaviBarWidget_buildTabList;return F}function newNaviBarWidget(B,J,C,D,I,E,K,H,G,A,F){return new_NaviBarWidget({id:B,naviBarType:J,cb:C,dblclick:D,w:I,h:E,beforeShowTabMenu:K,beforeShowMenu:H,showScrollBar:G,showTabList:A,isFirstTabClosable:F})}function NaviBarWidget_getBarType(){return this.type}function NaviBarWidget_init(){var F=this,C=F.items;F.superInit();F.trLyr=getLayer(F.trid);F.divLyr=getLayer(F.divid);var B=C.length;for(var D=0;D<B;D++){var E=C[D];E.init();E.select(D==F.selIndex)}F.updateSepDisplay();if(F.tabList){F.tablistLyr=getLayer(F.tablistid);F.tablistLyr.onmouseover=F.mover_tablist;F.tablistLyr.onmouseout=F.mover_tablist;F.tablistLyr.onmousedown=F.mdown_tablist;F.tablistLyr.onkeypress=F.kdown_tablist;F.tablistLyr.onmouseup=F.mdown_tablist;F.tablistLyr.onfocus=F.onfocus_tablist;F.tablistLyr.onblur=F.onblur_tablist;F.tablistLyr.onclick=F.click_tablist;F.tablistLyr.oncontextmenu=function(){return false};F.showTabListIcon()}else{if(F.showScrollBar!=_noScrollBar){F.scrollbarLyr=getLayer(F.scrollbarid);F.firstLyr=getLayer(F.firstid);F.prevLyr=getLayer(F.previd);F.nexttLyr=getLayer(F.nextid);F.lastLyr=getLayer(F.lastid);var A=[F.firstLyr,F.prevLyr,F.nexttLyr,F.lastLyr];for(var D=0;D<4;D++){A[D].onmouseover=F.mover_scrollbar;A[D].onmouseout=F.mover_scrollbar;A[D].onmousedown=F.mdown_scrollbar;A[D].onmouseup=F.mdown_scrollbar}F.firstLyr.onclick=F.firstCB;F.prevLyr.onclick=F.prevCB;F.nexttLyr.onclick=F.nextCB;F.lastLyr.onclick=F.lastCB;F.scrollbarLyr.oncontextmenu=function(){return false}}}if(F.isVert){F.layer.oncontextmenu=F.contextMenuCB}else{if(F.divLyr){F.divLyr.oncontextmenu=F.contextMenuCB}}if(F.cb){if(F.isVert){F.layer.onclick=function(){F.cb();return false}}else{if(F.divLyr){F.divLyr.onclick=function(){F.cb();return false}}}}if(F.dblclick){if(F.isVert){F.layer.ondblclick=F.dblclickCB}else{if(F.divLyr){F.divLyr.ondblclick=F.dblclickCB}}}F.layer.onselectstart=function(){return false};F.layer.ondragstart=function(){return false};F.resize(F.w,F.h)}function NaviBarWidget_dblclickCB(A){var B=getWidget(this);var A=getEvent(A);if(B.dblclick){B.dblclick()}eventCancelBubble(A);return false}function NaviBarWidget_mover_scrollbar(A){if(this.disabled){return }var C=getWidget(this);var A=getEvent(A);var B=(A&&A.type=="mouseover")?true:false;this.className=B?C.tabCSSTable[_tabScrollBar][_scrollbarHover]:C.tabCSSTable[_tabScrollBar][_scrollbarM]}function NaviBarWidget_mdown_scrollbar(A){if(this.disabled){return }var B=getWidget(this);var A=getEvent(A);var C=(A&&A.type=="mousedown")?true:false;this.className=C?B.tabCSSTable[_tabScrollBar][_scrollbarPressed]:B.tabCSSTable[_tabScrollBar][_scrollbarM]}function NaviBarWidget_getHTML(){var G=this,D=G.items,B=D.length;var F='<div id="'+this.id+'" class="'+(G.isVert?"dlgFrame":"")+'" align="left" style="overflow:hidden;width:'+G.w+"px;height:"+G.h+'px">';F+='<table cellspacing="0" cellpadding="0" border="0" '+(G.isVert?' class="naviVTabBackgnd"':"")+"><tbody>";if(G.isVert){for(var E=0;E<B;E++){F+="<tr><td>"+D[E].getHTML()+"</td></tr>"}}else{F+="<tr>";var A="";if(G.showScrollBar!=_noScrollBar){A="<td>";A+='<table id="'+G.scrollbarid+'" cellspacing="0" cellpadding="0" border="0" width="'+_scrollBarWidth+'"><tbody><tr style="width:'+_scrollBarWidth+'px;">';A+='<td class="'+G.tabCSSTable[_tabScrollBar][_scrollbarL]+'"><div></div></td>';A+='<td id="'+G.firstid+'" class="'+G.tabCSSTable[_tabScrollBar][_scrollbarM]+'" align="center" valign="bottom"><div class="'+G.tabCSSTable[_tabScrollBar][_scrollbarFirst]+'"></div></td>';A+='<td id="'+G.previd+'" class="'+G.tabCSSTable[_tabScrollBar][_scrollbarM]+'" align="center" valign="bottom"><div class="'+G.tabCSSTable[_tabScrollBar][_scrollbarPrev]+'"></div></td>';A+='<td id="'+G.nextid+'" class="'+G.tabCSSTable[_tabScrollBar][_scrollbarM]+'" align="center" valign="bottom"><div class="'+G.tabCSSTable[_tabScrollBar][_scrollbarNext]+'"></div></td>';A+='<td id="'+G.lastid+'" class="'+G.tabCSSTable[_tabScrollBar][_scrollbarM]+'" align="center" valign="bottom"><div class="'+G.tabCSSTable[_tabScrollBar][_scrollbarLast]+'"></div></td>';A+='<td class="'+G.tabCSSTable[_tabScrollBar][_scrollbarR]+'"><div></div></td>';A+="</tr></tbody></table>";A+="</td>"}if(G.showScrollBar==_ScrollBarAtBegin){F+=A}var C=G.w;if(G.showScrollBar!=_noScrollBar){C=Math.max(C-_scrollBarWidth,_horizBarWidth)}F+='<td><div style="overflow:hidden;width:'+C+'px;"  id="'+G.divid+'" class="'+G.tabCSSTable[_tabImgMid][_horizTabNormal]+'">';F+='<table cellspacing="0" cellpadding="0" border="0"><tbody>';F+='<tr id="'+G.trid+'">';for(var E=0;E<B;E++){F+="<td>"+D[E].getHTML()+"</td>"}F+="</tr></tbody></table></div></td>";if(G.tabList){F+='<td class="'+G.tabCSSTable[_tabImgMid][_horizTabNormal]+'"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr>';F+='<td tabindex=0 id="'+G.tablistid+'" class="'+G.tabCSSTable[_tabList][_tabListNormal]+'" role="button" title="'+L_bobj_crv_TabList+'">';F+='<div class="tabListIcon"></div></td>';F+="</tr></tbody></table></td>"}if(G.showScrollBar==_ScrollBarAtEnd){F+=A}F+="</tr>"}F+="</tbody></table></div>";return F}function NaviBarWidget_add(A,H,I,F,B,G,E,D,J,C){return this.addByPrms({name:A,value:H,tooltip:J,icon:F,iconW:B,iconH:G,iconOffX:E,iconOffY:D,closeTabCB:C},I)}function NaviBarWidget_addByPrms(H,I){var B=this,A=B.counter++;H.id="naviTab_"+A+"_"+B.id;H.tabType=B.type;H.clickCB=NaviBarWidget_itemClick;H.dblclickCB=NaviBarWidget_itemDblClick;var E=new_NaviTabWidget(H);E.par=B;E.idx=A;arrayAdd(B,"items",E,I);var G=B.items.length;if(B.isVert&&B.layer!=null){var C=document.createElement("td");C.innerHTML=E.getHTML();var F=document.createElement("tr");F.appendChild(C);var D=B.layer.childNodes[0].childNodes[0];if((typeof (I)=="undefined")||(G==1)||(I==null)||(I==-1)||(I>=G)){D.appendChild(F);I=G-1}else{if(D.childNodes[parseInt(I)]){D.insertBefore(F,D.childNodes[parseInt(I)])}}E.init()}else{if(B.trLyr){var C=document.createElement("td");C.innerHTML=E.getHTML();if((typeof (I)=="undefined")||(G==1)||(I==null)||(I==-1)||(I>=G)){B.trLyr.appendChild(C);I=G-1}else{B.trLyr.insertBefore(C,B.trLyr.childNodes[parseInt(I)])}E.init();B.showTabListIcon()}}if((B.selIndex!=null)&&(B.selIndex>=0)){if(I<=B.selIndex){B.selIndex++}}B.updateSepDisplay();return E}function NaviBarWidget_getBarIndex(D){var E=this,B=E.items,A=B.length;for(var C=0;C<A;C++){if(B[C].idx==D){return C}}return null}function NaviBarWidget_itemClick(){var E=this.par,B=E.items,A=B.length,C=-1;for(var D=0;D<A;D++){if(B[D].idx==this.idx){E.select(D);C=D;break}}if(E.cb){E.cb(C)}}function NaviBarWidget_itemDblClick(){var E=this.par,B=E.items,A=B.length,C=-1;for(var D=0;D<A;D++){if(B[D].idx==this.idx){C=D;break}}if(E.dblclick){E.dblclick(C)}}function NaviBarWidget_select(C){if(C==null||typeof (C)=="undefined"){return }var D=this,B=D.items,A=B.length;if(C==-1){C=A-1}if((C>=0)&&(C<A)){if((D.selIndex!=null)&&(D.selIndex>=0)&&(D.selIndex!=C)&&(D.selIndex<A)){B[D.selIndex].select(false)}D.selIndex=C;B[C].select(true);D.updateSepDisplay()}}function NaviBarWidget_updateSepDisplay(){var E=this;if(E.isVert||(E.layer==null)){return }var B=E.items,A=B.length;var D=true;for(var C=0;C<A;C++){D=true;if(B[C].isSelected){D=false}else{if((C+1<A)&&B[C+1].isSelected){D=false}else{if(C==A-1){D=false}}}B[C].displaySep(D)}}function NaviBarWidget_closeTab(C,A){var D=this;var B=D.getBarIndex(C);if(A){A(B)}if(D.par&&D.par.closeTab){D.par.closeTab(B)}D.remove(B)}function NaviBarWidget_getPrevNextTabs(D){var F=this;var E=F.getBarIndex(D);var B=F.items,A=B.length;if(E!=null){var C=new Object;C.prevTab=(E==0)?null:B[E-1];C.nextTab=(E==A-1)?null:B[E+1];return C}return null}function NaviBarWidget_getItemXPos(B){var D=this;var A=0;for(var C=0;C<B;C++){A+=parseInt(D.items[C].getWidth())}return A}function NaviBarWidget_getCount(){return this.items.length}function NaviBarWidget_mover_tablist(A){var C=getWidget(this);var A=getEvent(A);var B=(A&&A.type=="mouseover")?true:false;this.className=B?C.tabCSSTable[_tabList][_tabListHover]:C.tabCSSTable[_tabList][_tabListNormal]}function NaviBarWidget_mdown_tablist(A){var B=getWidget(this);var A=getEvent(A);var C=(A&&A.type=="mousedown")?true:false;this.className=C?B.tabCSSTable[_tabList][_tabListPressed]:B.tabCSSTable[_tabList][_tabListNormal]}function NaviBarWidget_onfocus_tablist(A){var B=getWidget(this);this.className=B.tabCSSTable[_tabList][_tabListHover]}function NaviBarWidget_onblur_tablist(A){var B=getWidget(this);this.className=B.tabCSSTable[_tabList][_tabListNormal]}function NaviBarWidget_kdown_tablist(A){if(eventGetKey(A)==13){NaviBarWidget_click_tablist.apply(this)}}function NaviBarWidget_click_tablist(){var A=getWidget(this);A.buildTabList();var B=NaviBarWidget_TabListonPositionCB.apply(A);A.tabList.show(true,B.x,B.y);A.tabList.resetTooltips()}function NaviBarWidget_TabListonPositionCB(){var B=this;if(!B){return }if(!B.tabList.layer){B.tabList.justInTimeInit()}var A=getPosScrolled(B.tablistLyr);var C=new Object;C.x=Math.max(0,(A.x+23-B.tabList.getWidth()));C.y=(A.y+B.tablistLyr.offsetHeight);return C}function NaviBarWidget_beforeShowTabListCB(){var C=this.navibar;if(!C){return }var A=C.getSelectedTab();if(A){var B=this.getItemByID(A.idx);if(B){B.setTextClass("tabListMenuItem")}}}function NaviBarWidget_remove(I,H){var A=this,G=A.items,F=G.length;if((I>=0)&&(I<F)){var C=G[I];arrayRemove(A,"items",I);G=A.items;F=G.length;var D=C.layer;if(D!=null){if(A.isVert&&A.layer){var K=D.parentNode.parentNode;var B=A.layer.childNodes[0].childNodes[0];B.removeChild(K)}else{if(A.trLyr){A.trLyr.removeChild(D.parentNode)}}if(C.zoneId){var J=getLayer(C.zoneId);if(J){J.parentNode.removeChild(J)}}}for(var E=0;E<F;E++){if(G[E].isSelected){A.selIndex=E;break}}if(H){if(A.selIndex>I){A.cb(A.selIndex-1)}else{if((A.selIndex==I)&&(F>0)){A.cb(Math.min(I,F-1))}}}if(F==0){A.selIndex=null}A.showTabListIcon()}}function NaviBarWidget_removeAll(){var D=this,B=D.items,A=B.length;for(var C=A-1;C>=0;C--){D.remove(C)}}function NaviBarWidget_setTabHTML(A,B){var C=this;if(typeof (A)=="undefined"||A==null){A=C.items.length-1}if(A>=0&&A<=(C.items.length-1)){C.items[A].setHtml(B)}}function NaviBarWidget_getTabHTML(A){var B=this;if(A>=0&&A<=(B.items.length-1)){return B.items[A].getHtml()}return""}function NaviBarWidget_getSelection(){var C=this;if(C.getCount()==0){C.selIndex=-1;return null}var A=C.selIndex;if((A!=null)&&(A>=0)&&C.items[A]){var B=new Object;B.index=A;B.valueOf=C.items[A].value;B.name=C.items[A].name;return B}else{return null}}function NaviBarWidget_getMenu(){return this.menu}function NaviBarWidget_getTabMenu(C){var E=null;var D=this,B=D.items,A=B.length;if((C>=0)&&(C<A)){E=B[C].getMenu();if(!E){E=newMenuWidget(("naviTabMenu_"+D.id+"_"+D.getTabID(C)),null,D.beforeShowTabMenu);B[C].setMenu(E)}}return E}function NaviBarWidget_setShowContextMenuAllowed(A){this.showContextMenuAllowed=A}function NaviBarWidget_showMenu(A){if(this.showContextMenuAllowed==false){return }A=getEvent(A);this.menu.show(true,(eventGetX(A)+winScrollX()),(eventGetY(A)+winScrollY()))}function NaviBarWidget_showTabMenu(A,C){if(this.showContextMenuAllowed==false){return }A=getEvent(A);var B=this.getBarIndex(C);var D=this.items[B].getMenu();if(D){D.show(true,(eventGetX(A)+winScrollX()),(eventGetY(A)+winScrollY()))}}function NaviBarWidget_showTab(D,B){var E=this,C=E.items,A=C.length;if((D>=0)&&(D<A)){C[D].show(B)}}function NaviBarWidget_showTabListIcon(){var A=this;if(A.tablistLyr){A.tablistLyr.style.visibility=(A.items.length>1)?_show:_hide}}function NaviBarWidget_tabListMenuItemsCB(){var B=this.par.navibar;if(!B){return }var A=B.getBarIndex(parseInt(this.id));if((A>=0)&&(A<B.items.length)&&B.divLyr&&B.tabList){B.onChangeTabList(A);B.select(A);if(B.cb){B.cb(A)}}}function NaviBarWidget_onChangeTabList(C){if(C<0){C=0}var B=this;var H=B.items,F=H.length;if(!B.divLyr||!B.trLyr||!B.tabList||!F){return }var G=C;var E=C;var I=C;var A=B.divLyr.offsetWidth;var D=H[C].getWidth();if(B.trLyr.offsetWidth>B.divLyr.offsetWidth){if(D<A){while(true){G++;if(G<F){if((H[G].getWidth()+D)<A){D+=H[G].getWidth()}else{break}}E--;if(E>=0){if((H[E].getWidth()+D)<A){D+=H[E].getWidth();I=E}else{break}}}}}else{I=0}if(I>=0){B.divLyr.scrollLeft=B.getItemXPos(I)}}function NaviBarWidget_buildTabList(){var D=this;var B=D.items,A=B.length;D.tabList.removeAll();for(var C=0;C<A;C++){D.tabList.add((""+B[C].idx),B[C].name,NaviBarWidget_tabListMenuItemsCB)}}function NaviBarWidget_resize(A,B){var C=this;if(C.isVert){return }C.oldResize(A);if(A!=null){C.w=A;if(C.divLyr){if(C.tabList){A=Math.max((A-_tabListIconWidth),_horizBarWidth)}else{if(C.showScrollBar!=_noScrollBar){A=Math.max(C.w-_scrollBarWidth,_horizBarWidth)}}C.divLyr.style.width=""+A+"px"}C.onChangeTabList(C.selIndex)}}function NaviBarWidget_contextMenuCB(A){A=getEvent(A);var B=getWidget(this);if(B.cb){B.cb()}if(B.showMenu){B.showMenu(A)}return false}function NaviBarWidget_getTabIndexByName(C){var E=this,B=E.items,A=B.length;for(var D=0;D<A;D++){if(B[D].name==C){return D}}return -1}function NaviBarWidget_getTabIndexByValue(D){var E=this,B=E.items,A=B.length;for(var C=0;C<A;C++){if(B[C].value==D){return C}}return -1}function NaviBarWidget_getTabID(A){var C=this,B=C.items;if((A!=null)&&(A>=0)&&(A<B.length)){return B[A].idx}return null}function NaviBarWidget_getTab(B){var C=this,A=C.items;if((B!=null)&&(B>=0)&&(B<A.length)){return A[B]}return null}function NaviBarWidget_findTabIndex(D){var E=this,B=E.items,A=B.length;for(var C=0;C<A;C++){if(D==B[C]){return C}}return -1}function NaviBarWidget_getSelectedTab(){var B=this;var A=B.getSelection();if(A){return B.getTab(A.index)}return null}_trIndent=18;function newTreeWidget(A,I,D,K,M,C,G,L,H,F,J,E){var B=newScrolledZoneWidget(A,2,4,I,D,G);B.icns=K;B.sub=new Array;B.clickCB=M;B.doubleClickCB=C;B.expandCB=L;B.collapseCB=H;B.deleteCB=F;B.minIcon=J;B.plusIcon=E;B.mouseOverCB=null;B.rightClickMenuCB=null;B.mouseOverTooltip=false;B.dragDrop=null;B.oldInit=B.init;B.init=TreeWidget_init;B.getHTML=TreeWidget_getHTML;B.getSelections=TreeWidget_getSelections;B.getSelectedItem=TreeWidget_getSelectedItem;B.getSelectedItems=TreeWidget_getSelectedItems;B.getCheckedItems=TreeWidget_getCheckedItems;B.setDragDrop=TreeWidget_setDragDrop;B.setFocus=TreeWidget_setFocus;B.add=TreeWidget_add;B.setRightClickMenuCB=TreeWidget_setRightClickMenuCB;B.findByData=TreeWidget_findByData;B.findById=TreeWidget_findById;B.selectByData=TreeWidget_selectByData;B.selectById=TreeWidget_selectById;B.unselect=TreeWidget_unselect;B.treeLyr=null;B.elems=new Array;B.elemCount=0;B.selId=-1;B.selIds=new Array;B.multiSelection=false;B.hlPath=false;B.hlElems=new Array;B.iconOrientVertical=true;B.deleteAll=TreeWidget_deleteAll;B.rebuildHTML=TreeWidget_rebuildHTML;B.iconW=16;B.iconH=16;B.initialIndent=0;B.buildElems=TreeWidget_buildElems;B.getCount=TreeWidget_getCount;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}B.dispIcnFuncName="dispIcn";B.setTooltipOnMouseOver=TreeWidget_setTooltipOnMouseOver;B.setMouseOverCB=TreeWidget_setMouseOverCB;B.setMultiSelection=TreeWidget_setMultiSelection;B.setHighlightPath=TreeWidget_setHighlightPath;B.highlightPath=TreeWidget_highlightPath;B.unhlPath=TreeWidget_unhlPath;return B}function TreeWidget_unselect(){var D=this;if(D.selId>=0){var C=_TreeWidgetElemInstances[D.selId];C.unselect();D.selId=-1}if(D.multiSelection){var A=D.selIds.length,E;for(var B=A-1;B>=0;B--){var C=_TreeWidgetElemInstances[D.selIds[B]];if(C){C.unselect()}}D.selIds.length=0;D.layer._BOselIds=""}D.unhlPath()}function TreeWidget_selectByData(C,A){var D=this,B=D.findByData(C);if(B){B.select(A)}}function TreeWidget_selectById(D,A){var C=this,B=C.findById(D);if(B){B.select(A)}}function TreeWidget_findByData(D){var E=this,B=E.sub,C=null;for(var A in B){C=B[A].findByData(D);if(C){return C}}return null}function TreeWidget_findById(E){var D=this,B=D.sub,C=null;for(var A in B){C=B[A].findById(E);if(C){return C}}return null}function TreeWidget_add(D,B){var E=this,C=E.sub,A=C.length;D.treeView=E;C[A]=D;D.expanded=(A==0);if(B){D.extraIndent=B}return D}function TreeWidget_getHTML(){var F=this,E=F.sub,A=E.length,B=new Array(A+3),C=0;B[C++]=F.beginHTML()+'<span id="treeCont_'+F.id+'"  >';for(var D in E){B[C++]=E[D].getHTML(F.initialIndent,D==0)}B[C++]="</span>"+F.endHTML();return B.join("")}function TreeWidget_deleteAll(){var B=this.sub;for(var A in B){B[A].deleteAll();B[A]=null}B.length=0;if(this.elems){this.elems.length=0}}function TreeWidget_rebuildHTML(){var G=this,F=G.sub,A=F.length,B=new Array(A),C=0,E=G.initialIndent;for(var D in F){B[C++]=F[D].getHTML(E,D==0)}G.treeLyr.innerHTML=B.join("");G.selId=-1;G.layer._BOselId=-1;G.selIds.length=0;G.layer._BOselIds="";this.buildElems()}function TreeWidget_init(){this.oldInit();var B=this.treeLyr=getLayer("treeCont_"+this.id);if(this.dragDrop){this.dragDrop.attachCallbacks(this.layer)}var A=this.layer._BOselId;if(A!=null){this.selId=A}var D=this.layer._BOselIds;if(D!=null&&D!=""){this.selIds.length=0;this.selIds=D.split(";")}var C=this.sub}function TreeWidget_buildElems(elem){with(this){if(elem==null){elem=this}else{var pos=elems.length;elems[pos]=elem;elem.elemPos=pos}var subArr=elem.sub,len=subArr.length;for(var i=0;i<len;i++){buildElems(subArr[i])}}}function TreeWidget_getSelectedItem(){var A=this.selId;return(A>=0)?_TreeWidgetElemInstances[A]:null}function TreeWidget_getSelections(){var C=this;if(C.multiSelection){return C.getSelectedItems()}else{var A=C.getSelectedItem(),B=new Array;if(A!=null){B[0]=A}return B}}function TreeWidget_setFocus(A){var B=_TreeWidgetElemInstances[A];if(B!=null){B.init();safeSetFocus(B.domElem)}}function TreeWidget_setDragDrop(C,B,A,D){this.dragCB=C;this.acceptDropCB=B;this.dropCB=A;this.dragEndCB=D;this.dragDrop=newDragDropData(this,TreeWidget_dragStartCB,TreeWidget_dragCB,TreeWidget_dragEndCB,TreeWidget_acceptDropCB,TreeWidget_leaveDropCB,TreeWidget_dropCB)}function TreeWidget_dragStartCB(E){var C=E.getSelections(),B=E.iconOrientVertical;E.dragCB(E);if(C&&C.length==1){var D=C[0];var A=D.iconId;newTooltipWidget().show(true,D.getDragTooltip(),A>=0?E.icns:null,E.iconW,E.iconH,B?0:E.iconW*A,B?E.iconH*A:0)}}function TreeWidget_setRightClickMenuCB(A){this.rightClickMenuCB=A}function TreeWidget_getCount(){var A=this;if(A.sub!=null){return A.sub.length}else{return 0}}function TreeWidget_setTooltipOnMouseOver(A){this.mouseOverTooltip=A}function TreeWidget_setMouseOverCB(A){this.mouseOverCB=A}function TreeWidget_dragCB(A){newTooltipWidget().setPos()}function TreeWidget_dragEndCB(A){newTooltipWidget().show(false);if(A.dragEndCB){A.dragEndCB()}}function TreeWidget_dragOverEnterCB(A,D){var B=_TreeWidgetElemInstances[D];if(A.ondrop==null){B.treeView.dragDrop.attachCallbacks(A,true);A.domEltID=D}var C=_ddData[A._dragDropData],B=_curWin.event;B.dataTransfer.dropEffect=B.ctrlKey?"copy":"move";if(C.acceptDropCB(window._globalDDD,C.widget,B.ctrlKey,B.ctrlKey?false:B.shiftKey,A,false)){B.returnValue=false}B.cancelBubble=true}function TreeWidget_acceptDropCB(E,D,C,A,B){return D.acceptDropCB(E,D,C,A,B)}function TreeWidget_leaveDropCB(D,C,B,A){if(C.dropWidget&&C.dropWidget.layer){if(C.dropWidget.layer.className!=C.dropWidget.nonselectedClass){C.dropWidget.layer.className=C.dropWidget.nonselectedClass}}}function TreeWidget_dropCB(F,D,C,A,B,E){newTooltipWidget().show(false);D.dropCB(F,D,C,A)}function TreeWidget_setMultiSelection(A){if((!this.multiSelection&&A)||(this.multiSelection&&!A)){this.unselect()}this.multiSelection=A}function TreeWidget_getSelectedItems(){var D=new Array;var A=this.selIds.length,E,C=0;for(var B=0;B<A;B++){E=this.selIds[B];if(E>=0){D[C]=_TreeWidgetElemInstances[E];C++}}return D}function TreeWidget_getCheckedItems(){var C=new Array;var A=_TreeWidgetElemInstances.length,D=0;for(var B=0;B<A;B++){elem=_TreeWidgetElemInstances[B];if(elem.isChecked()){C[D]=elem;D++}}return C}function TreeWidget_setHighlightPath(A){this.hlPath=A;if(!A){this.unhlPath()}}function TreeWidget_unhlPath(){var D=this,A=D.hlElems.length;var C,E;if(A>0){for(var B=0;B<A;B++){C=D.hlElems[B];C.init();E=C.domElem;if(E==null){return }if(C.isSelected()){E.className=C.selectedClass}else{E.className=C.nonselectedClass}}D.hlElems.length=0}}function TreeWidget_highlightPath(D){var C=this;if(!C.hlPath){return }C.unhlPath();var A=_TreeWidgetElemInstances[D];C.hlElems[C.hlElems.length]=A;A.domElem.className=A.selectedClass;if(A.elemPos==-1){C.buildElems()}var B=A.par;while(B){B.init();B.domElem.className=B.hlClass;C.hlElems[C.hlElems.length]=B;B=B.par}if(A.isNode()){hlVisibleChildren(A,C.hlElems)}}function hlVisibleChildren(E,B){if(E.expanded&&!E.isIncomplete){var A=E.sub.length;for(var C=0;C<A;C++){var D=E.sub[C];B[B.length]=D;D.init();D.domElem.className=D.hlClass;if(D.isNode()){hlVisibleChildren(D,B)}}}}function newTreeWidgetElem(H,A,B,E,I,K,F,J,G,D){var C=new Object;C.elemPos=-1;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}C.enableDoubleClick=D;C.expanded=false;C.generated=false;C.iconId=H;C.iconSelId=I?I:H;C.tooltip=K;C.customTooltip=false;C.iconAlt=F;C.isHTML=false;C.isCheck=false;C.checked=false;C.check=TreeWidgetElem_check;C.isChecked=TreeWidgetElem_isChecked;C.checkCB=null;C.name=A;C.par=null;C.userData=B;C.sub=new Array;C.treeView=null;C.id=_TreeWidgetElemInstances.length;C.layer=null;C.plusLyr=null;C.icnTooltipLyr=null;C.icnLyr=null;C.checkElem=null;C.domElem=null;C.txtTooltipLyr=null;C.toggleLyr=null;C.blackTxt=(J)?J:"treeNormal";C.grayTxt="treeGray";C.selectedClass=(G)?G:"treeSelected";C.nonselectedClass=C.blackTxt;C.feedbackDDClass="treeFeedbackDD";C.hlClass="treeHL";C.cursorClass=null;C.help=E;_TreeWidgetElemInstances[C.id]=C;C.getHTML=TreeWidgetElem_getHTML;C.init=TreeWidgetElem_init;C.add=TreeWidgetElem_add;C.select=TreeWidgetElem_select;C.unselect=TreeWidgetElem_unselect;C.getNextPrev=TreeWidgetElem_getNextPrev;C.getHiddenParent=TreeWidgetElem_getHiddenParent;C.nodeIndent=0;C.getTooltip=TreeWidgetElem_getTooltip;C.getDragTooltip=TreeWidgetElem_getDragTooltip;C.deleteAll=TreeWidget_deleteAll;C.setGrayStyle=TreeWidgetElem_setGrayStyle;C.isGrayStyle=TreeWidgetElem_isGrayStyle;C.findByData=TreeWidgetElem_findByData;C.findById=TreeWidgetElem_findById;C.isIncomplete=false;C.querycompleteCB=null;C.setIncomplete=TreeWidgetElem_setIncomplete;C.finishComplete=TreeWidgetElem_finishComplete;C.setEditable=TreeWidgetElem_setEditable;C.isLeaf=TreeWidgetElem_isLeaf;C.isNode=TreeWidgetElem_isNode;C.isSelected=TreeWidgetElem_isSelected;C.htmlWritten=false;C.showCustomTooltipCB=null;C.hideCustomTooltipCB=null;C.setCursorClass=TreeWidgetElem_setCursorClass;return C}function TreeWidgetElem_checkCB(A,C){var B=_TreeWidgetElemInstances[C];B.checked=A.checked;if(B.checkCB){B.checkCB(B,C)}}function TreeWidgetElem_isChecked(){var A=this;return(A.isCheck?A.checked:false)}function TreeWidgetElem_check(A){var B=this;if(B.isCheck){B.checked=A;if(B.htmlWritten){B.init();B.checkElem.checked=A}}}function TreeWidgetElem_EditNormalBehaviour(A){eventCancelBubble(A);return true}function TreeWidgetElem_EditBlurCB(){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}_globTreeTxtvalue="";function TreeWidgetElem_EditKeyDown(B){eventCancelBubble(B);var A=eventGetKey(B),C=_TreeWidgetElemInstances[this.widID];if(A==27){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}else{if(A==13){_globTreeTxtvalue=this.value;setTimeout("TreeWidgetElem_EditKeyAccept("+this.widID+")",1)}}}function TreeWidgetElem_EditKeyCancel(B){var A=_TreeWidgetElemInstances[B];A.showEditInput(false)}function TreeWidgetElem_EditKeyAccept(B){var A=_TreeWidgetElemInstances[B];if(A.validChangeNameCB){if(A.validChangeNameCB(_globTreeTxtvalue)==false){return }}A.change(null,_globTreeTxtvalue);A.showEditInput(false);if(A.changeNameCB){A.changeNameCB()}}function TreeWidgetElem_setEditable(A,D,B){var C=this;if(A){C.changeNameCB=D;C.validChangeNameCB=B}C.isEditable=A}function TreeWidgetElem_triggerDD(){var D=_treeWClickedW,C=_curWin.event;if(D&&(D.clicked)&&(C.button==_leftBtn)){if(D.initialX!=null){var B=eventGetX(C),E=eventGetY(C),A=3;if((B<(D.initialX-A))||(B>(D.initialX+A))||(E<(D.initialY-A))||(E>(D.initialY+A))){this.dragDrop();D.clicked=false}}}}function TreeWidgetElem_mouseUp(){var B=_treeWClickedW,A=_curWin.event;B.select(null,A);B.domElem.onmouseup=null}function TreeWidgetElem_init(C){var G=this;if(G.layer==null){var D=G.sub,A=D.length,F=(A>0)||G.isIncomplete;G.layer=C?C:getLayer(_codeWinName+"TWe_"+G.id);if(G.layer==null){return }var H=G.layer.childNodes,E=H.length;G.plusLyr=F?H[0].childNodes[1]:null;G.icnTooltipLyr=F?H[0].childNodes[0]:null;G.icnLyr=(G.iconId>-1)?H[F?1:0]:null;G.checkElem=G.isCheck?H[E-2]:null;G.domElem=H[E-1];G.txtTooltipLyr=H[E-1].childNodes[1];if(G.layer.nextSibling&&G.layer.nextSibling.id==_codeWinName+"trTog"+G.id){G.toggleLyr=G.layer.nextSibling}if(G.treeView.mouseOverTooltip||G.treeView.mouseOverCB){G.domElem.onmouseout=TreeFuncMouseout}if(F){addDblClickCB(G.plusLyr,_tpdb)}if(F&&G.generated){for(var B in D){D[B].init()}}if(G.enableDoubleClick){addDblClickCB(G.domElem,_tpdb)}}}function TreeIdToIdx(B){if(B){var C=B.id;if(C){var A=C.lastIndexOf("TWe_");if(A>=0){return parseInt(C.slice(A+4))}else{return -1}}else{return TreeIdToIdx(B.parentNode)}}return -1}function TreeFuncMouseout(A){_tmoc(this,TreeIdToIdx(this),false,A)}function _tmvc(A,B){_tmoc(A,TreeIdToIdx(A),true,B)}function _tpl(A,B){TreeWidget_clickCB(TreeIdToIdx(A),true,B,true);return false}function _tkl(A,C){var B=eventGetKey(C);if(B==13){return _tpl(A,C)}}function _tkt(A,C){var B=eventGetKey(C);if(B==13){return _tpt(A,C)}}function _tpt(A,B){TreeWidget_clickCB(TreeIdToIdx(A),false,B,true);return false}function _tpdb(A){treeDblClickCB(TreeIdToIdx(this),_ie?event:A);return false}function _tfcc(A,B){treeFCCB(A,TreeIdToIdx(A),true,B);A.onblur=_tblc}function _tblc(A){treeFCCB(this,TreeIdToIdx(this),false,A)}function TreeWidgetElem_getHTML(indent,isFirst){var s="";with(this){htmlWritten=true,isRoot=(par==null);var len=sub.length,exp=(len>0)||isIncomplete,a=new Array,i=0;if(this.extraIndent){indent+=_trIndent*extraIndent}var keyCB='onkeydown=" return '+_codeWinName+'._tkt(this,event)" ';var mouseCB='onclick="return '+_codeWinName+'._tpt(this,event)" ';if(treeView.mouseOverTooltip||treeView.mouseOverCB){mouseCB+='onmouseover="'+_codeWinName+'._tmvc(this,event)" '}var contextMenu="";if(treeView.rightClickMenuCB!=null){contextMenu=' oncontextmenu="'+_codeWinName+".treeContextMenuCB('"+id+"', event);return false\" "}var acceptDD="";if((treeView.acceptDropCB!=null)&&(_ie)){acceptDD=' ondragenter="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" ";acceptDD+=' ondragover="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" "}a[i++]='<div id="'+_codeWinName+"TWe_"+id+'"'+contextMenu+" class=trElt>";var onkeydown='onkeydown="return '+_codeWinName+'._tkl(this,event)" ';var onclick='onclick="return '+_codeWinName+'._tpl(this,event)" ';if(exp){var expIcon;var iconTooltip;if(expanded){if(treeView.minIcon!=null){expIcon=treeView.minIcon}else{expIcon=_skin+"../min.gif"}iconTooltip=_collapseNode.replace("%1",name)}else{if(treeView.plusIcon!=null){expIcon=treeView.plusIcon}else{expIcon=_skin+"../plus.gif"}iconTooltip=_expandNode.replace("%1",name)}a[i++]="<a tabindex=0 "+onclick+" "+onkeydown+' href="javascript:doNothing();" role="link"><span style="display:none">'+iconTooltip+'</span><img class=trPlus src="'+expIcon+'"/></a>'}if(iconId>-1){var iconClass="trIcn"+(exp||isRoot?"Plus":"");if(this.cursorClass){iconClass+=" "+this.cursorClass}a[i++]="<img tabindex=0 "+mouseCB+" "+keyCB+'class="'+iconClass+'" '+attr("src",_skin+"../transp.gif")+attr("alt",iconAlt)+' align=top style="'+backImgOffset(treeView.icns,(treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId)),(treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0))+'" >'}else{if(!exp&&!isRoot){a[i++]="<img tabindex=-1 class=trSep "+attr("src",_skin+"../transp.gif")+">"}}if(isCheck){a[i++]='<input type=checkbox style="margin:0px;" onclick="'+_codeWinName+".TreeWidgetElem_checkCB(this,'"+id+"')\""+(this.checked?" checked":"")+">"}var textClass=nonselectedClass;if(this.cursorClass){textClass+=" "+this.cursorClass}var textTooltip=this.getTooltip();a[i++]='<a href="javascript:doNothing();" '+mouseCB+" "+keyCB+" tabindex=0 "+acceptDD+' class="'+textClass+'" role="link">';a[i++]=(isHTML?name:convStr(name));a[i++]='<span style="display:none">'+textTooltip+"</span>";a[i++]="</a>";a[i++]="</div>";if(exp){a[i++]='<div id="'+_codeWinName+"trTog"+id+'" style="margin-left:18px;display:'+(expanded?"":"none")+'">'}if(expanded){generated=true;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(0,j==0)}}if(exp){nodeIndent=indent;a[i++]="</div>"}}return a.join("")}function TreeWidgetElem_setGrayStyle(B){var C=this,A=B?C.grayTxt:C.blackTxt;if(A!=C.nonselectedClass){C.nonselectedClass=A;C.init();if(C.domElem&&(C.domElem.className!=C.selectedClass)){C.domElem.className=A}}}function TreeWidgetElem_isGrayStyle(){return this.nonselectedClass==this.grayTxt}function TreeWidgetElem_setIncomplete(A){this.isIncomplete=true;this.querycompleteCB=A}function TreeWidgetElem_finishComplete(){this.isIncomplete=false;TreeWidget_toggleCB(this.id);this.treeView.buildElems()}function TreeWidgetElem_findByData(D){var E=this;if(E.userData==D){return E}var B=E.sub;for(var A in B){var C=B[A].findByData(D);if(C!=null){return C}}return null}function TreeWidgetElem_findById(E){var D=this;if(D.id==E){return D}var B=D.sub;for(var A in B){var C=B[A].findById(E);if(C!=null){return C}}return null}function treeInitDropFunc(A,C){var B=_TreeWidgetElemInstances[C];if(A.ondrop==null){B.treeView.dragDrop.attachCallbacks(A,true);A.domEltID=C}}function TreeWidget_toggleCB(D,B){var C=_TreeWidgetElemInstances[D];if(C.sub.length==0){C.plusLyr.style.visibility="hidden";return }C.expanded=!C.expanded;C.init();if(B){dispIcn(D)}else{setTimeout(C.treeView.dispIcnFuncName+"("+D+")",1)}var A=C.treeView;if(C.expanded&&A.expandCB){A.expandCB(C.userData)}if(!C.expanded&&A.collapseCB){A.collapseCB(C.userData)}}function dispIcn(eId){var e=_TreeWidgetElemInstances[eId];with(e){if(expanded&&!generated){generated=true;var a=new Array,i=0,len=sub.length,newInd=nodeIndent+_trIndent;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(newInd,j==0)}toggleLyr.innerHTML=a.join("")}toggleLyr.style.display=expanded?"block":"none";if(expanded){if(treeView.minIcon!=null){plusLyr.src=treeView.minIcon}else{plusLyr.src=_skin+"../min.gif"}}else{if(treeView.plusIcon!=null){plusLyr.src=treeView.plusIcon}else{plusLyr.src=_skin+"../plus.gif"}}var tooltip=expanded?_collapseNode:_expandNode;tooltip=tooltip.replace("%1",name);icnTooltipLyr.innerHTML=tooltip;txtTooltipLyr.innerHTML=getTooltip();if(icnLyr&&icnLyr.childNodes&&icnLyr.childNodes.length>1){var iconL=icnLyr.childNodes[1];changeOffset(iconL,treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId),treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0)}}}function TreeWidgetElem_add(elem){with(this){elem.treeView=treeView;elem.par=this;sub[sub.length]=elem}return elem}function TreeWidgetElem_getHiddenParent(){var A=this.par;if(A==null){return null}if(!A.expanded){return A}return ;A.getHiddenParent()}function TreeWidgetElem_getNextPrev(delta){with(this){if(elemPos==-1){treeView.buildElems()}var newPos=elemPos+delta;if((newPos>=0)&&(newPos<treeView.elems.length)){var ret=treeView.elems[newPos];var hidden=ret.getHiddenParent();if(hidden!=null){return ret.getNextPrev(delta)}else{return ret}}else{return null}}}function TreeWidgetElem_scroll(E,A){var C=Math.max(0,A.offsetHeight-20),F=A.scrollTop;var B=getPos(E,A);var G=B.offsetTop,D=E.offsetHeight;if((G-F+D)>C){A.scrollTop=G+D-C}if((G-F)<0){A.scrollTop=G}}function TreeWidgetElem_unselect(){var o=this;with(o){init();if(domElem){domElem.className=o.nonselectedClass}treeView.selId=-1;if(treeView.multiSelection){var idx=arrayFind(treeView,"selIds",id);if(idx>-1){arrayRemove(treeView,"selIds",idx);treeView.layer._BOselIds="";var len=treeView.selIds.length;for(var i=0;i<len;i++){if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+treeView.selIds[i]}else{treeView.layer._BOselIds+=";"+treeView.selIds[i]}}}}}}function TreeWidgetElem_select(setFocus,ev,noSendClickCB,isFromKeybArrow){var coll=new Array;var par=this.par;while(par){if(!par.expanded){coll[coll.length]=par}par=par.par}var cLen=coll.length;for(var i=cLen-1;i>=0;i--){TreeWidget_toggleCB(coll[i].id,true)}if(cLen>0){this.select(setFocus,ev,noSendClickCB,isFromKeybArrow)}if(this.treeView.multiSelection){TreeWidgetElem_multiSelect(this,setFocus,ev,noSendClickCB,isFromKeybArrow);return }if(noSendClickCB==null){noSendClickCB=false}with(this){if(treeView.selId!=id){if(treeView.selId>=0){var prev=_TreeWidgetElemInstances[treeView.selId];prev.init();if(prev.domElem){prev.domElem.className=prev.nonselectedClass}}treeView.selId=id;init();treeView.layer._BOselId=id;var de=domElem;if(de==null){return }if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}if(setFocus){safeSetFocus(de)}TreeWidgetElem_scroll(de,treeView.layer)}if((treeView.clickCB)&&(!noSendClickCB)){treeView.clickCB(userData,isFromKeybArrow!=null?isFromKeybArrow:false)}}}_startShift=null;function TreeWidgetElem_multiSelectCtrl(){}function TreeWidget_clickCB(E,C,B,A){eventCancelBubble(B);var D=_TreeWidgetElemInstances[E];if(D==null){return }D.init();if(C&&(D.sub.length>0)){TreeWidget_toggleCB(E)}else{if(C&&D.isIncomplete&&D.querycompleteCB){D.querycompleteCB()}else{D.select(null,B)}}if(_curDoc.onmousedown){_curDoc.onmousedown(B)}if(A&&_ie){window._treeWClickedW=D;D.init();D.clicked=true;D.initialX=eventGetX(B);D.initialY=eventGetY(B);if(_ie&&D.domElem){D.domElem.onmousemove=TreeWidgetElem_triggerDD}}if(_moz&&D.domElem){setTimeout("_TreeWidgetElemInstances["+E+"].domElem.focus()",1)}return false}function treeDblClickCB(D,B){eventCancelBubble(B);var C=_TreeWidgetElemInstances[D],A=C.treeView;if(C.sub.length>0){TreeWidget_toggleCB(D)}else{if(C.isIncomplete&&C.querycompleteCB){C.querycompleteCB();return }}if(C.isEditable){C.showEditInput(true)}else{if(A.doubleClickCB){A.doubleClickCB(C.userData)}}}function TreeWidgetElem_UpdateTooltip(A,B){var C=_TreeWidgetElemInstances[A];if(C){C.init();if(C.domElem!=null){C.domElem.title=C.getTooltip(B)}}}function TreeWidgetElem_getDragTooltip(){var A=this;if(A.obj&&A.obj.getDragTooltip){return A.obj.getDragTooltip()}return A.name}function TreeWidgetElem_getTooltip(A){var C="",D=this;var B=false;if(D.treeView.multiSelection){B=(arrayFind(D.treeView,"selIds",D.id)>-1)}else{B=(D.treeView.selId==D.id)}if(A||B){C=_selectedLab+" "}if((D.sub.length>0)||(D.isIncomplete)){if(D.expanded){C+=" "+_expandedLab+" "}else{C+=" "+_collapsedLab+" "}}if(D.advTooltip){C+=" ("+D.advTooltip+")"}if(D.getLevel){C+=" ("+_level+" "+D.getLevel()+")"}return C}function treeFCCB(D,E,A,C){var B=_TreeWidgetElemInstances[E];if((B==null)||B.treeView.mouseOverTooltip){return }if(A){if(B.customTooltip&&B.showCustomTooltipCB){B.showCustomTooltipCB(B.userData,C);B.init()}else{D.title=B.getTooltip()}}else{if(B.customTooltip&&B.hideCustomTooltipCB){B.hideCustomTooltipCB()}else{D.title=""}}}function _tmoc(D,E,C,B){D.style.cursor=_hand;var A=_TreeWidgetElemInstances[E];if(A==null){return }if(A.treeView.mouseOverTooltip){if(C){if(A.customTooltip&&A.showCustomTooltipCB){A.showCustomTooltipCB(A.userData,B);A.init()}else{D.title=A.tooltip?A.tooltip:""}}else{if(A.customTooltip&&A.hideCustomTooltipCB){A.hideCustomTooltipCB()}else{D.title=""}}}if(A.treeView.mouseOverCB){A.treeView.mouseOverCB(A)}}function treeContextMenuCB(C,B){var A=_TreeWidgetElemInstances[C];if(A){A.treeView.rightClickMenuCB(C,_ie?_curWin.event:B)}}function TreeWidgetElem_isLeaf(){return(this.sub.length==0&&!this.isIncomplete)}function TreeWidgetElem_isNode(){return(!this.isLeaf())}function TreeWidgetElem_isSelected(){var B=this;if(B.treeView.multi){var A=arrayFind(B.treeView,"selIds",B.id);return(A>=0)}else{return(B.id==B.treeView.selId)}}function TreeWidgetElem_setCursorClass(A){this.cursorClass=A}if(window._DHTML_LIB_DIALOG_JS_LOADED==null){_DHTML_LIB_DIALOG_JS_LOADED=true;DialogBoxWidget_modals=new Array;DialogBoxWidget_instances=new Array;DialogBoxWidget_current=null;_promptDlgInfo=0;_promptDlgWarning=1;_promptDlgCritical=2;_dlgTitleLBorderToTxt=20;_dlgTitleHeight=25;_dlgTitleMarginBottom=4;_dlgTitleRBorderToClose=10;_dlgTitleCloseBtnImgFile="dialogtitle.gif";_dlgTitleCloseBtnW=11;_dlgTitleCloseBtnH=10;_dlgTitleCloseBtnDy=26;_dlgTitleCloseBtnHoverDy=37;_dlgBottomMargin=14}function newDialogBoxWidget(A,F,B,H,I,G,E,D){var C=newWidget(A);C.title=F;C.width=B;C.height=H;C.defaultCB=I;C.cancelCB=G;C.noCloseButton=E?E:false;C.isAlert=D;C.closeCB=null;C.resizeable=false;C.oldMouseDown=null;C.oldCurrent=null;C.modal=null;C.hiddenVis=new Array;C.lastLink=null;C.firstLink=null;C.titleLayer=null;C.defaultBtn=null;C.divLayer=null;C.oldInit=C.init;C.oldShow=C.show;C.init=DialogBoxWidget_init;C.setResize=DialogBoxWidget_setResize;C.beginHTML=DialogBoxWidget_beginHTML;C.endHTML=DialogBoxWidget_endHTML;C.show=DialogBoxWidget_Show;C.center=DialogBoxWidget_center;C.focus=DialogBoxWidget_focus;C.setTitle=DialogBoxWidget_setTitle;C.getContainerWidth=DialogBoxWidget_getContainerWidth;C.getContainerHeight=DialogBoxWidget_getContainerHeight;DialogBoxWidget_instances[A]=C;C.modal=newWidget("modal_"+A);C.placeIframe=DialogBoxWidget_placeIframe;C.oldResize=C.resize;C.resize=DialogBoxWidget_resize;C.attachDefaultButton=DialogBoxWidget_attachDefaultButton;C.unload=DialogBoxWidget_unload;C.close=DialogBoxWidget_close;C.setCloseCB=DialogBoxWidget_setCloseCB;C.setNoCloseButton=DialogBoxWidget_setNoCloseButton;if(!_ie){if(C.width!=null){C.width=Math.max(0,B+4)}if(C.height!=null){C.height=Math.max(0,H+4)}}return C}function DialogBoxWidget_setResize(A,C,D,B,F){var E=this;E.resizeable=true;E.resizeCB=A;E.minWidth=C?C:50;E.minHeight=D?D:50;E.noResizeW=B;E.noResizeH=F}function DialogBoxWidget_setTitle(B){var A=this;A.title=B;if(A.titleLayer==null){A.titleLayer=getLayer("titledialog_"+this.id)}A.titleLayer.innerHTML=convStr(B)}function DialogBoxWidget_setCloseIcon(A,B){changeOffset(A,0,(B==1?0:18))}function DialogBoxWidget_beginHTML(){with(this){var moveableCb=' onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".DialogBoxWidget_down(event,'"+id+"',this,false);return false;\" ";var titleBG="background-image:url("+_skin+"dialogtitle.gif)";var mdl='<div onselectstart="return false" onmouseup="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+'\');" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+id+'" style="background-color:#888888;opacity:0.3;filter:alpha(opacity:30);position:absolute;top:0px;left:0px;width:1px;height:1px">'+(_ie?img(_skin+"../transp.gif","100%","100%",null):"")+"</div>";var btn="";if(_dtd4){btn='<td style="padding-right:'+_dlgTitleRBorderToClose+'px"><div id="dialogClose_'+id+'" class="dlgCloseBtn" title="'+_closeDialog+'"></div></td>'}else{btn='<td style="padding-right:'+_dlgTitleRBorderToClose+'px">'+simpleImgOffset(_skin+_dlgTitleCloseBtnImgFile,_dlgTitleCloseBtnW,_dlgTitleCloseBtnH,0,_dlgTitleCloseBtnDy,"dialogClose_"+id,null,_closeDialog)+"</td>"}var closeBtn='<td class="dlgCloseArea" align="left" valign="middle"><table border="0" cellspacing="0" cellpadding="0"><tbody><tr style="height:'+_dlgTitleHeight+'px">'+btn+"</tr></tbody></table></td>";var dlgtitle='<table style="height:'+_dlgTitleHeight+'" class="dlgTitle" width="100%"  border="0" cellspacing="0" cellpadding="0"><tr valign="top" style="height:'+_dlgTitleHeight+'px"><td '+moveableCb+' style="cursor:move;padding-left:'+_dlgTitleLBorderToTxt+'px;" width="100%" valign="middle" align="left"><nobr><span id="titledialog_'+id+'" tabIndex="0" class="titlezone">'+convStr(title)+"</span></nobr></td>"+closeBtn+"</tr></table>";var s="";s=mdl;var dims=sty("width",width?(""+width+"px"):null)+sty("height",height?(""+Math.max(0,height+(_moz?-2:0))+"px"):null);s+='<button style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="firstLink_'+this.id+'" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+"');return false;\" ></button>";s+='<table border="0" cellspacing="0" cellpadding="0" id="'+id+'" style="display:none;padding:0px;visibility:'+_hide+";position:absolute;top:-2000px;left:-2000px;"+dims+'" '+(isAlert?'role="alertdialog"':'role="dialog"')+">";s+="<tr><td "+(_moz?'style="'+dims+'" ':"")+'class="dialogbox" id="td_dialog_'+id+'" onresize="'+_codeWinName+".DialogBoxWidget_resizeIframeCB('"+id+'\',this)"  valign="top">';s+='<table class="dlgBox2" width="100%" border="0" cellspacing="0" cellpadding="0"><tbody>';s+='<tr><td height="'+_dlgTitleHeight+'" valign="top">'+dlgtitle+"</td></tr>";s+='<tr><td class="dlgBody" valign="top" id="div_dialog_'+id+'">';return s}}function DialogBoxWidget_endHTML(){var A="</td></tr>";A+='<tr><td style="height:'+_dlgBottomMargin+'px;"></td></tr>';A+="</tbody></table>";A+="</td></tr></table>";A+='<button style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="lastLink_'+this.id+'" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+"');return false;\" ></button>";return A}function DialogBoxWidget_getContainerWidth(){var A=this;return A.width-(2+2)}function DialogBoxWidget_getContainerHeight(){var A=this;return A.height-(2+18+2+2+2)}function DialogBoxWidget_close(B){var A=DialogBoxWidget_instances[B];if(A){A.show(false);if(A.cancelCB!=null){A.cancelCB()}}}function DialogBoxWidget_setCloseCB(A){this.closeCB=A}function DialogBoxWidget_setNoCloseButton(A){if(this.noCloseButton!==A){this.noCloseButton=A;if(this.initialized()){this.closeButton.style.visibility=this.noCloseButton?_hide:_show}}}function DialogBoxWidget_resizeIframeCB(B,A){DialogBoxWidget_instances[B].placeIframe()}function DialogBoxWidget_placeIframe(){var B=this;if(B.iframe){var A=B.td_lyr;if(A==null){B.td_lyr=A=getLayer("td_dialog_"+B.id)}B.iframe.resize(A.offsetWidth,A.offsetHeight);B.iframe.move(B.layer.offsetLeft,B.layer.offsetTop)}}function DialogBoxWidget_resize(A,B){var C=this;C.oldResize(A,B);if(C.iframe){C.iframe.resize(A,B)}}function DialogBoxWidget_init(){if(this.layer!=null){return }var A=this;A.oldInit();A.modal.init();A.lastLink=newWidget("lastLink_"+A.id);A.firstLink=newWidget("firstLink_"+A.id);A.lastLink.init();A.firstLink.init();if(_saf){A.webKitFocusElem=getLayer("webKitFocusElem"+A.id)}A.closeButton=getLayer("dialogClose_"+A.id);A.closeButton.style.visibility=A.noCloseButton?_hide:_show;A.closeButton.onmouseover=DialogBoxWidget_moverCloseBtn;A.closeButton.onmouseout=DialogBoxWidget_moverCloseBtn;A.closeButton.onclick=function(){A.close(A.id)}}function DialogBoxWidget_moverCloseBtn(A){var A=getEvent(A);var B=(A&&A.type=="mouseover")?true:false;if(_dtd4){this.className=B?"dlgCloseBtnHover":"dlgCloseBtn"}else{changeOffset(this,0,B?_dlgTitleCloseBtnHoverDy:_dlgTitleCloseBtnDy)}}function DialogBoxWidget_attachDefaultButton(A){this.defaultBtn=A;this.defaultBtn.setDefaultButton()}_theLYR=null;_dlgResize=null;function DialogBoxWidget_down(e,id,obj,isResize){_dlgResize=isResize;var o=DialogBoxWidget_instances[id],lyr=o.layer,mod=o.modal.layer;lyr.onmousemove=mod.onmousemove=eval("_curWin."+_codeWinName+".DialogBoxWidget_move");lyr.onmouseup=mod.onmouseup=eval("_curWin."+_codeWinName+".DialogBoxWidget_up");lyr.dlgStartPosx=mod.dlgStartPosx=parseInt(lyr.style.left);lyr.dlgStartPosy=mod.dlgStartPosy=parseInt(lyr.style.top);lyr.dlgStartx=mod.dlgStartx=eventGetX(e);lyr.dlgStarty=mod.dlgStarty=eventGetY(e);lyr.dlgStartw=mod.dlgStartw=o.getWidth();lyr.dlgStarth=mod.dlgStarth=o.getHeight();lyr._widget=mod._widget=o.widx;_theLYR=lyr;eventCancelBubble(e);if(lyr.setCapture){lyr.setCapture(true)}}function DialogBoxWidget_move(C){var E=_theLYR,D=getWidget(E);if(_dlgResize){var G=Math.max(D.minWidth,E.dlgStartw+eventGetX(C)-E.dlgStartx);var B=Math.max(D.minHeight,E.dlgStarth+eventGetY(C)-E.dlgStarty);D.resize(D.noResizeW?null:G,D.noResizeH?null:B);if(D.firstTR){if(!D.noResizeW){D.firstTR.style.width=G-4}if(!D.noResizeH){D.secondTR.style.height=B-44}}if(D.resizeCB){D.resizeCB(G,B)}}else{var A=Math.max(0,E.dlgStartPosx-E.dlgStartx+eventGetX(C));var F=Math.max(0,E.dlgStartPosy-E.dlgStarty+eventGetY(C));D.iframe.move(A,F);D.move(A,F)}eventCancelBubble(C);return false}function DialogBoxWidget_up(C){var D=getWidget(_theLYR),A=D.layer,B=D.modal.layer;A.onmousemove=B.onmousemove=null;A.onmouseup=B.onmouseup=null;if(A.releaseCapture){A.releaseCapture()}_theLYR=null}function DialogBoxWidget_keypress(A){eventCancelBubble(A);var B=DialogBoxWidget_current;if(B!=null){switch(eventGetKey(A)){case 13:if(B.yes&&!B.no){if(B.defaultCB){B.defaultCB()}return false}if(isTextArea(_ie?_curWin.event:A)){return true}if(B.defaultBtn!=null&&!B.defaultBtn.isDisabled()){B.defaultBtn.executeCB();return false}break;case 27:if(!B.noCloseButton){B.show(false);hideBlockWhileWaitWidget();if(B.cancelCB!=null){B.cancelCB()}}return false;break;case 8:return isTextInput(_ie?_curWin.event:A);break}}}function DialogBoxWidgetResizeModals(H){var G=DialogBoxWidget_current&&DialogBoxWidget_current.isDisplayed();if(G){DialogBoxWidget_current.setDisplay(false);DialogBoxWidget_current.iframe.setDisplay(false)}var E=[];for(var D=0,A=DialogBoxWidget_modals.length;D<A;D++){E[D]=DialogBoxWidget_modals[D].display;DialogBoxWidget_modals[D].display="none"}var C=documentWidth()+"px";var B=documentHeight()+"px";if(G){DialogBoxWidget_current.setDisplay(true);DialogBoxWidget_current.iframe.setDisplay(true)}for(var D=0,A=DialogBoxWidget_modals.length;D<A;D++){var F=DialogBoxWidget_modals[D];F.display=E[D];F.width=C;F.height=B}}function DialogBoxWidget_center(){var H=this;var F={modalDisplay:H.modal.css.display,layerDisplay:H.css.display};H.modal.css.display="none";H.css.display="none";var B=getScrollY(),C=getScrollX();H.modal.css.display=F.modalDisplay;H.css.display="block";var A=H.layer.offsetHeight,E=H.layer.offsetWidth;H.css.display=F.layerDisplay;var G=(winHeight()-A)/2;G=(G<0)?0:G;var D=(winWidth()-E)/2;D=(D<0)?0:D;H.move(Math.max(0,C+D),Math.max(0,B+G));H.placeIframe()}function DialogBoxWidget_Show(sh){with(this){m_sty=modal.css;l_sty=css;if(sh){if(!this.iframe){this.iframe=newWidget(getDynamicBGIFrameLayer().id);this.iframe.init()}oldCurrent=DialogBoxWidget_current;DialogBoxWidget_current=this;if(_ie){layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress");modal.layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress");window.attachEvent("onresize",eval("DialogBoxWidget_onWindowResize"))}else{_curDoc.addEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false);window.addEventListener("resize",eval("DialogBoxWidget_onWindowResize"),false)}oldMouseDown=_curDoc.onmousedown;_curDoc.onmousedown=null;hideBlockWhileWaitWidget()}else{DialogBoxWidget_current=oldCurrent;oldCurrent=null;if(_ie){layer.onkeydown=null;modal.layer.onkeydown=null;window.detachEvent("onresize",eval("DialogBoxWidget_onWindowResize"))}else{_curDoc.removeEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false);window.removeEventListener("resize",eval("DialogBoxWidget_onWindowResize"),false)}_curDoc.onmousedown=oldMouseDown}var sameState=(layer.isShown==sh);if(sameState){return }layer.isShown=sh;if(sh){if(_curWin.DialogBoxWidget_zindex==null){_curWin.DialogBoxWidget_zindex=1000}this.iframe.css.zIndex=_curWin.DialogBoxWidget_zindex++;m_sty.zIndex=_curWin.DialogBoxWidget_zindex++;l_sty.zIndex=_curWin.DialogBoxWidget_zindex++;DialogBoxWidget_modals[DialogBoxWidget_modals.length]=m_sty;m_sty.display="";l_sty.display="block";this.iframe.setDisplay(true);holdBGIFrame(this.iframe.id);DialogBoxWidgetResizeModals();this.height=layer.offsetHeight;this.width=layer.offsetWidth;if(_small&&height){if(divLayer==null){divLayer=getLayer("div_dialog_"+id)}if(divLayer){divLayer.style.overflow="auto";divLayer.style.height=(winHeight()<height)?(winHeight()-40):getContainerHeight();divLayer.style.width=(_moz?width+20:getContainerWidth())}resize(null,((winHeight()<height)?(winHeight()-10):null))}if(isHidden(layer)){this.center()}if(!_small&&this.resizeCB){this.resizeCB(width,height)}}else{var l=DialogBoxWidget_modals.length=Math.max(0,DialogBoxWidget_modals.length-1);m_sty.width="1px";m_sty.height="1px";m_sty.display="none";l_sty.display="none";if(this.iframe!=null){this.iframe.setDisplay(false);releaseBGIFrame(this.iframe.id)}}modal.show(sh);firstLink.show(sh);lastLink.show(sh);oldShow(sh);if(DialogBoxWidget_current!=null&&sh==true){DialogBoxWidget_current.focus()}if(!sh&&closeCB!=null){closeCB()}}}function DialogBoxWidget_onWindowResize(){DialogBoxWidgetResizeModals()}function DialogBoxWidget_unload(){if(this.iframe){releaseBGIFrame(this.iframe.id)}}function DialogBoxWidget_keepFocus(B){var A=DialogBoxWidget_instances[B];if(A){A.focus()}}function DialogBoxWidget_focus(){with(this){if(titleLayer==null){titleLayer=getLayer("titledialog_"+id)}if(_saf&&webKitFocusElem&&webKitFocusElem.focus){webKitFocusElem.focus()}else{if(titleLayer.focus){titleLayer.focus()}}}}function newPromptDialog(A,H,J,G,D,I,K,C,F,E){var B=newDialogBoxWidget(A,H,300,null,PromptDialog_defaultCB,PromptDialog_cancelCB,F,E);B.text=J;B.getHTML=PromptDialog_getHTML;B.yes=G?newButtonWidget(A+"_yesBtn",G,'PromptDialog_yesCB("'+B.id+'")',70):null;B.no=D?newButtonWidget(A+"_noBtn",D,'PromptDialog_noCB("'+B.id+'")',70):null;B.yesCB=K;B.noCB=C;B.promptType=I;B.txtLayer=null;B.imgLayer=null;B.setPromptType=PromptDialog_setPromptType;B.setText=PromptDialog_setText;if(B.yes){B.attachDefaultButton(B.yes)}else{if(B.no){B.attachDefaultButton(B.no)}}return B}function PromptDialog_getimgPath(B){var A=_skin;switch(B){case _promptDlgInfo:A+="information_icon.gif";break;case _promptDlgWarning:A+="warning_icon.gif";break;default:A+="critical_icon.gif";break}return A}function PromptDialog_getimgAlt(B){var A="";return A}function PromptDialog_setPromptType(B){var A=this;if(A.imgLayer==null){A.imgLayer=getLayer("dlg_img_"+A.id)}A.imgLayer.src=PromptDialog_getimgPath(B);A.imgLayer.alt=PromptDialog_getimgAlt(B)}function PromptDialog_setText(B){var A=this;A.text=B;if(A.txtLayer==null){A.txtLayer=getLayer("dlg_txt_"+A.id)}A.txtLayer.innerHTML='<div tabindex="0">'+convStr(B,false,true)+"</div>"}function PromptDialog_getHTML(){var C=this;var B=PromptDialog_getimgPath(C.promptType);var A=PromptDialog_getimgAlt(C.promptType);return C.beginHTML()+'<table class="dialogzone" width="290" cellpadding="0" cellspacing="5" border="0"><tr><td><table class="dialogzone" cellpadding="5" cellspacing="0" border="0"><tr><td align="right" width="32" >'+img(B,32,32,null,'id="dlg_img_'+C.id+'"',A)+'</td><td></td><td id="dlg_txt_'+C.id+'" align="left" tabindex="0">'+convStr(C.text,false,true)+"</td></tr></table></td></tr><tr><td>"+getSep()+'</td></tr><tr><td align="right"><table cellpadding="5" cellspacing="0" border="0"><tr>'+(C.yes?"<td>"+C.yes.getHTML()+"</td>":"")+(C.no?"<td>"+C.no.getHTML()+"</td>":"")+"</tr></table></td></tr></table>"+C.endHTML()}function PromptDialog_defaultCB(){var o=this;if(o.yesCB){if(typeof o.yesCB!="string"){o.yesCB()}else{eval(o.yesCB)}}this.show(false)}function PromptDialog_cancelCB(){var o=this;if(o.noCB){if(typeof o.noCB!="string"){o.noCB()}else{eval(o.noCB)}}this.show(false)}function PromptDialog_yesCB(A){DialogBoxWidget_instances[A].defaultCB()}function PromptDialog_noCB(A){DialogBoxWidget_instances[A].cancelCB()}function newWaitDialogBoxWidget(A,I,E,G,C,H,K,J,F){var D=250;var L=150;if(I<D){I=D}if(E<L){E=L}var B=newDialogBoxWidget(A,G,I,null,null,WaitDialogBoxWidget_cancelCB,F,true);B.pad=5;B.frZone=newFrameZoneWidget(A+"_frZone",null,null);B.showLabel=(K!=null)?K:false;B.showCancel=(C!=null)?C:false;B.label=newWidget(A+"_label");B.label.text=J;if(B.showCancel){B.cancelButton=newButtonWidget(A+"_cancelButton",_cancelButtonLab,CancelButton_cancelCB);B.cancelButton.par=B}else{B.cancelButton={};B.cancelButton.init=function(){};B.cancelButton.setDisplay=function(M){};B.cancelButton.setDisabled=function(M){};B.cancelButton.getHTML=function(){return""}}B.cancelCB=H;B.oldDialogBoxInit=B.init;B.init=WaitDialogBoxWidget_init;B.getHTML=WaitDialogBoxWidget_getHTML;B.setShowCancel=WaitDialogBoxWidget_setShowCancel;B.setShowLabel=WaitDialogBoxWidget_setShowLabel;return B}function WaitDialogBoxWidget_init(){var A=this;A.oldDialogBoxInit();A.frZone.init();A.label.init();A.label.setDisplay(A.showLabel);A.cancelButton.init();A.cancelButton.setDisplay(A.showCancel)}function WaitDialogBoxWidget_getHTML(){var B=this,A="";A+=B.beginHTML();A+='<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody>';A+='<tr><td align="center" valign="top">'+B.frZone.beginHTML();A+='<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody><tr><td align="center" style="padding-top:5px;">'+img(_skin+"wait01.gif",200,40)+'</td></tr><tr><td align="left" style="padding-left:2px;padding-right:2px;padding-top:5px;"><div id="'+B.label.id+'" class="iconText" style="wordWrap:break_word;text-align:center;">'+convStr(B.label.text,false,true)+"</div></td></tr></tbody></table>";A+=B.frZone.endHTML()+"</td></tr>";A+='<tr><td align="right" valign="middle" style="padding-top:5px;padding-right:9px">'+B.cancelButton.getHTML()+"</td></tr>";A+="</tbody></table>";A+=B.endHTML();return A}function WaitDialog_FrameZoneWidget_beginHTML(){var A=this;return'<table class="waitdialogzone" style="'+sty("width",A.w)+sty("height",A.h)+'" id="'+A.id+'" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td valign="top" class="dialogzone" id="frame_cont_'+A.id+'">'}function WaitDialog_FrameZoneWidget_endHTML(){var A=this;return"</td></tr></tbody></table>"}function WaitDialogBoxWidget_setShowCancel(A,C){var B=this;B.showCancel=A;B.cancelButton.setDisabled(false);B.cancelButton.setDisplay(A);B.cancelCB=C}function WaitDialogBoxWidget_setShowLabel(A,C){var B=this;B.showLabel=A;B.label.text=C;B.label.setHTML(C);B.label.setDisplay(A)}function WaitDialogBoxWidget_cancelCB(){var A=this;if(A.cancelCB!=null){A.cancelCB();A.cancelButton.setDisabled(true)}}function CancelButton_cancelCB(){var A=this;if(A.par.cancelCB!=null){A.par.cancelCB();A.par.cancelButton.setDisabled(true)}}var swfobject=function(){var Z="undefined",P="object",B="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",K="SWFObjectExprInst",G=window,g=document,N=navigator,f=[],H=[],Q=null,L=null,T=null,S=false,C=false;var a=function(){var l=typeof g.getElementById!=Z&&typeof g.getElementsByTagName!=Z&&typeof g.createElement!=Z&&typeof g.appendChild!=Z&&typeof g.replaceChild!=Z&&typeof g.removeChild!=Z&&typeof g.cloneNode!=Z,t=[0,0,0],n=null;if(typeof N.plugins!=Z&&typeof N.plugins[B]==P){n=N.plugins[B].description;if(n){n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);t[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof G.ActiveXObject!=Z){var o=null,s=false;try{o=new ActiveXObject(h+".7")}catch(k){try{o=new ActiveXObject(h+".6");t=[6,0,21];o.AllowScriptAccess="always"}catch(k){if(t[0]==6){s=true}}if(!s){try{o=new ActiveXObject(h)}catch(k){}}}if(!s&&o){try{n=o.GetVariable("$version");if(n){n=n.split(" ")[1].split(",");t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(k){}}}}var v=N.userAgent.toLowerCase(),j=N.platform.toLowerCase(),r=/webkit/.test(v)?parseFloat(v.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=false,q=j?/win/.test(j):/win/.test(v),m=j?/mac/.test(j):/mac/.test(v);
/*@cc_on i=true;@if(@_win32)q=true;@elif(@_mac)m=true;@end@*/
return{w3cdom:l,pv:t,webkit:r,ie:i,win:q,mac:m}}();var e=function(){if(!a.w3cdom){return }J(I);if(a.ie&&a.win){try{g.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var i=c("__ie_ondomload");if(i){i.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);V()}}}}catch(j){}}if(a.webkit&&typeof g.readyState!=Z){Q=setInterval(function(){if(/loaded|complete/.test(g.readyState)){V()}},10)}if(typeof g.addEventListener!=Z){g.addEventListener("DOMContentLoaded",V,null)}M(V)}();function V(){if(S){return }if(a.ie&&a.win){var m=Y("span");try{var l=g.getElementsByTagName("body")[0].appendChild(m);l.parentNode.removeChild(l)}catch(n){return }}S=true;if(Q){clearInterval(Q);Q=null}var j=f.length;for(var k=0;k<j;k++){f[k]()}}function J(i){if(S){i()}else{f[f.length]=i}}function M(j){if(typeof G.addEventListener!=Z){G.addEventListener("load",j,false)}else{if(typeof g.addEventListener!=Z){g.addEventListener("load",j,false)}else{if(typeof G.attachEvent!=Z){G.attachEvent("onload",j)}else{if(typeof G.onload=="function"){var i=G.onload;G.onload=function(){i();j()}}else{G.onload=j}}}}}function I(){var l=H.length;for(var j=0;j<l;j++){var m=H[j].id;if(a.pv[0]>0){var k=c(m);if(k){H[j].width=k.getAttribute("width")?k.getAttribute("width"):"0";H[j].height=k.getAttribute("height")?k.getAttribute("height"):"0";if(O(H[j].swfVersion)){if(a.webkit&&a.webkit<312){U(k)}X(m,true)}else{if(H[j].expressInstall&&!C&&O("6.0.65")&&(a.win||a.mac)){D(H[j])}else{d(k)}}}}else{X(m,true)}}}function U(m){var k=m.getElementsByTagName(P)[0];if(k){var p=Y("embed"),r=k.attributes;if(r){var o=r.length;for(var n=0;n<o;n++){if(r[n].nodeName.toLowerCase()=="data"){p.setAttribute("src",r[n].nodeValue)}else{p.setAttribute(r[n].nodeName,r[n].nodeValue)}}}var q=k.childNodes;if(q){var s=q.length;for(var l=0;l<s;l++){if(q[l].nodeType==1&&q[l].nodeName.toLowerCase()=="param"){p.setAttribute(q[l].getAttribute("name"),q[l].getAttribute("value"))}}}m.parentNode.replaceChild(p,m)}}function F(i){if(a.ie&&a.win&&O("8.0.0")){G.attachEvent("onunload",function(){var k=c(i);if(k){for(var j in k){if(typeof k[j]=="function"){k[j]=function(){}}}k.parentNode.removeChild(k)}})}}function D(j){C=true;var o=c(j.id);if(o){if(j.altContentId){var l=c(j.altContentId);if(l){L=l;T=j.altContentId}}else{L=b(o)}if(!(/%$/.test(j.width))&&parseInt(j.width,10)<310){j.width="310"}if(!(/%$/.test(j.height))&&parseInt(j.height,10)<137){j.height="137"}g.title=g.title.slice(0,47)+" - Flash Player Installation";var n=a.ie&&a.win?"ActiveX":"PlugIn",k=g.title,m="MMredirectURL="+G.location+"&MMplayerType="+n+"&MMdoctitle="+k,p=j.id;if(a.ie&&a.win&&o.readyState!=4){var i=Y("div");p+="SWFObjectNew";i.setAttribute("id",p);o.parentNode.insertBefore(i,o);o.style.display="none";G.attachEvent("onload",function(){o.parentNode.removeChild(o)})}R({data:j.expressInstall,id:K,width:j.width,height:j.height},{flashvars:m},p)}}function d(j){if(a.ie&&a.win&&j.readyState!=4){var i=Y("div");j.parentNode.insertBefore(i,j);i.parentNode.replaceChild(b(j),i);j.style.display="none";G.attachEvent("onload",function(){j.parentNode.removeChild(j)})}else{j.parentNode.replaceChild(b(j),j)}}function b(n){var m=Y("div");if(a.win&&a.ie){m.innerHTML=n.innerHTML}else{var k=n.getElementsByTagName(P)[0];if(k){var o=k.childNodes;if(o){var j=o.length;for(var l=0;l<j;l++){if(!(o[l].nodeType==1&&o[l].nodeName.toLowerCase()=="param")&&!(o[l].nodeType==8)){m.appendChild(o[l].cloneNode(true))}}}}}return m}function R(AE,AC,q){var p,t=c(q);if(typeof AE.id==Z){AE.id=q}if(a.ie&&a.win){var AD="";for(var z in AE){if(AE[z]!=Object.prototype[z]){if(z=="data"){AC.movie=AE[z]}else{if(z.toLowerCase()=="styleclass"){AD+=' class="'+AE[z]+'"'}else{if(z!="classid"){AD+=" "+z+'="'+AE[z]+'"'}}}}}var AB="";for(var y in AC){if(AC[y]!=Object.prototype[y]){AB+='<param name="'+y+'" value="'+AC[y]+'" />'}}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AD+">"+AB+"</object>";F(AE.id);p=c(AE.id)}else{if(a.webkit&&a.webkit<312){var AA=Y("embed");AA.setAttribute("type",W);for(var x in AE){if(AE[x]!=Object.prototype[x]){if(x=="data"){AA.setAttribute("src",AE[x])}else{if(x.toLowerCase()=="styleclass"){AA.setAttribute("class",AE[x])}else{if(x!="classid"){AA.setAttribute(x,AE[x])}}}}}for(var w in AC){if(AC[w]!=Object.prototype[w]){if(w!="movie"){AA.setAttribute(w,AC[w])}}}t.parentNode.replaceChild(AA,t);p=AA}else{var s=Y(P);s.setAttribute("type",W);for(var v in AE){if(AE[v]!=Object.prototype[v]){if(v.toLowerCase()=="styleclass"){s.setAttribute("class",AE[v])}else{if(v!="classid"){s.setAttribute(v,AE[v])}}}}for(var u in AC){if(AC[u]!=Object.prototype[u]&&u!="movie"){E(s,u,AC[u])}}t.parentNode.replaceChild(s,t);p=s}}return p}function E(k,i,j){var l=Y("param");l.setAttribute("name",i);l.setAttribute("value",j);k.appendChild(l)}function c(i){return g.getElementById(i)}function Y(i){return g.createElement(i)}function O(k){var j=a.pv,i=k.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10);i[2]=parseInt(i[2],10);return(j[0]>i[0]||(j[0]==i[0]&&j[1]>i[1])||(j[0]==i[0]&&j[1]==i[1]&&j[2]>=i[2]))?true:false}function A(m,j){if(a.ie&&a.mac){return }var l=g.getElementsByTagName("head")[0],k=Y("style");k.setAttribute("type","text/css");k.setAttribute("media","screen");if(!(a.ie&&a.win)&&typeof g.createTextNode!=Z){k.appendChild(g.createTextNode(m+" {"+j+"}"))}l.appendChild(k);if(a.ie&&a.win&&typeof g.styleSheets!=Z&&g.styleSheets.length>0){var i=g.styleSheets[g.styleSheets.length-1];if(typeof i.addRule==P){i.addRule(m,j)}}}function X(k,i){var j=i?"visible":"hidden";if(S){c(k).style.visibility=j}else{A("#"+k,"visibility:"+j)}}return{registerObject:function(l,i,k){if(!a.w3cdom||!l||!i){return }var j={};j.id=l;j.swfVersion=i;j.expressInstall=k?k:false;H[H.length]=j;X(l,false)},getObjectById:function(l){var i=null;if(a.w3cdom&&S){var j=c(l);if(j){var k=j.getElementsByTagName(P)[0];if(!k||(k&&typeof j.SetVariable!=Z)){i=j}else{if(typeof k.SetVariable!=Z){i=k}}}}return i},embedSWF:function(n,u,r,t,j,m,k,p,s){if(!a.w3cdom||!n||!u||!r||!t||!j){return }r+="";t+="";if(O(j)){X(u,false);var q=(typeof s==P)?s:{};q.data=n;q.width=r;q.height=t;var o=(typeof p==P)?p:{};if(typeof k==P){for(var l in k){if(k[l]!=Object.prototype[l]){if(typeof o.flashvars!=Z){o.flashvars+="&"+l+"="+k[l]}else{o.flashvars=l+"="+k[l]}}}}J(function(){R(q,o,u);if(q.id==u){X(u,true)}})}else{if(m&&!C&&O("6.0.65")&&(a.win||a.mac)){X(u,false);J(function(){var i={};i.id=i.altContentId=u;i.width=r;i.height=t;i.expressInstall=m;D(i)})}}},getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(k,j,i){if(a.w3cdom&&S){return R(k,j,i)}else{return undefined}},createCSS:function(j,i){if(a.w3cdom){A(j,i)}},addDomLoadEvent:J,addLoadEvent:M,getQueryParamValue:function(m){var l=g.location.search||g.location.hash;if(m==null){return l}if(l){var k=l.substring(1).split("&");for(var j=0;j<k.length;j++){if(k[j].substring(0,k[j].indexOf("="))==m){return k[j].substring((k[j].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(C&&L){var i=c(K);if(i){i.parentNode.replaceChild(L,i);if(T){X(T,true);if(a.ie&&a.win){L.style.display="block"}}L=null;T=null;C=false}}}}}();if(typeof (bobj)=="undefined"){bobj={}}if(typeof (bobj.crv)=="undefined"){bobj.crv={}}if(typeof (bobj.crv.params)=="undefined"){bobj.crv.params={}}bobj.crv.params.FlexParameterBridge={_swfID:[],_swf:[],_cb:[],_promptData:[],setPromptData:function(B,A){this._promptData[B]=A},setMasterCallBack:function(A,B){this._cb[A]=B},getSWF:function(B){if(this._swf[B]){return this._swf[B]}else{var A=document.getElementById(this._swfID[B]);this._swf[B]=A;return A}},getInstallHTML:function(){return L_bobj_crv_FlashRequired.replace("{0}","<br><a href='http://www.adobe.com/go/getflash/' target='_blank'>")+"</a>"},checkFlashPlayer:function(){return swfobject.hasFlashPlayerVersion("9.0.0")},createSWF:function(F,A,K,J,O,C){var L=this._cb[F];if(!L){return }if(L.logger){L.logger("Create the SWF")}if(this.checkFlashPlayer()){var B=L.getSWFBaseURL();var U=B+"prompting.swf";var H=L.getSWFID();var T=L.getUseSavedData?L.getUseSavedData(F):false;var R=L.getUseOKCancelButtons?L.getUseOKCancelButtons(F):false;var D=L.getIsDialog?L.getIsDialog(F):false;var P=L.getAllowFullScreen?L.getAllowFullScreen(F):false;var N=L.getEnforceRequiredPrompt?L.getEnforceRequiredPrompt():true;var I=L.getShouldAutoResize?L.getShouldAutoResize(F):false;var M={eventTarget:F,locale:O,showMinUI:J,baseURL:B,servletURL:K,reportSourceKey:C,useSavedData:T,useOKCancelButtons:R,isDialog:D,allowFullScreen:P,enforceRequiredPrompt:N,shouldAutoResize:I};var S={menu:"false",wmode:"window",allowscriptaccess:"sameDomain"};var E={id:H,name:H,style:"z-index:"+L.getZIndex()};if(L.processingDelayedShow){L.processingDelayedShow("hidden",A)}var Q=L.getSWFHeight?L.getSWFHeight(F)+"":"600";var G=L.getSWFWidth?L.getSWFWidth(F)+"":"800";swfobject.embedSWF(U,A,G,Q,"9.0.0","",M,S,E);this._swfID[F]=H;if(L.processingDelayedShow){L.processingDelayedShow()}}else{document.getElementById(A).innerHTML="<p>"+L.getInstallHTML()+"</p>"}},init:function(C){if(!C){return }var A=this._cb[C];var B=this.getSWF(C);if(!B||!A){return }if(A.logger){A.logger("Init the SWF")}if(B.setShowMinUI&&A.getShowMinUI){B.setShowMinUI(A.getShowMinUI(C))}if(B.setUseSavedData&&A.getUseSavedData){B.setUseSavedData(A.getUseSavedData(C))}if(B.setUseOKCancelButtons&&A.getUseOKCancelButtons){B.setUseOKCancelButtons(A.getUseOKCancelButtons(C))}if(B.setAllowFullScreen&&A.getAllowFullScreen){B.setAllowFullScreen(A.getAllowFullScreen(C))}if(B.setReportStateInfo&&A.getReportStateInfo){B.setReportStateInfo(A.getReportStateInfo(C))}if(B.setPromptData){if(A.getPromptData&&A.getPromptData(C)){B.setPromptData(A.getPromptData(C))}else{B.setPromptData(this._promptData[C])}}if(A.getShouldAutoResize&&A.getShouldAutoResize(C)){this.resize(C,1,1,true)}else{if(A.getSWFHeight&&A.getSWFWidth){this.resize(C,A.getSWFHeight(C),A.getSWFWidth(C),true)}}},closeDialog:function(B){var A=this._cb[B];if(A&&A.closeDialog){A.closeDialog(B)}},resize:function(G,I,D,H){var E=this.getSWF(G);var F=this._cb[G];if(E&&F){F.logger("Resizing the SWF h:"+I+" w:"+D);if(F.getScreenHeight&&F.getScreenWidth){var C=F.getScreenHeight(G);var A=F.getScreenWidth(G);var B=MochiKit.Style.getElementPosition(E.parentNode);if((B.x>=0)&&((B.x+D)>=A)&&!H){D=A-B.x}else{if(D>A){D=A}}if((B.y>=0)&&((B.y+I)>=C)&&!H){I=C-B.y}else{if(I>C){I=C}}}if(E.setWidth&&E.setHeight){E.setWidth(D);E.setHeight(I)}E.style.width=D+"px";E.style.height=I+"px";if(H){this.move(G,((A-D)/2),((C-I)/2))}F.setVisibility(G);E._isMaximized=false}},fitScreen:function(E){var D=this.getSWF(E);var A=this._cb[E];if(D&&A&&A.getScreenHeight&&A.getScreenWidth&&D.setHeight&&D.setWidth){A.logger("Fitting SWF to the screen");var C=A.getScreenHeight(E);var B=A.getScreenWidth(E);this.move(E,0,0);this.resize(E,C,B,false);D._isMaximized=true}},startDrag:function(B){var A=this._cb[B];if(A&&A.startDrag){A.startDrag(B)}},stopDrag:function(B){var A=this._cb[B];if(A&&A.stopDrag){A.stopDrag(B)}},drag:function(C,B,D){var A=this._cb[C];if(A&&A.drag){A.drag(C,B,D)}},move:function(C,B,D){var A=this._cb[C];if(A&&A.move){A.move(C,B,D)}},setParamValues:function(C,B){var A=this._cb[C];if(A&&A.setParamValues){A.setParamValues(C,B)}},logon:function(C,B){var A=this._cb[C];if(A&&A.logon){A.logon(C,B)}},setReportStateInfo:function(C,B){var A=this._cb[C];if(A&&A.setReportStateInfo){A.setReportStateInfo(C,B)}},sendAsyncRequest:function(C,B){var A=this._cb[C];if(A&&A.sendAsyncRequest){A.sendAsyncRequest(C,B)}},handleAsyncResponse:function(C,A){var B=this.getSWF(C);if(B&&B.handleAsyncResponse){B.handleAsyncResponse(A)}},readyToShow:function(B){var A=this._cb[B];if(A&&A.readyToShow){A.readyToShow(B)}}};if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.constants=="undefined"){bobj.constants={modalLayerIndex:1000}}bobj.uniqueId=function(){return"bobjid_"+(++bobj.uniqueId._count)};if(typeof bobj.uniqueId._count=="undefined"){bobj.uniqueId._count=new Date().getTime()}bobj.updateIf=function(G,C,E){if(C===null){C={}}for(var D=1,A=arguments.length;D<A;D++){var F=arguments[D];if(typeof (F)!="undefined"&&F!==null){for(var B in F){if(G(C,E,B)){C[B]=F[B]}}}}return C};bobj.fillIn=function(A,B){var C=function(E,F,D){return(typeof (E[D])=="undefined")};bobj.updateIf(C,A,B)};bobj.isObject=function(A){return(A&&typeof A=="object")};bobj.isArray=function(B){if(bobj.isObject(B)){try{return B.constructor==Array}catch(A){return false}}return false};bobj.isString=function(A){return(typeof (A)=="string")};bobj.isNumber=function(A){return typeof (A)=="number"&&isFinite(A)};bobj.isBoolean=function(A){return typeof A=="boolean"};bobj.isFunction=function(A){return typeof (A)=="function"};bobj.isBorderBoxModel=function(){if(typeof bobj.isBorderBoxModel._cachedValue=="undefined"){if(document.body){var A=document.createElement("div");A.style.width="10px";A.style.padding="1px";A.style.position="absolute";A.style.visibility="hidden";document.body.appendChild(A);bobj.isBorderBoxModel._cachedValue=(A.offsetWidth==10);document.body.removeChild(A)}else{return _ie&&bobj.isQuirksMode()}}return bobj.isBorderBoxModel._cachedValue};bobj.isQuirksMode=function(){return(document.compatMode!="CSS1Compat")};bobj.setVisualStyle=function(B,C){if(B===null||C===null){return }var A=B.style;if(C.className){B.className=C.className}MochiKit.Iter.forEach(["background","borderWidth","borderStyle","borderColor","fontFamily","fontStyle","fontSize","fontWeight","textDecoration","color","width","height","left","top"],function(D){if(C[D]){A[D]=C[D]}})};bobj.setOuterSize=function(E,B,D,C){var G=null;var A=E.style;if(A.display=="none"){G={visibility:A.visibility,position:A.position,display:"none"};A.visibility="hidden";A.position="absolute";A.display=""}function F(H){var I=MochiKit.DOM.getStyle(E,H);if(bobj.isString(I)&&I.substring(I.length-2=="px")){return(parseInt(I,10)||0)}return 0}if(bobj.isNumber(B)){if(!bobj.isBorderBoxModel()){B-=F("border-left-width");B-=F("border-right-width");B-=F("padding-left");B-=F("padding-right");if(C){B-=F("margin-left");B-=F("margin-right")}}A.width=Math.max(0,B)+"px"}if(bobj.isNumber(D)){if(!bobj.isBorderBoxModel()){if(C){D-=F("margin-top");D-=F("margin-bottom")}D-=F("border-top-width");D-=F("border-bottom-width");D-=F("padding-top");D-=F("padding-bottom")}A.height=Math.max(0,D)+"px"}if(G){A.display=G.display;A.position=G.position;A.visibility=G.visibility}};bobj.getContainer=function(A){if(A&&A.layer){return A.layer.parentNode}return null};bobj.checkParent=function(D,B){var A=false;if(D&&B){B=B.toUpperCase();var C=D.parentNode;while(C){if(C.tagName==B){A=true;break}C=C.parentNode}}return A};bobj.slice=function(A,F,C){if(bobj.isArray(A)){return A.slice(F,C)}else{if(MochiKit.Base.isArrayLike(A)){var B=[];var E=A.length;if(bobj.isNumber(C)&&C<E){E=C}F=Math.max(F,0);for(var D=F;D<E;++D){B.push(A[D])}return B}}return null};bobj.extractRange=function(D,G,A){if(D&&bobj.isNumber(G)){if(!bobj.isNumber(A)||A>D.length){A=D.length}G=Math.max(0,G);if(G<A){var C=0,F=G;var B=A,E=D.length;if(D.substring){return(D.substring(C,F)+D.substring(B,E))}else{return bobj.slice(D,C,F).concat(bobj.slice(D,B,E))}}}return D};bobj.unitValue=function(B,A){if(bobj.isNumber(B)){return B+(A||"px")}return B};bobj.evalInWindow=function(expression){if(window.execScript){return window.execScript(expression)}else{return MochiKit.Base.bind(eval,window,expression).call()}};bobj.loadJSResourceAndExecCallBack=function(D,E){if(!D||!E){return }if(!D.isLoaded){var B=function(G,H,F){G.isLoaded=true;bobj.evalInWindow(F.responseText);H.apply()};var C=MochiKit.Async.getXMLHttpRequest();C.open("GET",bobj.crvUri(D.path),true);C.setRequestHeader("Accept","application/x-javascript, text/javascript");var A=MochiKit.Async.sendXMLHttpRequest(C);A.addCallback(MochiKit.Base.bind(B,this,D,E))}else{setTimeout(function(){E.apply()},0)}};bobj.trimLeft=function(A){A=A||"";return A.replace(/^\s+/g,"")};bobj.trimRight=function(A){A=A||"";return A.replace(/\s+$/g,"")};bobj.trim=function(A){return bobj.trimLeft(bobj.trimRight(A))};bobj.equals=function(B,A){if(typeof (B)!=typeof (A)){return false}if(bobj.isObject(B)){var D=true;for(var C in B){D=D&&bobj.equals(B[C],A[C])}return D}else{return B==A}};bobj.includeLink=function(B){var C=document.getElementsByTagName("head")[0];var A=document.body;var D=document.createElement("link");D.setAttribute("rel","stylesheet");D.setAttribute("type","text/css");D.setAttribute("href",B);if(C){C.appendChild(D)}else{if(A){A.appendChild(D)}}};bobj.includeCSSLinksAndExecuteCallback=function(C,E){if(C==null||C.length<1){E.apply();return }var B=function(){var F=arguments.callee;var G=F.callback;F.hrefCount--;if(F.hrefCount==0){G.apply()}};B.hrefCount=C.length;B.callback=E;for(var D=0,A=C.length;D<A;D++){bobj.includeCSSLinkAndExecuteCallback(C[D],B)}};bobj.includeCSSLinkAndExecuteCallback=function(A,H){var D=encodeURIComponent(A);if(getLayer(D)){H.apply();return }var F=function(L,K,J){bobj.addStyleSheet(J.responseText,K);L.apply()};var C=function(J){J.apply()};var G=MochiKit.Async.getXMLHttpRequest();G.open("GET",A,true);G.setRequestHeader("Accept","text/css");var I=MochiKit.Async.sendXMLHttpRequest(G);var B=MochiKit.Base.bind(F,this,H,D);var E=MochiKit.Base.bind(C,this,H);I.addCallbacks(B,E)};bobj.addStyleSheet=function(C,E){var D=document.createElement("style");D.setAttribute("type","text/css");if(E){D.setAttribute("id",E)}if(D.styleSheet){D.styleSheet.cssText=C}else{D.appendChild(document.createTextNode(C))}var B=document.getElementsByTagName("head");var A=document.getElementsByTagName("body");if(B&&B[0]){B[0].appendChild(D)}else{if(A&&A[0]){A[0].appendChild(D)}}};bobj.removeAllChildElements=function(A){if(A){while(A.lastChild){A.removeChild(A.lastChild)}}};bobj.getValueHashCode=function(C,A){var B=bobj.crv.params.DataTypes;switch(C){case B.BOOLEAN:case B.CURRENCY:case B.NUMBER:case B.STRING:return""+A;case B.TIME:return""+A.h+","+A.min+","+A.s+","+A.ms;case B.DATE:return""+A.y+","+A.m+","+A.d;case B.DATE_TIME:return""+A.y+","+A.m+","+A.d+","+A.h+","+A.min+","+A.s+","+A.ms}};bobj.getElementByIdOrName=function(B){if(!B){return null}var C=document.getElementById(B);if(C){return C}var A=document.getElementsByName(B);if(A&&A.length>0){return A[0]}return null};bobj.getRect=function(D,B,A,C){return"rect("+D+"px, "+B+"px,"+A+"px,"+C+"px)"};bobj.getBodyScrollDimension=function(){var A=0;var C=0;var B=document.getElementsByTagName("Body");if(B&&B[0]){A=B[0].scrollWidth;C=B[0].scrollHeight}return{w:A,h:C}};bobj.disableTabbingKey=function(B,A){if(B){B.tabIndex=A?-1:0}};bobj.getStringWidth=function(B,A,E){if(document.body){var D=document.createElement("span");D.appendChild(document.createTextNode(B));D.style.position="absolute";D.style.visibility="hidden";if(A){D.style.fontFamily=A}if(E){D.style.fontSize=E}document.body.appendChild(D);var C=D.offsetWidth;document.body.removeChild(D);return C}return 0};bobj.deleteWidget=function(B){if(B&&B.widx){if(B.layer){B.layer.click=null;B.layer.onmouseup=null;B.layer.onmousedown=null;B.layer.onmouseover=null;B.layer.onmousemove=null;B.layer.onmouseout=null;B.layer.onchange=null;B.layer.onfocus=null;B.layer.onkeydown=null;B.layer.onkeyup=null;B.layer.onkeypress=null;var A=B.layer.parentNode;if(A){A.removeChild(B.layer)}delete B.layer}delete B.css;delete _widgets[B.widx];_widgets[B.widx]=null;delete B}};bobj.cloneArray=function(A){return A.slice()};bobj.bindFunctionToObject=function(A,B){return function(){return A.apply(B,arguments)}};bobj.extendClass=function(A,D,B){MochiKit.Base.update(A,D);A.superClass={};for(var C in B){A.superClass[C]=bobj.bindFunctionToObject(B[C],A)}};bobj.displayElementWithAnimation=function(A){if(A!=null){MochiKit.DOM.setOpacity(A,0);MochiKit.Style.setDisplayForElement("block",A);new MochiKit.Visual.appear(A,{duration:0.5})}};bobj.getHiddenElementDimensions=function(D){var C={w:0,h:0};if(D){var A=document.body;var E=D.cloneNode(true);var B=E.style;B.display="";B.visibility="hidden";B.width="";B.height="";B.position="absolute";B.left="-1000px";B.top="-1000px";A.appendChild(E);C={w:E.offsetWidth,h:E.offsetHeight};A.removeChild(E)}return C};bobj.hasPDFReaderWithJSFunctionality=function(){if(window.ActiveXObject){try{var E=new ActiveXObject("AcroPDF.PDF.1");if(E){return true}}catch(D){}}else{if(navigator.plugins){var B=navigator.plugins;for(var C=0,A=B.length;C<A;C++){if(B[C].description.indexOf("Adobe PDF Plug-In")!=-1){return true}}}}return false};if(typeof bobj=="undefined"){bobj={}}bobj.encodeUTF8=function(B){var A=[];var E=B.length;for(var D=0;D<E;D++){var F=B.charCodeAt(D);if(F<128){A.push(F)}else{if(F<2048){A.push((F>>6)|192);A.push(F&63|128)}else{if(F<55296||F>=57344){A.push((F>>12)|224);A.push((F>>6)&63|128);A.push(F&63|128)}else{if(F<56320){var C=B.charCodeAt(D+1);if(isNaN(C)||C<56320||C>=57344){A.push(239,191,189);continue}D++;val=((F&1023)<<10)|(C&1023);val+=65536;A.push((val>>18)|240);A.push((val>>12)&63|128);A.push((val>>6)&63|128);A.push(val&63|128)}else{A.push(239,191,189)}}}}}return A};bobj.encodeBASE64=function(A){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var G=[];var F,D,C,L,J,I,H;var E=0,K=A.length;while(E<K){F=A[E++];D=A[E++];C=A[E++];L=F>>2;J=((F&3)<<4)|(D>>4);I=((D&15)<<2)|(C>>6);H=C&63;if(isNaN(D)){I=H=64}else{if(isNaN(C)){H=64}}G.push(B.charAt(L));G.push(B.charAt(J));G.push(B.charAt(I));G.push(B.charAt(H))}return G.join("")};if(typeof (bobj.html)=="undefined"){bobj.html={}}bobj.html.openTag=function(B,G){var E="<"+B;for(var D in G){E+=" "+D+'="';var F=G[D];if(bobj.isArray(F)){F=F.join(" ")}else{if(bobj.isObject(F)){var A="";for(var C in F){A+=C+":"+F[C]+";"}F=A}}E+=F+'"'}return E+">"};bobj.html.closeTag=function(A){return"</"+A+">"};bobj.html.createHtml=function(A,E,B){var D=bobj.html.openTag(A,E);for(var C=2;C<arguments.length;++C){D+=arguments[C]}D+=bobj.html.closeTag(A);return D};bobj.html.TABLE=MochiKit.Base.partial(bobj.html.createHtml,"table");bobj.html.UL=MochiKit.Base.partial(bobj.html.createHtml,"ul");bobj.html.OL=MochiKit.Base.partial(bobj.html.createHtml,"ol");bobj.html.LI=MochiKit.Base.partial(bobj.html.createHtml,"li");bobj.html.TD=MochiKit.Base.partial(bobj.html.createHtml,"td");bobj.html.TR=MochiKit.Base.partial(bobj.html.createHtml,"tr");bobj.html.TBODY=MochiKit.Base.partial(bobj.html.createHtml,"tbody");bobj.html.THEAD=MochiKit.Base.partial(bobj.html.createHtml,"thead");bobj.html.TFOOT=MochiKit.Base.partial(bobj.html.createHtml,"tfoot");bobj.html.TABLE=MochiKit.Base.partial(bobj.html.createHtml,"table");bobj.html.TH=MochiKit.Base.partial(bobj.html.createHtml,"th");bobj.html.INPUT=MochiKit.Base.partial(bobj.html.createHtml,"input");bobj.html.SPAN=MochiKit.Base.partial(bobj.html.createHtml,"span");bobj.html.A=MochiKit.Base.partial(bobj.html.createHtml,"a");bobj.html.DIV=MochiKit.Base.partial(bobj.html.createHtml,"div");bobj.html.IMG=MochiKit.Base.partial(bobj.html.createHtml,"img");bobj.html.BUTTON=MochiKit.Base.partial(bobj.html.createHtml,"button");bobj.html.TT=MochiKit.Base.partial(bobj.html.createHtml,"tt");bobj.html.PRE=MochiKit.Base.partial(bobj.html.createHtml,"pre");bobj.html.H1=MochiKit.Base.partial(bobj.html.createHtml,"h1");bobj.html.H2=MochiKit.Base.partial(bobj.html.createHtml,"h2");bobj.html.H3=MochiKit.Base.partial(bobj.html.createHtml,"h3");bobj.html.BR=MochiKit.Base.partial(bobj.html.createHtml,"br");bobj.html.HR=MochiKit.Base.partial(bobj.html.createHtml,"hr");bobj.html.LABEL=MochiKit.Base.partial(bobj.html.createHtml,"label");bobj.html.TEXTAREA=MochiKit.Base.partial(bobj.html.createHtml,"textarea");bobj.html.FORM=MochiKit.Base.partial(bobj.html.createHtml,"form");bobj.html.P=MochiKit.Base.partial(bobj.html.createHtml,"p");bobj.html.SELECT=MochiKit.Base.partial(bobj.html.createHtml,"select");bobj.html.OPTION=MochiKit.Base.partial(bobj.html.createHtml,"option");bobj.html.OPTGROUP=MochiKit.Base.partial(bobj.html.createHtml,"optgroup");bobj.html.LEGEND=MochiKit.Base.partial(bobj.html.createHtml,"legend");bobj.html.FIELDSET=MochiKit.Base.partial(bobj.html.createHtml,"fieldset");bobj.html.STRONG=MochiKit.Base.partial(bobj.html.createHtml,"strong");bobj.html.CANVAS=MochiKit.Base.partial(bobj.html.createHtml,"canvas");bobj.html.IFRAME=MochiKit.Base.partial(bobj.html.createHtml,"iframe");bobj.html.SCRIPT=MochiKit.Base.partial(bobj.html.createHtml,"script");bobj.html.extractScripts=function(G){var F=/(?:<script([^>]*)\/>|<script([^>]*)>([\s\S]*?)<\/script>)/i;var D=/src=\"([^\"]*)\"/i;var A=[];var E=null;while(E=F.exec(G)){var C={src:null,text:null};var B=E[1]||E[2];if(B=D.exec(B)){C.src=B[1]}if(E[3]){C.text=E[3]}A.push(C);G=bobj.extractRange(G,E.index,E.index+E[0].length)}return{scripts:A,html:G}};bobj.html.extractHtml=function(A){var D=bobj.html.extractScripts(A);var C=bobj.html.extractLinks(D.html);var B=bobj.html.extractStyles(C.html);return{scripts:D.scripts,html:B.html,links:C.links,styles:B.styles}};bobj.html.extractLinks=function(E){var D=/<link([^>]*)>/i;var F=/href=\"([^\"]*)\"/i;var B=[];var C=null;while(C=D.exec(E)){var A=F.exec(C);if(A&&A.length>0){B.push(A[1])}E=bobj.extractRange(E,C.index,C.index+C[0].length)}return{links:B,html:E}};bobj.html.extractStyles=function(F){var C=/<style([^>]*)>([\s\S]*?)<\/style>/i;var I=/type=\"([^\"]*)\"/i;var E=/media=\"([^\"]*)\"/i;var H=[];var G=null;while(G=C.exec(F)){var B={media:null,type:null,text:G[2]};var A=I.exec(G[1]);if(A){B.type=A[1]}var D=E.exec(G[1]);if(D){B.media=D[1]}H.push(B);F=bobj.extractRange(F,G.index,G.index+G[0].length)}return{styles:H,html:F}};bobj.crv.allInOne=(function(){var B=new Object();B.uri=bobj.crvUri("images/allInOne.gif");var C=22;var A=0;A+=3;A=B.toolbarExportDy=A;A=B.toolbarPrintDy=A+C;A=B.toolbarRefreshDy=A+C;A=B.toolbarSearchDy=A+C;A=B.toolbarUpDy=A+C;A-=3;A=B.groupTreeToggleDy=A+C;A=B.paramPanelToggleDy=A+C;A=B.toolbarPrevPageDy=A+C;A=B.toolbarNextPageDy=A+20;A=B.paramRunDy=A+20;A=B.paramDataFetchingDy=A+22;A=B.closePanelDy=A+16;A=B.openParameterArrowDy=A+7;A=B.plusDy=A+15;A=B.minusDy=A+12;A=B.undoDy=A+12;return B})();bobj.crv.setAllClasses=function(B,A){if(B&&B.setClasses){if(A){B.setClasses(A+"_default",A+"_depressed",A+"_hover",A+"_depressed")}else{B.setClasses(null,null,null,null)}}};bobj.crv.newToolbar=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null}},A);var B=newPaletteContainerWidget(A.id);B.margin=0;bobj.fillIn(B,A);B._rightZoneWgts=[];B.widgetType="Toolbar";B.initOld=B.init;C(B,bobj.crv.Toolbar);B.palette=newPaletteWidget(B.id+"_palette");B.add(B.palette);return B};bobj.crv.Toolbar={addChild:function(C){if(!C){return }var B=MochiKit.Signal.signal;var D=MochiKit.Base.partial;var A=MochiKit.Base.bind;switch(C.widgetType){case"ToolbarMenu":this.menu=C;if(C.exportMenuItem){C.exportMenuItem.cb=D(B,this,"export")}if(C.printMenuItem){C.printMenuItem.cb=D(B,this,"print")}break;case"ToolbarButtonGroup":this.group=C;if(C.printButton){C.printButton.clickCB=D(B,this,"print",C.printButton.closeCB)}if(C.exportButton){C.exportButton.clickCB=D(B,this,"export",C.exportButton.closeCB)}if(C.refreshButton){C.refreshButton.clickCB=D(B,this,"refresh")}if(C.drillUpButton){C.drillUpButton.clickCB=D(B,this,"drillUp")}break;case"PrevPageButton":this.prevPageButton=C;C.clickCB=D(B,this,"prevPage");break;case"NextPageButton":this.nextPageButton=C;C.clickCB=D(B,this,"nextPage");break;case"ZoomControl":this.zoomControl=C;C.zoomCB=D(B,this,"zoom");break;case"SelectPageControl":this.selectPageControl=C;C.selectPageCB=D(B,this,"selectPage");if(C.firstPage&&C.lastPage){C.firstPage.cb=D(B,this,"firstPage");C.lastPage.cb=D(B,this,"lastPage")}break;case"SearchTextControl":this.searchTextControl=C;C.searchTextCB=D(B,this,"search");break;default:break}if(C.layoutAlign=="right"){this._rightZoneWgts.push(C)}else{this.palette.add(C)}},getSearchTextControl:function(){return this.searchTextControl},getZoomControl:function(){return this.zoomControl},getSelectPageControl:function(){return this.selectPageControl},getButtonGroup:function(){return this.group},getNextPageButton:function(){return this.nextPageButton},getPrevPageButton:function(){return this.prevPageButton},init:function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.palette.init();this._updateNavButtons()},write:function(){this._addRightZone();this.begin();this.palette.write();this.end();document.write(bobj.crv.getInitHTML(this.widx))},beginHTML:function(){return bobj.html.openTag("div",{id:this.id,"class":"crtoolbar",style:{height:"28px",overflow:"hidden",margin:this.margin+"px"}})},getHTML:function(){this._addRightZone();return(this.beginHTML()+this.palette.getHTML()+this.endHTML())},getWidth:function(){var E;var D=0;var B=this.palette.items;for(var C=0,A=B.length;C<A;C++){E=B[C].layer;if(E.offsetWidth){D+=E.offsetWidth}if(E.offsetLeft){D+=(E.offsetLeft*2)}}return D},_addRightZone:function(){this.palette.beginRightZone();var A=null;while(A=this._rightZoneWgts.pop()){this.palette.add(A)}delete this._rightZoneWgts},_updateNavButtons:function(){if(this.selectPageControl){var D=this.selectPageControl.getCurrentPage();if(this.selectPageControl.firstPage){this.selectPageControl.firstPage.setDisabled(D==1)}if(this.prevPageButton){this.prevPageButton.setDisabled(D==1)}var B=this.selectPageControl.getNumPages();var A=B.indexOf("+")==-1;var C=parseInt(B,10);var E=A&&C==D;if(this.nextPageButton){this.nextPageButton.setDisabled(E)}if(this.selectPageControl.lastPage){this.selectPageControl.lastPage.setDisabled(E)}}},setPageNumber:function(B,A){if(this.selectPageControl){if(B){this.selectPageControl.setCurrentPage(B)}if(A){this.selectPageControl.setNumPages(A)}this._updateNavButtons()}},update:function(C){if(C){for(var A in C.children){var B=C.children[A];if(B){switch(B.cons){case"bobj.crv.newSelectPageControl":if(this.selectPageControl){this.selectPageControl.update(B);this._updateNavButtons()}break;case"bobj.crv.newSearchTextControl":if(this.searchTextControl){this.searchTextControl.update(B)}break;case"bobj.crv.newZoomControl":if(this.zoomControl){this.zoomControl.update(B)}break;case"bobj.crv.newToolbarButtonGroup":if(this.group){this.group.update(B)}break}}}}}};bobj.crv.newToolbarMenu=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),icon:null,text:L_bobj_crv_File,tooltip:L_bobj_crv_FileMenu},A);var B=newSingleIconMenuWidget(A.id,A.icon,null,A.text,A.tooltip);B.widgetType="ToolbarMenu";B._tbBtnOldInit=B.init;bobj.crv.setAllClasses(B.icon,null);bobj.crv.setAllClasses(B.arrow,null);bobj.crv.setAllClasses(B,"filemenu");B.arrow.resize(13,(_ie?20:18));MochiKit.Base.update(B,bobj.crv.ToolbarMenu);return B};bobj.crv.ToolbarMenu={init:function(){this._tbBtnOldInit();bobj.disableTabbingKey(this.icon.layer,true);if(this.getMenu().items.length==0){this.arrow.setDisplay(false);bobj.crv.setAllClasses(this.icon,null);this.icon.clickCB=null}},addChild:function(D){var E=this.getMenu();switch(D.widgetType){case"ExportMenuItem":var C=bobj.crv.allInOne.uri;var A=bobj.crv.allInOne.toolbarExportDy;var B=A;this.exportMenuItem=E.add(D.id,L_bobj_crv_submitBtnLbl,null,C,3,A,D.disabled,25,B,null);break;case"PrintMenuItem":var C=bobj.crv.allInOne.uri;var A=bobj.crv.allInOne.toolbarPrintDy;var B=A;this.printMenuItem=E.add(D.id,L_bobj_crv_ActiveXPrintDialogTitle,null,C,3,A,D.disabled,25,B,null);break;default:bobj.crv.ToolbarMenu.commonAddChild(E,D);break}},commonAddChild:function(D,B){switch(B.widgetType){case"Separator":D.addSeparator();break;case"ScriptMenuItem":var A=function(){bobj.crv.ToolbarMenuItem.scriptItemCB(B.callback,B.args)};var C=D.add(B.id,B.text,A,B.icon,B.dx,B.dy,B.disabled,B.disDx,B.disDy,B.alt);if(B.callback==null){C.setDisabled(true)}break;case"ToolbarSubMenu":var C=D.add(B.id,B.text,null,B.icon,B.dx,B.dy,B.disabled,B.disDx,B.disDy,B.alt);C.attachSubMenu(B.submenu);break}}};bobj.crv.newToolbarSubMenu=function(A){var B=MochiKit.Base.update({id:bobj.uniqueId(),text:null,icon:null,dx:0,dy:0,disabled:false,disDx:0,disDy:0,alt:null},A);B.submenu=newMenuWidget(B.id);B.widgetType="ToolbarSubMenu";MochiKit.Base.update(B,bobj.crv.ToolbarSubMenu);return B};bobj.crv.ToolbarSubMenu={addChild:function(A){bobj.crv.ToolbarMenu.commonAddChild(this.submenu,A)}};bobj.crv.newToolbarMenuItem=function(A){var B=MochiKit.Base.update({id:bobj.uniqueId(),widgetType:null,text:null,icon:null,dx:0,dy:0,disabled:false,disDx:0,disDy:0,alt:null},A);MochiKit.Base.update(B,bobj.crv.ToolbarMenuItem);return B};bobj.crv.ToolbarMenuItem={scriptItemCB:function(callback,args){if(callback){var f=eval(callback);if(typeof f=="function"){if(args){f.call(null,args)}else{f.call(null)}}}}};bobj.crv.newToolbarButton=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),icon:null,tooltip:null,text:null,isDisabled:false,isChecked:false,clickCB:null,width:16,height:16,dx:3,dy:3,disDx:25,disDy:3,isTabEnabled:true},A);var B=newIconWidget(A.id,A.icon,A.clickCB,A.text,A.tooltip,A.width,A.height,A.dx,A.dy,A.disDx,A.disDy,A.isTabEnabled);if(A.text){bobj.crv.setAllClasses(B,null)}else{bobj.crv.setAllClasses(B,"toolbar_button")}B._tbBtnOldInit=B.init;B._tbBtnKwArgs=A;MochiKit.Base.update(B,bobj.crv.ToolbarButton);return B};bobj.crv.ToolbarButton={init:function(){this._tbBtnOldInit();var A=this._tbBtnKwArgs;this.setDisabled(A.isDisabled)},update:function(A){if(A&&bobj.isBoolean(A.args.isDisabled)){this.setDisabled(A.args.isDisabled)}}};bobj.crv.newPrevPageButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_PrevPage,dx:3,dy:bobj.crv.allInOne.toolbarPrevPageDy+3,disDx:25,disDy:bobj.crv.allInOne.toolbarPrevPageDy+3,width:16,height:16},A));B.widgetType="PrevPageButton";return B};bobj.crv.newNextPageButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_NextPage,dx:3,dy:bobj.crv.allInOne.toolbarNextPageDy+3,disDx:25,disDy:bobj.crv.allInOne.toolbarNextPageDy+3,width:16,height:16},A));B.widgetType="NextPageButton";return B};bobj.crv.newDrillUpButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_DrillUp,dx:0,dy:bobj.crv.allInOne.toolbarUpDy,disDx:22,disDy:bobj.crv.allInOne.toolbarUpDy},A));B.widgetType="DrillUpButton";return B};bobj.crv.newRefreshButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_Refresh,dy:bobj.crv.allInOne.toolbarRefreshDy,disDy:bobj.crv.allInOne.toolbarRefreshDy},A));B.widgetType="RefreshButton";return B};bobj.crv.newExportButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_Export,dy:bobj.crv.allInOne.toolbarExportDy,disDy:bobj.crv.allInOne.toolbarExportDy},A));B.widgetType="ExportButton";B.closeCB=MochiKit.Base.bind(function(){if(this.focus){this.focus()}},B);return B};bobj.crv.newPrintButton=function(A){var B=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crv.allInOne.uri,tooltip:L_bobj_crv_Print,dy:bobj.crv.allInOne.toolbarPrintDy,disDy:bobj.crv.allInOne.toolbarPrintDy},A));B.widgetType="PrintButton";B.closeCB=MochiKit.Base.bind(function(){if(this.focus){this.focus()}},B);return B};bobj.crv.newLogoIcon=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),icon:bobj.crvUri("images/logo.gif")},A);var B=newIconWidget(A.id,A.icon,function(){window.open("http://www.businessobjects.com/ipl/default.asp?destination=ViewerLogoLink&product=crystalreports&version=14%2E0")},null,"SAP Crystal Reports",120,20,0,0,0,0,true);bobj.crv.setAllClasses(B,null);B.layoutAlign="right";B.widgetType="LogoIcon";return B};bobj.crv.newCatalystIcon=function(A){var B=newIconWidget(A.id,bobj.crvUri("images/catalyst.gif"),function(){window.open("http://www.businessobjects.com/ipl/default.asp?destination=DHTMLViewerLandingPage&product=crystalreports&version=14%2E0")},null,L_bobj_crv_CatalystTip,22,22,0,0,0,0,true);bobj.crv.setAllClasses(B,null);B.layoutAlign="right";B.widgetType="CatalystIcon";return B};bobj.crv.newToolbarSeparator=function(){var A=newPaletteVerticalSepWidget(bobj.uniqueId());A.getHTML=function(){return bobj.html.DIV({id:this.id,style:{width:"6px"}},bobj.html.IMG({src:_skin+"../transp.gif","class":"toolbar_separator"}))};return A};bobj.crv.newZoomControl=function(D){var G=MochiKit.Base.update;D=G({initialZoom:"100%",id:bobj.uniqueId()},D);if(bobj.isNumber(D.initialZoom)){D.initialZoom=D.initialZoom+"%"}var F=newTextComboWidget(D.id,5,L_bobj_crv_Zoom,60,bobj.crv.ZoomControl._zoomChangeCB,null,null,null);F.arrow.resize(13,(_ie?20:18));bobj.crv.setAllClasses(F.arrow,"toolbar_menuarrow");F.menu.setAccelEnabled(false);var B=["400%","300%","200%","150%","125%","100%","75%","50%","25%"];for(var C=0,A=B.length;C<A;++C){var E=B[C];F.add(E,E,(E==D.initialZoom))}F.text.setValue(D.initialZoom);F.zoomCB=null;F.widgetType="ZoomControl";F.initOld=F.init;F._initZoom=D.initialZoom;G(F,bobj.crv.ZoomControl);return F};bobj.crv.ZoomControl={init:function(){this.initOld();this.setZoom(this._initZoom)},update:function(A){if(A.cons=="bobj.crv.newZoomControl"){this.setZoom(A.args.initialZoom)}},setZoom:function(B){var C=parseInt(B,10);if(bobj.isNumber(C)){C+="%";this.valueSelect(C);var A=this.selectedItem;if(A&&A.val!=C){A.check(false);this.selectedItem=null}this._lastValue=C;return true}return false},_zoomChangeCB:function(){var A=parseInt(this.text.getValue(),10);if(bobj.isNumber(A)){if(A<10){A=10}else{if(A>400){A=400}}}if(!this.setZoom(A)){this.setZoom(this._lastValue)}else{if(this.zoomCB){this.zoomCB(A)}}}};bobj.crv.newSelectPageControl=function(B){var D=MochiKit.Base.update;B=D({id:bobj.uniqueId(),showMenu:true},B);var A=bobj.crv.SelectPageControl.getTextAndWidth(B.curPage,B.numPages);var C=newTextComboWidget(B.id,75,L_bobj_crv_PageNav,A.width+13,null,null,null,null);C.curPage=B.curPage;C.numPages=B.numPages;if(B.showMenu){C.addMenuItem(bobj.uniqueId(),L_bobj_crv_FirstPage,null,null,0,0,false,0,0);C.addMenuItem(bobj.uniqueId(),L_bobj_crv_LastPage,null,null,0,0,false,0,0);C.firstPage=C.menu.items[0];C.lastPage=C.menu.items[1];C.arrow.resize(13,(_ie?20:18));bobj.crv.setAllClasses(C.arrow,"toolbar_menuarrow");C.menu.setAccelEnabled(false)}else{C.arrow.setDisplay(false)}C.text.oldSetValue=C.text.setValue;C.text.setValue=function(F,E){C.text.oldSetValue(F);if(E&&C.text.layer){C.text.resize(E,null)}};C.text.focusCB=function(){C.text.setValue(C.curPage);var E=C.text.layer;if(E){E.select()}};C.text.blurCB=function(){var E=C.getTextAndWidth(C.curPage,C.numPages);C.text.setValue(E.text)};C.text.enterCB=function(){if(C.selectPageCB){var E=C.text.getValue();C.selectPageCB(E)}};C.margin=1;C.space=0;C.fieldWidth=30;C.labelWidth=13+C.space;C.selectPageCB=null;D(C,bobj.crv.SelectPageControl);C.updateTextValue();C.widgetType="SelectPageControl";return C};bobj.crv.SelectPageControl={getTextAndWidth:function(C,A){var D=L_bobj_crv_of.replace("%1",C).replace("%2",A);var B=(D.length>9)?(D.length*7):60;return{text:D,width:B}},update:function(A){if(A&&A.cons=="bobj.crv.newSelectPageControl"){this.curPage=A.args.curPage;this.numPages=A.args.numPages;this.updateTextValue()}},updateTextValue:function(){var A=this.getTextAndWidth(this.curPage,this.numPages);this.text.setValue(A.text,A.width);var B=this.text.layer;if(B){B.blur()}},getCurrentPage:function(){return this.curPage},setCurrentPage:function(A){this.curPage=A;this.updateTextValue()},getNumPages:function(){return this.numPages},setNumPages:function(A){this.numPages=A;this.updateTextValue()},getFirstPageButton:function(){return this.firstPage},getLastPageButton:function(){return this.lastPage}};bobj.crv.newSearchTextControl=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),icon:bobj.crv.allInOne.uri,dy:bobj.crv.allInOne.toolbarSearchDy,disDy:bobj.crv.allInOne.toolbarSearchDy},A);var B=newWidget(A.id);bobj.fillIn(B,A);B.textField=newTextFieldWidget(B.id+"_textField",null,null,null,MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,B),true,L_bobj_crv_SearchText,100);B.empty=(B.searchText=="");B.textField.focusCB=function(){if(B.empty){B.textField.setValue("")}};B.textField.blurCB=function(){if(B.textField.getValue()==""){B.textField.setValue(L_bobj_crv_Find);B.empty=true}else{B.empty=false}};B.searchButton=newIconWidget(B.id+"_button",A.icon,MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,B),null,L_bobj_crv_SearchText,16,16,3,A.dy,A.disDy,3,true);bobj.crv.setAllClasses(B.searchButton,"toolbar_button");B.initOld=B.init;B.searchTextCB=null;C(B,bobj.crv.SearchTextControl);B.widgetType="SearchTextControl";return B};bobj.crv.SearchTextControl={update:function(B){if(B&&B.cons=="bobj.crv.newSearchTextControl"){this.empty=(B.args.searchText=="");var A=(this.empty)?L_bobj_crv_Find:B.args.searchText;this.textField.setValue(A)}},init:function(){this.initOld();this.textField.init();var A=(this.empty)?L_bobj_crv_Find:this.searchText;this.textField.setValue(A);this.searchButton.init()},getHTML:function(){var B=bobj.html;var A={cursor:"default","padding-left":this.space+"px",width:this.labelWidth+"px"};return B.TABLE({id:this.id,cellspacing:0,cellpadding:0,border:0,style:{margin:this.margin+"px"}},B.TBODY(null,B.TR(null,B.TD(null,this.textField.getHTML()),B.TD(null,this.searchButton.getHTML()))))},_searchTextCB:function(){var A=this.textField.getValue();if((A!==""||this.searchText!=A)&&bobj.isFunction(this.searchTextCB)){this.searchTextCB(A)}}};bobj.crv.newToolbarButtonGroup=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null}},A);var B=newPaletteContainerWidget(A.id);B.margin=2;bobj.fillIn(B,A);B.widgetType="ToolbarButtonGroup";B.initOld=B.init;C(B,bobj.crv.ToolbarButtonGroup);B.palette=newPaletteWidget(B.id+"_palette");B.add(B.palette);return B};bobj.crv.ToolbarButtonGroup={addChild:function(A){switch(A.widgetType){case"ExportButton":this.exportButton=A;break;case"PrintButton":this.printButton=A;break;case"RefreshButton":this.refreshButton=A;break;case"DrillUpButton":this.drillUpButton=A}this.palette.add(A)},update:function(C){if(C!=null&&C.cons=="bobj.crv.newToolbarButtonGroup"){for(var A in C.children){var B=C.children[A];if(B){switch(B.cons){case"bobj.crv.newPrintButton":if(this.printButton){this.printButton.update(B)}break;case"bobj.crv.newExportButton":if(this.exportButton){this.exportButton.update(B)}break;case"bobj.crv.newRefreshButton":if(this.refreshButton){this.refreshButton.update(B)}break;case"bobj.crv.newDrillUpButton":if(this.drillUpButton){this.drillUpButton.update(B)}break}}}}},isAnyButtonDisplayed:function(){return(this.printButton!=null&&this.printButton.isDisplayed())||(this.exportButton!=null&&this.exportButton.isDisplayed())||(this.refreshButton!=null&&this.refreshButton.isDisplayed())||(this.drillUpButton!=null&&this.drillUpButton.isDisplayed())},autoDisplay:function(){if(this.isAnyButtonDisplayed()){this.setDisplay(true)}else{this.setDisplay(false)}},getExportButton:function(){return this.exportButton},getRefreshButton:function(){return this.refreshButton},getDrillUpButton:function(){return this.drillUpButton},getPrintButton:function(){return this.printButton},init:function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.palette.init()},beginHTML:function(){var A=bobj.html;return A.openTag("table",{id:this.id,"class":"dialogzone toolbar",border:"0",cellspacing:"0",cellpadding:"0",style:{overflow:"hidden",margin:this.margin+"px"}})+A.openTag("tr",null)+A.TD({style:{width:"2px"}},A.IMG({src:_skin+"../transp.gif","class":"toolbar_buttongroup_left"}))+A.openTag("td",{"class":"toolbar_buttongroup"})},endHTML:function(){var A=bobj.html;return A.closeTag("td",null)+A.TD({style:{width:"2px"}},A.IMG({src:_skin+"../transp.gif","class":"toolbar_buttongroup_right"}))+A.closeTag("tr",null)+A.closeTag("table")},getHTML:function(){return this.beginHTML()+this.palette.getHTML()+this.endHTML()}};bobj.crv.newToolbarButtonGroupSeparator=function(){return newPaletteVerticalSepWidget(bobj.uniqueId())};bobj.crv.newStatusbar=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null}},A);var B=newPaletteContainerWidget(A.id);B.margin=0;bobj.fillIn(B,A);B._rightZoneWgts=[];B.widgetType="Statusbar";B.initOld=B.init;C(B,bobj.crv.Statusbar);B.palette=newPaletteWidget(B.id+"_palette");B.palette.isLeftTableFixed=true;B.add(B.palette);return B};bobj.crv.Statusbar={init:function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.palette.init()},beginHTML:function(){return bobj.html.openTag("div",{id:this.id,"class":"dialogzone",style:{width:"100%",overflow:"hidden",margin:this.margin+"px",padding:"2px 0px",position:"absolute"}})},getHTML:function(){this._addRightZone();return(this.beginHTML()+this.palette.getHTML()+this.endHTML())},_addRightZone:function(){this.palette.beginRightZone();var A=null;while(A=this._rightZoneWgts.pop()){this.palette.add(A)}delete this._rightZoneWgts},write:function(){this._addRightZone();this.begin();this.palette.write();this.end();document.write(bobj.crv.getInitHTML(this.widx))},addChild:function(A){switch(A.widgetType){case"StatusbarBreadcrumb":this.breadcrumb=A;break;case"StatusbarVersionIndicator":this.versionIndicator=A;break}if(A.layoutAlign=="right"){this._rightZoneWgts.push(A)}else{this.palette.add(A)}},update:function(C){if(C){for(var A in C.children){var B=C.children[A];if(B){switch(B.cons){case"bobj.crv.newStatusbarBreadcrumb":if(this.breadcrumb){this.breadcrumb.update(B.args)}break;case"bobj.crv.newStatusbarVersionIndicator":if(this.versionIndicator){this.versionIndicator.update(B.args)}break}}}}},doLayout:function(){if(this.breadcrumb){this.breadcrumb._doLayout()}}};bobj.crv.newStatusbarBreadcrumb=function(A){var B=newWidget(bobj.uniqueId());B.widgetType="StatusbarBreadcrumb";B.values=A.values;B.layoutAlign="left";B._separatorImage=img(bobj.crvUri("images/breadcrumbSep.gif"),14,9);MochiKit.Base.update(B,bobj.crv.StatusbarBreadcrumb);return B};bobj.crv.StatusbarBreadcrumb={update:function(A){this.values=A.values;this.layer.innerHTML=this._render()},getHTML:function(){return bobj.html.DIV({"class":"statusbar_breadcrumb"},bobj.html.DIV({id:this.id},this._render()))},_render:function(){var B="";if(this.values&&this.values.length>0){var A="";for(i=0;i<this.values.length;i++){if(i>0){A+=bobj.html.TD(null,this._separatorImage)}A+=bobj.html.TD({style:{"white-space":"nowrap"}},this.values[i])}B=bobj.html.TABLE({"class":"iconText",cellspacing:"0",cellpadding:"0"},bobj.html.TR(null,A))}return B},_doLayout:function(){var A=(this.layer.parentNode.scrollWidth>this.layer.parentNode.offsetWidth)||(this.layer.offsetLeft<0);if(A){this.layer.style.position="absolute";this.layer.style.top="0px";this.layer.style.right="0px"}else{this.layer.style.position=""}}};bobj.crv.newStatusbarVersionIndicator=function(A){var C=(A&&A.value)?L_bobj_crv_LastRefreshed+": "+A.value:" ";var B=NewLabelWidget(bobj.uniqueId(),C,true);B.widgetType="StatusbarVersionIndicator";B.layoutAlign="right";MochiKit.Base.update(B,bobj.crv.StatusbarVersionIndicator);return B};bobj.crv.StatusbarVersionIndicator={update:function(A){var B=(A&&A.value)?L_bobj_crv_LastRefreshed+":&nbsp;"+A.value:"&nbsp;";this.layer.innerHTML=B}};bobj.crv.newGroupTreeNode=function(B){var E=MochiKit.Base.update;B=E({id:bobj.uniqueId()},B);var A=null;var C=-1;if(!B.isVisible){C=0;A=L_bobj_crv_Tree_Drilldown_Node.replace("%1",B.groupName)}var D=newTreeWidgetElem(C,B.groupName,B.groupPath,null,null,null,A,null,null,false);D._children=[];D._curSigs=[];bobj.fillIn(D,B);D.widgetType="GroupTreeNode";D.initOld=D.init;D.selectOld=D.select;D.select=bobj.crv.GroupTreeNode._drilldown;if(!B.isVisible){D.setCursorClass("drill_cursor")}E(D,bobj.crv.GroupTreeNode);return D};bobj.crv.GroupTreeNode={dispose:function(){while(this._curSigs.length>0){bobj.crv.SignalDisposer.dispose(this._curSigs.pop())}while(this._children.length>0){var A=this._children.pop();A.dispose();bobj.deleteWidget(A);delete A}this.sub=[]},init:function(B){this.initOld(B);this._setVisualStyle();if(this.isStatic){var A=MochiKit.DOM.getElementsByTagAndClassName("span","treeNormal",this.layer);if(A&&A.length>0){A[0].style.cursor="text"}}},isExpanded:function(){var A=TreeIdToIdx(this.layer);return _TreeWidgetElemInstances[A].expanded},expand:function(){var A=TreeIdToIdx(this.layer);_TreeWidgetElemInstances[A].expanded=false;TreeWidget_toggleCB(A)},collapse:function(){var A=TreeIdToIdx(this.layer);_TreeWidgetElemInstances[A].expanded=true;TreeWidget_toggleCB(A)},_setVisualStyle:function(){try{var E=this.layer.lastChild;var A=this.treeView}catch(C){return }var B=A.visualStyle;var D=E.style;if(B.fontFamily){D.fontFamily=B.fontFamily}if(B.fontWeight){D.fontWeight=B.fontWeight}if(B.textDecoration){D.textDecoration=B.textDecoration}if(B.color){D.color=B.color}if(B.fontStyle){D.fontStyle=B.fontStyle}if(B.fontSize){D.fontSize=B.fontSize}},delayedAddChild:function(I,H){var D=MochiKit.Signal.connect;var G=MochiKit.Signal.signal;var B=MochiKit.Base.partial;var E=this._children.length;if(E>0){this.expanded=true}else{this.expanded=false;if(!this.leaf){this.setIncomplete(bobj.crv.GroupTreeNode._getChildren)}}var C=this._children;for(var F=0;F<E;F++){var A=C[F];A.expandPath=this.expandPath+"-"+F;A._updateProperty(I,H);this.add(A);this._curSigs.push(D(A,"grpDrilldown",B(G,this,"grpDrilldown")));this._curSigs.push(D(A,"grpNodeRetrieveChildren",B(G,this,"grpNodeRetrieveChildren")));A.delayedAddChild(I,H)}},addChild:function(A){this._children.push(A)},getLevel:function(){return this.expandPath.split("-").length},_drilldown:function(){this.selectOld();MochiKit.Signal.signal(this,"grpDrilldown",this.groupName,this.groupPath,this.isVisible,this.groupNamePath)},_getChildren:function(){this.plusLyr.src=_skin+"../loading.gif";MochiKit.Signal.signal(this,"grpNodeRetrieveChildren",this.expandPath)},_updateProperty:function(B,C){var A=false;if(this.isVisible&&!C){A=true}else{if(!this.isVisible&&!B){A=true}}if(A){this.select=MochiKit.Base.noop}this.isStatic=A}};bobj.crv.newGroupTree=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null},icns:bobj.crvUri("images/magnify.gif"),minIcon:bobj.crvUri("images/min.gif"),plusIcon:bobj.crvUri("images/plus.gif")},A);var B=newTreeWidget(A.id+"_tree","100%","100%",A.icns,null,null,"groupTree",bobj.crv.GroupTree._expand,bobj.crv.GroupTree._collapse,null,A.minIcon,A.plusIcon);B._children=[];B._modalChildren=[];B._lastNodeIdInitialized=-1;B._lastNodeInitialized=null;B._curSigs=[];bobj.fillIn(B,A);B.widgetType="GroupTree";B.initOld=B.init;C(B,bobj.crv.GroupTree);return B};bobj.crv.GroupTree={dispose:function(){while(this._curSigs.length>0){bobj.crv.SignalDisposer.dispose(this._curSigs.pop())}while(this._children.length>0){var A=this._children.pop();A.dispose();bobj.deleteWidget(A);delete A}this._lastNodeIdInitialized=-1;this._lastNodeInitialized=null;this.sub=[];bobj.removeAllChildElements(this.treeLyr)},getModalChildren:function(){return this._modalChildren},addChild:function(D){var B=MochiKit.Base;var C=MochiKit.Signal;var A=C.connect;D.expandPath=this._children.length+"";this._children.push(D);D._updateProperty(this.enableDrilldown,this.enableNavigation);this.add(D);D.delayedAddChild(this.enableDrilldown,this.enableNavigation);this._curSigs.push(A(D,"grpDrilldown",B.partial(C.signal,this,"grpDrilldown")));this._curSigs.push(A(D,"grpNodeRetrieveChildren",B.partial(C.signal,this,"grpNodeRetrieveChildren")))},delayedBatchAdd:function(D){if(!D||D.length==0){return }this._modalChildren=D;var C="";var B=D.length>100?100:D.length;if(B>0){for(var A=0;A<B;A++){var E=bobj.crv.createWidget(this._modalChildren[A]);this.addChild(E);if(this.initialized()){C+=E.getHTML(0)}}}if(this.initialized()){this.appendChildrenHTML(C);this.initChildren()}},appendChildrenHTML:function(A){append(this.treeLyr,A)},init:function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.css.verticalAlign="top";this.initChildren();this._groupTreeListener=new bobj.crv.GroupTreeListener(this)},update:function(C){if(C.cons=="bobj.crv.newGroupTree"){var A=C.args;var B=A.lastExpandedPath;if(B.length>0&&this._children.length>0){this.updateNode(B,C)}else{this.refreshChildNodes(C)}}},delayedAddChild:function(A){this.addChild(A);append(this.treeLyr,A.getHTML(this.initialIndent))},initChildren:function(){while(this._lastNodeIdInitialized<this._children.length-1){this.initNextChild()}},initNextChild:function(){var A=null;var B=-1;if(this._lastNodeIdInitialized==-1){var C=getLayer("treeCont_"+this.id);A=C.firstChild;B=0}else{A=this._lastNodeInitialized.nextSibling;while(!(A.id&&A.id.indexOf("TWe_")>-1)){A=A.nextSibling}B=this._lastNodeIdInitialized+1}if(B<this._children.length&&A!=null){this._children[B].init(A);this._lastNodeInitialized=A;this._lastNodeIdInitialized=B}},getBestFitHeight:function(){return bobj.getHiddenElementDimensions(this.layer).h},refreshChildNodes:function(A){this.dispose();this.delayedBatchAdd(A.children);MochiKit.Signal.signal(this,"refreshed")},updateNode:function(J,F){if(J&&J.length>0){var B=J.split("-");var C=this;var H=F;for(var E=0,G=B.length;E<G;E++){if(C&&H){var D=parseInt(B[E]);H=H.children[D];C=C._children[D]}else{break}}if(C&&H&&H.args.groupPath==C.groupPath&&C._children.length==0){for(var A in H.children){var I=bobj.crv.createWidget(H.children[A]);C.addChild(I)}C.delayedAddChild(this.enableDrilldown,this.enableNavigation);C.expand()}}},getChildrenCount:function(){return this.sub.length},_collapse:function(A){MochiKit.Signal.signal(this,"grpNodeCollapse",A)},_expand:function(A){MochiKit.Signal.signal(this,"grpNodeExpand",A)},resize:function(B,A){bobj.setOuterSize(this.layer,B,A);MochiKit.Signal.signal(this,"resized")}};bobj.crv.GroupTreeListener=function(A){this._groupTree=A;this._groupTreePrevState=this.getTreeState();this._lastNodeRendererd=this.getNumberOfNodesRendered()-1;this._nodeHeight=-1;this._futreNodesPlaceHolder=null;this.actionIDs=[];this.addFutureNodesPlaceHolder();MochiKit.Signal.connect(A.layer,"onscroll",bobj.bindFunctionToObject(this.detectTreeChanges,this));MochiKit.Signal.connect(A,"refreshed",this,this.reset);MochiKit.Signal.connect(A,"resized",this,this.detectTreeChanges)};bobj.crv.GroupTreeListener.prototype={getNumberOfNodesRendered:function(){return this._groupTree.getChildrenCount()},getNumberOfNodesMissing:function(){return this._groupTree.getModalChildren().length-this._lastNodeRendererd-1},getTreeState:function(){var A=this._groupTree;return{height:A.getHeight(),scrollTop:A.layer.scrollTop}},getNumberOfNodesToRender:function(){if(this.getNumberOfNodesMissing()==0){return 0}var A=this._groupTree.sub[this._lastNodeRendererd];var D=this.getTreeState();if(A!=null){var C=A.layer.offsetTop;if(C<D.scrollTop+D.height){var B=D.scrollTop+D.height-C;return Math.floor(B/this.getNodeHeight())}}return 0},getNodeHeight:function(){if(this._nodeHeight>-1){return this._nodeHeight}else{if(this.getNumberOfNodesRendered()>0){var A=this._groupTree.sub[0];this._nodeHeight=bobj.getHiddenElementDimensions(A.layer).h;return this._nodeHeight}}return 0},updateTreeChildren:function(){var A=this.getNumberOfNodesToRender();var F=this._groupTree.getModalChildren();if(A>0){var C="";for(var B=this._lastNodeRendererd+1,E=this._lastNodeRendererd+A;B<=E;B++){var D=F[B];if(D!=null){var G=bobj.crv.createWidget(D);this._groupTree.addChild(G);C+=G.getHTML(0);this._lastNodeRendererd=B}}this._groupTree.appendChildrenHTML(C);this._groupTree.initChildren()}this.updateFutureNodesPlaceHolderHeight()},detectTreeChanges:function(){if(this.isTreeStateChanged()){this.actionIDs.push(setTimeout(bobj.bindFunctionToObject(this.updateTreeChildren,this),200))}this._groupTreePrevState=this.getTreeState()},isTreeStateChanged:function(){var A=this.getTreeState();if(A.height!=this._groupTreePrevState.height){return true}if(A.scrollTop!=this._groupTreePrevState.scrollTop){return true}return false},reset:function(){this._groupTreePrevState=this.getTreeState();this._lastNodeRendererd=this.getNumberOfNodesRendered()-1;this.clearActions();this.updateFutureNodesPlaceHolderHeight()},clearActions:function(){while(this.actionIDs.length>0){clearTimeout(this.actionIDs.pop())}},updateFutureNodesPlaceHolderHeight:function(){var A=this.getFutureNodesPlaceHolderLayer();if(A!=null){A.style.height=(this.getNumberOfNodesMissing()*this.getNodeHeight())+"px"}},getFutureNodesPlaceHolderLayer:function(){return this._futreNodesPlaceHolder},addFutureNodesPlaceHolder:function(){this._futreNodesPlaceHolder=MochiKit.DOM.DIV({id:bobj.uniqueId()+"_futureHolder",style:{width:"0px",height:(this.getNumberOfNodesMissing()*this.getNodeHeight())+"px"}});this._groupTree.layer.appendChild(this._futreNodesPlaceHolder)}};bobj.crv.ToolPanelType={None:"None",GroupTree:"GroupTree",ParameterPanel:"ParameterPanel"};bobj.crv.ToolPanelTypeDetails={None:{title:null,img:null,alt:null},GroupTree:{title:L_bobj_crv_GroupTree,img:{uri:bobj.crv.allInOne.uri,dx:0,dy:bobj.crv.allInOne.groupTreeToggleDy},alt:L_bobj_crv_GroupTree},ParameterPanel:{title:L_bobj_crv_ParamPanel,img:{uri:bobj.crv.allInOne.uri,dx:0,dy:bobj.crv.allInOne.paramPanelToggleDy},alt:L_bobj_crv_ParamPanel}};bobj.crv.newToolPanel=function(A){A=MochiKit.Base.update({id:bobj.uniqueId()+"_toolPanel",width:"300px",height:"100%",initialViewType:bobj.crv.ToolPanelType.None},A);var B=newWidget(A.id);bobj.fillIn(B,A);B.widgetType="ToolPanel";B._children=[];B._selectedChild=null;B._groupTree=null;B._paramPanel=null;B.initOld=B.init;B.resizeOld=B.resize;MochiKit.Base.update(B,bobj.crv.ToolPanel);B.needLeftBorder=false;return B};bobj.crv.ToolPanel={hasGroupTree:function(){return this._groupTree!=null},addChild:function(E){if(!E){return }var C=MochiKit.Signal.connect;var B=MochiKit.Base.partial;var D=MochiKit.Signal.signal;var A=bobj.crv.ToolPanelType;if(E.widgetType=="GroupTree"){this._groupTree=E;MochiKit.Iter.forEach(["grpDrilldown","grpNodeRetrieveChildren","grpNodeCollapse","grpNodeExpand"],function(F){C(this._groupTree,F,B(D,this,F))},this);if(this.initialViewType==A.GroupTree){this._selectedChild=E}}else{if(E.widgetType=="ParameterPanel"){this._paramPanel=E;C(this._paramPanel,"resetParamPanel",B(D,this,"resetParamPanel"));if(this.initialViewType==A.ParameterPanel){this._selectedChild=E}}}this._children.push(E)},hasParameterPanel:function(){return this._paramPanel!=null},getParameterPanel:function(){return this._paramPanel},delayedAddChild:function(A){this.addChild(A);var B=A===this._selectedChild?"":"none";append2(this.layer,bobj.html.DIV({style:{display:B}},A.getHTML()));A.init()},setView:function(D){var B=this._selectedChild;this.updateSelectedChild(D);var A=this._selectedChild;if(B!=A){if(B){var C=bobj.getContainer(B);if(C){C.style.display="none"}}if(A){var C=bobj.getContainer(A);if(C){bobj.displayElementWithAnimation(C)}}}},updateSelectedChild:function(A){var B=bobj.crv.ToolPanelType;switch(A){case B.GroupTree:this._selectedChild=this._groupTree;break;case B.ParameterPanel:this._selectedChild=this._paramPanel;break;default:this._selectedChild=null}},getHTML:function(){var F=bobj.html;var I="";var C=this._children;for(var D=0,G=C.length;D<G;++D){var A=C[D];var J=A===this._selectedChild?"":"none";I+=F.DIV({style:{display:J}},A.getHTML())}var B=(bobj.crv.ToolPanelType.None!==this.initialViewType);var K="toolPanel";if(this.needLeftBorder){K+=" leftBorder"}var H={id:this.id,"class":K,style:{position:"absolute",margin:"0",width:this.width,height:this.height,overflow:"hidden",display:B?"":"none"}};var E=F.DIV(H,I);return E},init:function(){this.initOld();if(this._groupTree){this._groupTree.init()}if(this._paramPanel){this._paramPanel.init()}},update:function(C){if(C&&C.cons=="bobj.crv.newToolPanel"){for(var A in C.children){var B=C.children[A];if(B){switch(B.cons){case"bobj.crv.newGroupTree":if(this._groupTree){this._groupTree.update(B)}else{this.delayedAddChild(bobj.crv.createWidget(B))}break;case"bobj.crv.params.newParameterPanel":if(this._paramPanel){this._paramPanel.update(B)}else{this.delayedAddChild(bobj.crv.createWidget(B))}break}}}this.initialViewType=C.args.initialViewType;this.setView(this.initialViewType);this.css.width=C.args.width}},getBestFitHeight:function(){var A=0;if(this._selectedChild!=null){A=this._selectedChild.getBestFitHeight()}return A},hasPercentWidth:function(){return(this.width!=null)&&(this.width.length>0)&&(this.width.charAt(this.width.length-1)=="%")},getPercentWidth:function(){return parseInt(this.width)/100},_doLayout:function(){var A=this.layer.clientWidth;var B=this.layer.clientHeight;if(this._selectedChild){this._selectedChild.setDisplay(true);this._selectedChild.resize(A,B)}},resize:function(B,D){bobj.setOuterSize(this.layer,B,D);this._doLayout();var C=_ie&&_isQuirksMode?this.layer.offsetWidth:this.layer.clientWidth;var A=_ie&&_isQuirksMode?this.layer.offsetWidth:this.layer.clientWidth;MochiKit.Signal.signal(this,"resizeToolPanel",C,A);this.width=C},addLeftBorder:function(){this.needLeftBorder=true}};bobj.crv.PanelNavigator=function(){this._children=[];this.widgetType="PanelNavigator";this.id=bobj.uniqueId()+"_panelNav"};bobj.crv.PanelNavigator.prototype={getHTML:function(){var B="";for(var A=0;A<this._children.length;A++){B+=this._children[A].getHTML()}var D=bobj.html.DIV;var C={width:bobj.isBorderBoxModel()?"37px":"35px"};return D({"class":"panelNavigator",id:this.id,style:C},D({id:this.id+"_innerBorder","class":"panelNavigatorInnerBorder"},B))},init:function(){this.layer=getLayer(this.id);this._innerBorder=getLayer(this.id+"_innerBorder");this.css=this.layer.style;if(this._children.length==0){this.css.display="none"}else{for(var A=0;A<this._children.length;A++){this._children[A].init()}}},selectChild:function(A){for(var B=0;B<this._children.length;B++){var C=this._children[B];C.setSelected(C.getName()==A)}},getChild:function(A){for(var B=0;B<this._children.length;B++){var C=this._children[B];if(C.getName()==A){return C}}return null},hasChildren:function(){return(this._children.length>0)},getGroupTreeButton:function(){return this.getChild(bobj.crv.ToolPanelType.GroupTree)},getParamPanelButton:function(){return this.getChild(bobj.crv.ToolPanelType.ParameterPanel)},addChild:function(D){D=MochiKit.Base.update({name:"",title:"",img:{uri:"",dx:0,dy:0}},D);var C=MochiKit.Base.partial;var E=MochiKit.Signal.signal;var B=MochiKit.Signal.connect;var A=new bobj.crv.PanelNavigatorItem(D.name,D.img,D.title,35*this._children.length);B(A,"switchPanel",C(E,this,"switchPanel"));this._children.push(A)},resize:function(A,B){bobj.setOuterSize(this.layer,A,B);bobj.setOuterSize(this._innerBorder,A-2,B-2)},getBestFitHeight:function(){var A=0;for(var B=0;B<this._children.length;B++){A+=this._children[B].getHeight()}return A},move:Widget_move,getWidth:Widget_getWidth};bobj.crv.PanelNavigatorItem=function(B,A,D,C){this._name=B;this._img=A;this._isSelected=false;this._title=D;this.topOffset=C;this.widgetType="PanelNavigatorItem";this.id=bobj.uniqueId()+"_navItem_"+B};bobj.crv.PanelNavigatorItem.prototype={getHTML:function(){var B=bobj.html;var A=this._img;return B.DIV({id:this.id,"class":"panelNavigatorItem",tabindex:"0",style:{top:this.topOffset+"px"},title:this._title,role:"button"},imgOffset(A.uri,22,22,A.dx,A.dy,null,'class="panelNavigatorItemImage" title="'+this._title+'"'))},getName:function(){return this._name},init:function(){this.layer=getLayer(this.id);this.css=this.layer.style;var A=MochiKit.Signal.connect;A(this.layer,"onclick",this,this._onClick);A(this.layer,"onkeydown",this,this._onKeyDown);A(this.layer,"onmouseover",this,this._onMouseOver);A(this.layer,"onmouseout",this,this._onMouseOut);A(this.layer,"onfocus",this,this._onFocus);A(this.layer,"onblur",this,this._onBlur);this.setSelected(this._isSelected)},_onFocus:function(){MochiKit.DOM.addElementClass(this.layer,"highlighted")},_onBlur:function(){MochiKit.DOM.removeElementClass(this.layer,"highlighted")},_onMouseOver:function(){MochiKit.DOM.addElementClass(this.layer,"highlighted")},_onMouseOut:function(){MochiKit.DOM.removeElementClass(this.layer,"highlighted")},_onKeyDown:function(A){if(A&&A.key()&&(A.key().code==13||A.key().code==32)){this._signalSwitchPanel()}},_onClick:function(){this._signalSwitchPanel()},_signalSwitchPanel:function(){if(!this._isSelected){MochiKit.Signal.signal(this,"switchPanel",this._name)}},setSelected:function(A){this._isSelected=A;var B=MochiKit.DOM;if(this.layer){if(A){B.addElementClass(this.layer,"selected")}else{B.removeElementClass(this.layer,"selected")}}},getWidth:Widget_getWidth,getHeight:Widget_getHeight,setDisplay:Widget_setDisplay,isDisplayed:Widget_isDisplayed};bobj.crv.PanelHeader=function(){this.id=bobj.uniqueId()+"_panelHeader";this._closeButton=newIconWidget(this.id+"_close",bobj.crv.allInOne.uri,bobj.bindFunctionToObject(this._closeButtonOnClick,this),null,L_bobj_crv_Close,8,7,0,bobj.crv.allInOne.closePanelDy,null,null,true);this.normalCssClass="panelHeaderCloseButton";this.highlightedCssClass="panelHeaderCloseButtonHighlighted";this._closeButton.setClasses(this.normalCssClass,this.normalCssClass,this.highlightedCssClass,this.highlightedCssClass);this._title=""};bobj.crv.PanelHeader.prototype={getHTML:function(){var B=bobj.html.DIV;var A={height:bobj.isBorderBoxModel()?"21px":"20px"};return B({"class":"panelHeader",id:this.id,style:A},B({"class":"panelHeaderTitle",id:this.id+"_title"},this._title),B({"class":"panelHeaderButtonCtn"},this._closeButton.getHTML()))},init:function(){this.layer=getLayer(this.id);this.css=this.layer.style;this._closeButton.init();var A=this._closeButton.layer;if(A){MochiKit.Signal.connect(A,"onfocus",this,this._closeButtonOnFocus);MochiKit.Signal.connect(A,"onblur",this,this._closeButtonOnBlur)}},_getTitleLayer:function(){return getLayer(this.id+"_title")},setTitle:function(B){this._title=B;this._closeButton.changeTooltip(L_bobj_crv_Close+" "+B);var A=this._getTitleLayer();if(A){A.innerHTML=B}},_closeButtonOnFocus:function(){if(this._closeButton&&this._closeButton.layer){MochiKit.DOM.addElementClass(this._closeButton.layer,this.highlightedCssClass)}},_closeButtonOnBlur:function(){if(this._closeButton&&this._closeButton.layer){MochiKit.DOM.removeElementClass(this._closeButton.layer,this.highlightedCssClass)}},_closeButtonOnClick:function(){MochiKit.Signal.signal(this,"switchPanel",bobj.crv.ToolPanelType.None)},resize:function(A,B){if(this.layer){bobj.setOuterSize(this.layer,A,B)}var C=this._getTitleLayer();if(C){bobj.setOuterSize(C,A-30)}},hideCloseButton:function(){if(this._closeButton){this._closeButton.setDisplay(false)}},getWidth:Widget_getWidth,getHeight:Widget_getHeight,move:Widget_move,setDisplay:Widget_setDisplay};bobj.crv.newLeftPanel=function(A){A=MochiKit.Base.update({id:bobj.uniqueId()+"_leftPanel",hasToggleGroupTreeButton:true,hasToggleParameterPanelButton:true,paramIconImg:null,treeIconImg:null},A);return new bobj.crv.LeftPanel(A.id,A.hasToggleGroupTreeButton,A.hasToggleParameterPanelButton,A.paramIconImg,A.treeIconImg)};bobj.crv.LeftPanel=function(E,C,B,D,A){this._panelNavigator=null;this._panelHeader=null;this._toolPanel=null;this.id=E;this.widgetType="LeftPanel";this.hasToggleParameterPanelButton=B;this.hasToggleGroupTreeButton=C;this.paramIconImg=D;this.treeIconImg=A;this._lastViewedPanel=null};bobj.crv.LeftPanel.prototype={getHTML:function(){var C=this._toolPanel?this._toolPanel.getHTML():"";var B=this._panelHeader?this._panelHeader.getHTML():"";var A=this._panelNavigator?this._panelNavigator.getHTML():"";return bobj.html.DIV({"class":"leftPanel",id:this.id},A,B,C)},getBestFitWidth:function(){var A=0;if(this._panelNavigator){A+=this._panelNavigator.getWidth()}if(this._toolPanel&&this._toolPanel.isDisplayed()){A+=this._toolPanel.getWidth()}else{A+=5}return A},getBestFitHeight:function(){var A=0;var B=0;if(this._panelHeader){A+=this._panelHeader.getHeight()}if(this._toolPanel){A+=this._toolPanel.getBestFitHeight()}if(this._panelNavigator){B=this._panelNavigator.getBestFitHeight()}return Math.max(A,B)},update:function(C){if(!C||C.cons!="bobj.crv.newLeftPanel"){return }for(var A in C.children){var B=C.children[A];if(B&&B.cons=="bobj.crv.newToolPanel"){if(this._toolPanel){this._toolPanel.update(B)}break}}},init:function(){this.layer=getLayer(this.id);this.css=this.layer.style;if(this._toolPanel){this._toolPanel.init()}if(this._panelHeader){this._panelHeader.init();if(!this.isToolPanelDisplayed()){this._panelHeader.setDisplay(false)}}if(this._panelNavigator){this._panelNavigator.init()}},_initSignals:function(){var B=MochiKit.Base.partial;var C=MochiKit.Signal.signal;var A=MochiKit.Signal.connect;if(this._toolPanel){MochiKit.Iter.forEach(["grpDrilldown","grpNodeRetrieveChildren","grpNodeCollapse","grpNodeExpand","resetParamPanel","resizeToolPanel"],function(D){A(this._toolPanel,D,B(C,this,D))},this)}if(this._panelNavigator){A(this._panelNavigator,"switchPanel",this,"_switchPanel")}if(this._panelHeader){A(this._panelHeader,"switchPanel",this,"_switchPanel")}},isToolPanelDisplayed:function(){return this._toolPanel&&this._toolPanel.isDisplayed()},displayLastViewedPanel:function(){if(this._toolPanel){switch(this._lastViewedPanel){case bobj.crv.ToolPanelType.GroupTree:this._switchPanel(bobj.crv.ToolPanelType.GroupTree);break;case bobj.crv.ToolPanelType.ParameterPanel:this._switchPanel(bobj.crv.ToolPanelType.ParameterPanel);break;default:this._switchPanel(bobj.crv.ToolPanelType.GroupTree)}}},hideToolPanel:function(){this._switchPanel(bobj.crv.ToolPanelType.None)},_switchPanel:function(A){if(this._toolPanel){this._toolPanel.setView(A);if(A==bobj.crv.ToolPanelType.None){this._toolPanel.setDisplay(false);this._panelHeader.setDisplay(false)}else{this._toolPanel.setDisplay(true);this._panelHeader.setDisplay(true);this._lastViewedPanel=A}}if(this._panelHeader){var B=bobj.crv.ToolPanelTypeDetails[A].title}this._panelHeader.setTitle(B);if(this._panelNavigator){this._panelNavigator.selectChild(A)}MochiKit.Signal.signal(this,"switchPanel",A)},getPanelNavigator:function(){return this._panelNavigator},getToolPanel:function(){return this._toolPanel},addChild:function(A){if(A.widgetType=="ToolPanel"){this._toolPanel=A;this.updateChildren();this._initSignals()}},updateChildren:function(){if(this._toolPanel){this._panelNavigator=new bobj.crv.PanelNavigator();this._panelHeader=new bobj.crv.PanelHeader();var A=null;if(this._toolPanel.hasParameterPanel()&&this.hasToggleParameterPanelButton){A={name:bobj.crv.ToolPanelType.ParameterPanel,img:this.paramIconImg?this.paramIconImg:bobj.crv.ToolPanelTypeDetails.ParameterPanel.img,title:bobj.crv.ToolPanelTypeDetails.ParameterPanel.title};this._panelNavigator.addChild(A)}if(this._toolPanel.hasGroupTree()&&this.hasToggleGroupTreeButton){A={name:bobj.crv.ToolPanelType.GroupTree,img:this.treeIconImg?this.treeIconImg:bobj.crv.ToolPanelTypeDetails.GroupTree.img,title:bobj.crv.ToolPanelTypeDetails.GroupTree.title};this._panelNavigator.addChild(A)}this._lastViewedPanel=this._toolPanel.initialViewType;this._panelNavigator.selectChild(this._toolPanel.initialViewType);this._panelHeader.setTitle(bobj.crv.ToolPanelTypeDetails[this._toolPanel.initialViewType].title);if(!this._panelNavigator.hasChildren()){this._panelHeader.hideCloseButton();this._toolPanel.addLeftBorder()}}},resize:function(A,B){bobj.setOuterSize(this.layer,A,B);this._doLayout()},_doLayout:function(){if(!this._toolPanel||!this._panelNavigator||!this._panelHeader){return }var B=this.getWidth();var D=this.getHeight();var C=this._panelNavigator.getWidth();var A=B-C;var E=D-this._panelHeader.getHeight();if(this._toolPanel.isDisplayed()){this._toolPanel.resize(A,E);this._toolPanel.move(C,this._panelHeader.getHeight())}this._panelHeader.resize(A,null);this._panelHeader.move(C,0);this._panelNavigator.resize(C,D)},move:Widget_move,getWidth:Widget_getWidth,getHeight:Widget_getHeight};bobj.crv.newReportPage=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),bgColor:"#FFFFFF",width:720,height:984,documentView:bobj.crv.ReportPage.DocumentView.PRINT_LAYOUT},A);var B=newWidget(A.id);B.widgetType="ReportPage";bobj.fillIn(B,A);B.initOld=B.init;B.resizeOld=B.resize;MochiKit.Base.update(B,bobj.crv.ReportPage);return B};bobj.crv.ReportPage={DocumentView:{WEB_LAYOUT:"weblayout",PRINT_LAYOUT:"printlayout"},dispose:function(){MochiKit.DOM.removeElement(this.layer)},displayScrollBars:function(A){this.layer.style.overflow=A?"auto":"hidden"},isDisplayScrollBars:function(){this.layer.style.overflow=="auto"},update:function(A){if(A&&A.cons=="bobj.crv.newReportPage"){this.updateSize({width:A.args.width,height:A.args.height});this.layer.scrollLeft=0;this.layer.scrollTop=0;this.updateHTML(A.args.content,false)}},scrollToHighlighted:function(A){if(this._iframe){var E=_ie?this._iframe.contentWindow.document:this._iframe.contentDocument;var C=E.getElementById("CrystalHighLighted");if(C){var D=MochiKit.Style.getElementPosition(C,null,E);if(A){var B=MochiKit.Style.getElementPosition(this.layer);window.scrollTo(B.x+D.x,B.y+D.y)}else{this.layer.scrollLeft=D.x;this.layer.scrollTop=D.y}}}},updateHTML:function(A,C){if(A){if(!this._iframe){this._iframe=MochiKit.DOM.createDOM("IFRAME",{id:this.id+"_iframe",width:"100%",height:"100%",frameBorder:"0",margin:"0"});this._pageNode.appendChild(this._iframe)}if(C){this._iframe.style.display="none"}var B=_ie?this._iframe.contentWindow.document:this._iframe.contentDocument;B.open();B.write(this.getIFrameHTML(A));B.close();if(C){bobj.displayElementWithAnimation(this._iframe)}}},getIFrameHTML:function(A){return'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html>\r\n<head>\r\n<style> body { overflow :hidden; margin : 0px;}</style>\r\n</head>\r\n<body>\r\n'+A+"</body>\r\n</html>"},updateSize:function(B){if(B){this.width=(B.width!=undefined)?B.width:this.width;this.height=(B.height!=undefined)?B.height:this.height}if(this._pageNode){var A=bobj.isBorderBoxModel();this._pageNode.style.width=(A?this.width+2:this.width)+"px";this._pageNode.style.height=(A?this.height+2:this.height)+"px"}if(this._shadowNode){this._shadowNode.style.width=(A?this.width+2:this.width)+"px";this._shadowNode.style.height=(A?this.height+2:this.height)+"px"}},getHTML:function(){var E=bobj.html;var G=bobj.isBorderBoxModel();var F={width:"100%",height:"100%",overflow:"auto",position:"absolute"};var B={position:"relative",width:(G?this.width+2:this.width)+"px",height:(G?this.height+2:this.height)+"px","z-index":1,"border-width":"1px","border-style":"solid","background-color":this.bgColor,overflow:"hidden","text-align":"left"};var A={position:"absolute","z-index":0,display:"none",width:(G?this.width+2:this.width)+"px",height:(G?this.height+2:this.height)+"px",top:"0px",left:"0px"};var C="";if(this.documentView.toLowerCase()==bobj.crv.ReportPage.DocumentView.PRINT_LAYOUT){F["background-color"]="#8E8E8E";B["border-color"]="#000000";A["background-color"]="#737373";C=E.DIV({id:this.id+"_shadow","class":"menuShadow",style:A});F["text-align"]="center";B.margin="0 auto";B.top="6px"}else{F["background-color"]="#FFFFFF";B["border-color"]="#FFFFFF";B.margin="0"}var D=E.DIV({id:this.id,style:F,"class":"insetBorder"},E.DIV({id:this.id+"_page",style:B}),C);return D},init:function(){this._pageNode=getLayer(this.id+"_page");this._shadowNode=getLayer(this.id+"_shadow");this.initOld();this.updateHTML(this.content,true)},updateShadowLocation:function(){var A=function(){if(this._shadowNode&&this._pageNode){this._shadowNode.style.display="none";var B={x:this._pageNode.offsetLeft,y:this._pageNode.offsetTop};this._shadowNode.style.display="block";this._shadowNode.style.top=B.y+(bobj.isBorderBoxModel()?4:6)+"px";this._shadowNode.style.left=B.x+(bobj.isBorderBoxModel()?4:6)+"px"}};setTimeout(bobj.bindFunctionToObject(A,this),0)},resize:function(A,B){bobj.setOuterSize(this.layer,A,B);if(_moz){this.css.clip=bobj.getRect(0,A,B,0)}this.updateShadowLocation()},getBestFitSize:function(){var A=this._pageNode;return{width:A.offsetWidth+30,height:A.offsetHeight+30}},hideFrame:function(){this.css.borderStyle="none";this._pageNode.style.border=""}};bobj.crv.newReportView=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),viewStateId:null,isMainReport:false},A);var B=newWidget(A.id);bobj.fillIn(B,A);B.widgetType="ReportView";B.reportPage=null;B._lastPanelWidth=null;B.initOld=B.init;B.isMainReportFlag=B.isMainReport;MochiKit.Base.update(B,bobj.crv.ReportView);return B};bobj.crv.ReportView={init:function(){this.initOld();if(this.reportPage){this.reportPage.init()}},addChild:function(A){if(A.widgetType=="ReportPage"){this.reportPage=A}},delayedAddChild:function(A){this.addChild(A);append2(this.layer,A.getHTML());A.init()},scrollToHighlighted:function(A){if(this.reportPage){this.reportPage.scrollToHighlighted(A)}},update:function(C){if(C&&C.cons=="bobj.crv.newReportView"){if(C.args){this.viewStateId=C.args.viewStateId}for(var A in C.children){var B=C.children[A];if(B&&B.cons=="bobj.crv.newReportPage"){if(!this.reportPage){this.delayedAddChild(bobj.crv.createWidget(B))}else{this.reportPage.update(B)}break}}}},getHTML:function(){var B=bobj.html;var C={width:"100%",height:"100%",overflow:"hidden",position:"relative"};var A=B.DIV({id:this.id,style:C},this.reportPage?this.reportPage.getHTML():"");return A},_doLayout:function(){if(this.reportPage){this.reportPage.resize(this.getWidth(),this.getHeight())}},isMainReport:function(){return this.isMainReportFlag},resize:function(){this._doLayout()},dispose:function(){if(this.reportPage){this.reportPage.dispose();bobj.deleteWidget(this.reportPage);delete this.reportPage}bobj.removeAllChildElements(this.layer)},getBestFitSize:function(){var B=0;var C=0;var A=this.reportPage?this.reportPage.getBestFitSize():null;if(A){B+=A.width;C+=A.height}return{width:B,height:C}},hasContent:function(){return this.reportPage!=null},hideFrame:function(){if(this.reportPage){this.reportPage.hideFrame()}}};bobj.crv.newButtonList=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),numLines:null,buttonWidth:24,buttonTooltip:L_bobj_crv_TabList,changeCB:null,label:null,tabIndex:0,multiSelect:false,menuWidth:null,menuTooltip:null},A);var B=newButtonWidget(A.id,A.label,bobj.crv.ButtonList._onClick,A.buttonWidth,null,A.buttonTooltip,A.tabIndex,0,_skin+"menus.gif",7,16,0,81,true,0,97);B._menu=newListWidget(A.id+"_menu",MochiKit.Base.bind(bobj.crv.ButtonList._onChange,B),A.multiSelect,A.menuWidth,A.numLines||2,A.menuTooltip,null,null);B._listItems=[];B._blOldInit=B.init;B._blOldGetHTML=B.getHTML;B._menuDiv=null;B._captureClicks=MenuWidget_captureClicks;B._releaseClicks=MenuWidget_releaseClicks;bobj.fillIn(B,A);B.widgetType="ButtonList";MochiKit.Base.update(B,bobj.crv.ButtonList);return B};bobj.crv.ButtonList={getMenu:function(){return this._menu},add:function(B,C,A,D){if(this._menu&&this._menu.layer){this._menu.add(B,C,A,D)}else{this._listItems.push({lbl:B,val:C,sel:A,id:D})}},init:function(){var E=this._menu;this._blOldInit();E.init();this._menuDiv=getLayer(this.id+"_menuDiv");var D=this._listItems;for(var B=0,A=D.length;B<A;++B){var C=D[B];E.add(C.lbl,C.val,C.sel,C.id)}this._listItems=[]},getHTML:function(){var A=bobj.html;var B={id:this.id+"_menuDiv",onmousedown:"event.cancelBubble=true","class":"menuFrame",style:{visibility:"hidden",position:"absolute","z-index":5000}};return this._blOldGetHTML()+A.DIV(B,this._menu.getHTML())},isMenuShowing:function(){return this._menuDiv&&this._menuDiv.style.visibility!="hidden"},hideMenu:function(){if(this._menuDiv){this._menuDiv.style.visibility="hidden"}},showMenu:function(){if(this._menuDiv){this._captureClicks();var H=document.body;if(this._menuDiv.parentNode!==H){H.appendChild(this._menuDiv)}var B=this._menuDiv.style;B.left="-1000px";B.top="-1000px";B.visibility="visible";var C=MochiKit.Style.getViewportDimensions();var L=this._menu.layer.offsetWidth;var G=this._menu.getHeight();if(!this.numLines){G=Math.min(this._menu.layer.scrollHeight+10,C.h-10);this._menu.resize(null,G)}var A=getPosScrolled(this.layer);var K=A.x;var J=A.y+this.getHeight();var E=K+L+4;var I=J+G+4;var F=C.w+H.scrollLeft-Math.max(0,(C.w-H.offsetWidth));if(E>F){K=Math.max(0,K-(E-F))}var D=C.h+H.scrollTop;if(I>D){J=Math.max(0,J-(I-D))}B.left=K+"px";B.top=J+"px"}},_captureClicks:function(){var B=MochiKit.Base.bind;try{this.layer.onmousedown=B(this._onCaptureClick,this,true);this._oldMousedown=document.onmousedown;document.onmousedown=B(this._onCaptureClick,this,false)}catch(A){if(bobj.crv.config.isDebug){throw A}}},_releaseClicks:function(){if(this.layer.onmousedown){this.layer.onmousedown=null;document.onmousedown=this._oldMousedown}},_onClick:function(){if(!this._cancelNextClick){this.showMenu()}this._cancelNextClick=false},_onChange:function(){this._releaseClicks();this.hideMenu();if(this.changeCB){this.changeCB()}},_onCaptureClick:function(A,B){this._cancelNextClick=A;eventCancelBubble(B);this.hideMenu();this._releaseClicks()}};bobj.crv.newReportAlbum=function(D){var G=MochiKit.Base;var F=G.update;var C=G.bind;var A=bobj.crv.ReportAlbum;D=F({id:bobj.uniqueId(),initTabIdx:0,width:800,height:500,displayDrilldownTab:true},D);var B=newNaviBarWidget(bobj.uniqueId(),_HorizTabTopWithClose,null,null,D.width,null,null,null,false,true,false);var E=newTabbedZone(D.id,B,D.width,D.height);B.cb=C(A._onSelectTab,E);B.closeTab=C(A._removeView,E,true);bobj.fillIn(E,D);E.widgetType="ReportAlbum";E._views=[];E._hideFrame=false;E.selectOld=E.select;F(E,A);return E};bobj.crv.ReportAlbum={getTabBarHeight:function(){return this.tabs.getHeight()},init:function(){this.tzOldInit();this.tabs.init();this.showDrilldownTab(this.displayDrilldownTab);var B=this._views;if(B.length>0){for(var C=0,A=B.length;C<A;C++){B[C].init()}if(this.initTabIdx<0||this.initTabIdx>=B.length){this.initTabIdx=0}this.select(this.initTabIdx)}},showDrilldownTab:function(A){this.displayDrilldownTab=A;try{this.tabs.layer.parentNode.parentNode.style.display=A?(_ie?"block":"table-row"):"none"}catch(B){}},isDisplayDrilldownTab:function(){return this.displayDrilldownTab},setHideFrame:function(B){this._hideFrame=B;var A=this.getSelectedView();if(A&&this._hideFrame){A.hideFrame()}},update:function(G){if(!G||G.cons!=="bobj.crv.newReportAlbum"){return }for(var D=0,A=G.children.length;D<A;D++){var F=G.children[D];var B=this._views[D];if(B){B.update(F)}}var E=G.children.length;var C=this._views.length;if(E>C){for(var D=C,A=E;D<A;D++){this.delayedAddChild(bobj.crv.createWidget(G.children[D]))}}else{if(E<C){for(var D=C-1,A=E;D>=A;D--){this._removeView(false,D)}}}this.initTabIdx=G.args.initTabIdx;this.select(this.initTabIdx)},findTabNumber:function(D){var B=this._views;for(var C=0,A=B.length;C<A;C++){if(B[C].viewStateId==D){return C}}return -1},delayedAddChild:function(A){this._views.push(A);var C=this.tabs.add(A.label,A.tooltip);var B=this.getTabHTML(this._views.length-1);append(getLayer(this.id+"_container"),B);A.init()},addChild:function(A){if(A){this._views.push(A);this.add(A.label,A.tooltip)}},getHTML:function(){var D=this.beginHTML();var C=this._views;for(var B=0,A=C.length;B<A;++B){D+=this.getTabHTML(B)}D+=this.endHTML();return D},getTabHTML:function(B){var C=this.tabs.items[B];var A=this._views[B];html="";if(C&&A){html+=this.beginTabHTML(C);html+=A.getHTML();html+=this.endTabHTML()}return html},resizeOuter:function(B,E){var D=33;var A=10;if(bobj.isNumber(E)){if(this.displayDrilldownTab){E-=D}E=Math.max(E,0)}if(bobj.isNumber(B)){if(!this._hideFrame){B-=A}B=Math.max(B,0)}this.resize(B,E);this.tabs.resize(B);var C=this.getSelectedView();if(C){C.resize()}},getBestFitSize:function(){var A=this._hideFrame?0:10;var C=this.displayDrilldownTab?33:0;var B=this.getSelectedView();if(B){var D=B.getBestFitSize();A+=D.width;C+=D.height}return{width:A,height:C}},beginTabHTML:function(A){return bobj.html.openTag("div",{id:A.zoneId,style:{display:"none",width:this.w+"px",height:this.h+"px",position:"relative"}})},getSelectedView:function(){return this._views[this.oldIndex]},select:function(C){var B=MochiKit.Base.partial;if(C>=0&&C<this._views.length&&C!=this.oldIndex){var A=this.getSelectedView();if(A){A.dispose()}var A=this._views[C];this.selectOld(C);MochiKit.Signal.signal(this,"viewChanged")}},_removeView:function(B,C){var A=this._views[C];var D=this.tabs.items[C];B=(D!=null&&D.isSelected&&B);if(A){A.dispose();bobj.deleteWidget(A);MochiKit.Signal.signal(this,"removeView",A)}if(D.isSelected){this.oldIndex=-1}arrayRemove(this,"_views",C);this.tabs.remove(C,B);bobj.deleteWidget(D)},_onSelectTab:function(A){if(A!=this.oldIndex){MochiKit.Signal.signal(this,"selectView",this._views[A])}}};if(typeof (bobj.crv.Separator)=="undefined"){bobj.crv.Separator={}}bobj.crv.newSeparator=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),marginLeft:4,marginRight:4,marginTop:0,marginBottom:2},A);var B=newWidget(A.id);bobj.fillIn(B,A);B.widgetType="Separator";C(B,bobj.crv.Separator);return B};bobj.crv.Separator.getHTML=function(){var B=bobj.html;var A="";if(bobj.isBorderBoxModel()){A=B.IMG({id:this.id,src:bobj.skinUri("sep.gif"),style:{height:2+"px",width:"100%","margin-left":this.marginLeft+"px","margin-right":this.marginRight+"px","margin-top":this.marginTop+"px","margin-bottom":this.marginBottom+"px"}})}else{A=B.DIV({id:this.id,style:{height:2+"px","margin-left":this.marginLeft+"px","margin-right":this.marginRight+"px","margin-top":this.marginTop+"px","margin-bottom":this.marginBottom+"px","background-image":"url("+bobj.skinUri("sep.gif")+")","background-repeat":"repeat-x",overflow:"hidden"}})}return A+bobj.crv.getInitHTML(this.widx)};bobj.crv.Separator.getHeight=function(){return this.layer.offsetHeight+this.marginTop+this.marginBottom};bobj.crv.newViewer=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),isDisplayModalBG:false,isLoadContentOnInit:false,layoutType:bobj.crv.Viewer.LayoutTypes.FIXED,visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:"800px",height:"600px",fontStyle:null,fontSize:null,top:"0px",left:"0px"}},A);var B=newWidget(A.id);bobj.fillIn(B,A);B.widgetType="Viewer";B._topToolbar=null;B._reportAlbum=null;B._leftPanel=null;B._separator=null;B._print=null;B._export=null;B._promptDlg=null;B._reportProcessing=null;B._eventListeners=[];B._statusbar=null;B._leftPanelResizeGrabber=newGrabberWidget(B.id+"_leftPanelResizeGrabber",bobj.bindFunctionToObject(bobj.crv.Viewer.onGrabberMove,B),0,0,4,1,true);B.initOld=B.init;B._boundaryControl=new bobj.crv.BoundaryControl(A.id+"_bc");B._modalBackground=new bobj.crv.ModalBackground(A.id+"_mb",bobj.bindFunctionToObject(bobj.crv.Viewer.keepFocus,B));MochiKit.Base.update(B,bobj.crv.Viewer);window[B.id]=B;return B};bobj.crv.Viewer={LayoutTypes:{FIXED:"fixed",CLIENT:"client",FITREPORT:"fitreport"},PromptingTypes:{HTML:"html",FLEX:"flex"},onGrabberMove:function(A){if(this._leftPanel){this._leftPanel.resize(A,null);this._doLayout()}},keepFocus:function(){var A=bobj.crv.params.FlexParameterBridge.getSWF(this.id);if(A){A.focus()}},addChild:function(A){if(A.widgetType=="ReportAlbum"){this._reportAlbum=A}else{if(A.widgetType=="Toolbar"){this._topToolbar=A;this._separator=bobj.crv.newSeparator()}else{if(A.widgetType=="Statusbar"){this._statusbar=A}else{if(A.widgetType=="PrintUI"){this._print=A}else{if(A.widgetType=="ExportUI"){this._export=A}else{if(A.widgetType=="ReportProcessingUI"){this._reportProcessing=A}else{if(A.widgetType=="LeftPanel"){this._leftPanel=A}}}}}}}},getHTML:function(){var B=bobj.html;var C={overflow:"hidden",position:"relative",left:this.visualStyle.left,top:this.visualStyle.top};var A=B.DIV({dir:"ltr",id:this.id,style:C,"class":"dialogzone"},this._topToolbar?this._topToolbar.getHTML():"",this._separator?this._separator.getHTML():"",this._leftPanel?this._leftPanel.getHTML():"",this._reportAlbum?this._reportAlbum.getHTML():"",this._leftPanelResizeGrabber?this._leftPanelResizeGrabber.getHTML():"",this._statusbar?this._statusbar.getHTML():"");return A},_onWindowResize:function(){if(this._currWinSize.w!=winWidth()||this._currWinSize.h!=winHeight()){this._doLayout();this._currWinSize.w=winWidth();this._currWinSize.h=winHeight()}},init:function(){this.initOld();this._initSignals();if(this._reportAlbum){this._reportAlbum.init()}if(this._topToolbar){this._topToolbar.init()}if(this._leftPanel){this._leftPanel.init()}if(this._statusbar){this._statusbar.init()}if(this._leftPanelResizeGrabber){this._leftPanelResizeGrabber.init();if(!this._leftPanel||!this._leftPanel.isToolPanelDisplayed()){this._leftPanelResizeGrabber.setDisplay(false)}}this.setDisplayModalBackground(this.isDisplayModalBG);bobj.setVisualStyle(this.layer,this.visualStyle);this._currWinSize={w:winWidth(),h:winHeight()};var A=MochiKit.Signal.connect;var B=MochiKit.Signal.signal;if(this.layoutType.toLowerCase()==bobj.crv.Viewer.LayoutTypes.CLIENT){A(window,"onresize",this,"_onWindowResize")}if(!this._topToolbar&&!this._statusbar&&this._reportAlbum&&!this._reportAlbum.isDisplayDrilldownTab()){this.layer.className+=" hideFrame";this._reportAlbum.setHideFrame(true)}if(this.layer&&_ie&&bobj.checkParent(this.layer,"TABLE")){A(window,"onload",this,"_doLayoutOnLoad");this._oldCssVisibility=this.css.visibility;this.css.visibility="hidden"}else{this._doLayout()}this.scrollToHighlighted();B(this,"initialized",this.isLoadContentOnInit)},_initSignals:function(){var B=MochiKit.Base.partial;var D=MochiKit.Signal.signal;var A=MochiKit.Signal.connect;var C=MochiKit.Iter.forEach;if(this._topToolbar){C(["zoom","drillUp","firstPage","prevPage","nextPage","lastPage","selectPage","refresh","search","export","print"],function(E){A(this._topToolbar,E,B(D,this,E))},this)}this._initLeftPanelSignals();if(this._reportAlbum){C(["selectView","removeView","viewChanged"],function(E){A(this._reportAlbum,E,B(D,this,E))},this)}if(this._print){A(this._print,"printSubmitted",B(D,this,"printSubmitted"))}if(this._export){A(this._export,"exportSubmitted",B(D,this,"exportSubmitted"))}},getLeftPanel:function(){return this._leftPanel},_initLeftPanelSignals:function(){var B=MochiKit.Base.partial;var D=MochiKit.Signal.signal;var A=MochiKit.Signal.connect;var C=MochiKit.Iter.forEach;if(this._leftPanel){C(["grpDrilldown","grpNodeRetrieveChildren","grpNodeCollapse","grpNodeExpand","resetParamPanel","resizeToolPanel"],function(E){A(this._leftPanel,E,B(D,this,E))},this);A(this._leftPanel,"switchPanel",this,"_onSwitchPanel")}},_isMainReportViewSelected:function(){var A=this._reportAlbum.getSelectedView();return A&&A.isMainReport()},_doLayoutOnLoad:function(){this.css.visibility=this._oldCssVisibility;this._doLayout()},_doLayout:function(){var H=this._topToolbar?this._topToolbar.getHeight():0;var D=this._topToolbar?this._topToolbar.getWidth():0;var K=this._separator?this._separator.getHeight():0;var M=this._statusbar?this._statusbar.getHeight():0;var R=this._leftPanel?this._leftPanel.getBestFitWidth():0;var E=this._leftPanelResizeGrabber&&this._leftPanelResizeGrabber.isDisplayed()?this._leftPanelResizeGrabber.getWidth():0;var Q=this.layoutType.toLowerCase();var J=this._leftPanel?this._leftPanel.getToolPanel():null;var O=(J&&J.isDisplayed()&&J.hasPercentWidth());if(bobj.crv.Viewer.LayoutTypes.CLIENT==Q){this.css.width="100%";this.css.height="100%";if(O){R=Math.max(R,(this.getWidth()*J.getPercentWidth())-E)}}else{if(bobj.crv.Viewer.LayoutTypes.FITREPORT==Q){var G=0;var L=0;if(O){R+=200}if(this._reportAlbum){var N=this._reportAlbum.getBestFitSize();G=(N.width+R+E<D)?D:N.width+R+E;L=(N.height+H+K+M)}else{if(this._leftPanel){G=R;L=(this._leftPanel.getBestFitHeight()+H+K+M)}}this.css.height=L+"px";this.css.width=G+"px"}else{this.css.width=this.visualStyle.width;this.css.height=this.visualStyle.height;if(O){R=Math.max(R,(this.getWidth()*J.getPercentWidth())-E)}}}var A=this.getWidth()-R-E;var F=Math.max(0,this.getHeight()-H-K-M);if(this._reportAlbum){this._reportAlbum.resizeOuter(A,F);this._reportAlbum.move(R+E,H+K)}if(this._leftPanel){this._leftPanel.resize(R,F);this._leftPanel.move(0,H+K)}if(this._leftPanelResizeGrabber&&this._leftPanelResizeGrabber.isDisplayed()){this._leftPanelResizeGrabber.resize(null,F);this._leftPanelResizeGrabber.move(R,H+K)}if(this._statusbar){this._statusbar.doLayout();this._statusbar.move(0,H+K+F)}if(this._print&&this._print.layer){this._print.center()}if(this._export&&this._export.layer){this._export.center()}if(this._reportProcessing&&this._reportProcessing.layer){this._reportProcessing.center()}var P=MochiKit.Style.getElementPosition(this.layer);var T=MochiKit.Style.getElementDimensions(this.layer);if(this._modalBackground){this._modalBackground.updateBoundary(T.w,T.h,P.x,P.y)}var B=bobj.getBodyScrollDimension();var I=((P.x+T.w)>=B.w)||((P.y+T.h)>=B.h);if(I&&(Q!=bobj.crv.Viewer.LayoutTypes.CLIENT)){this._boundaryControl.updateBoundary(T.w,T.h,P.x,P.y)}else{this._boundaryControl.updateBoundary(0,0,0,0)}var C=bobj.crv.params.FlexParameterBridge;var S=C.getSWF(this.id);if(S){if(this._promptDlg&&this._promptDlg.style.visibility!="hidden"){if(S._isMaximized){C.fitScreen(this.id)}else{C.resize(this.id,S.offsetHeight,S.offsetWidth,true)}}}this._adjustWindowScrollBars()},_onSwitchPanel:function(A){var B=bobj.crv.ToolPanelType;if(B.GroupTree==A){MochiKit.Signal.signal(this,"showGroupTree")}else{if(B.ParameterPanel==A){MochiKit.Signal.signal(this,"showParamPanel")}else{if(B.None==A){MochiKit.Signal.signal(this,"hideToolPanel")}}}this._leftPanelResizeGrabber.setDisplay(!(B.None==A));this._doLayout()},resize:function(A,B){if(bobj.isNumber(A)){A=A+"px"}if(bobj.isNumber(B)){B=B+"px"}this.visualStyle.width=A;this.visualStyle.height=B;this._doLayout()},setPageNumber:function(B,A){if(this._topToolbar){this._topToolbar.setPageNumber(B,A)}},showPromptDialog:function(B,A){if(!this._promptDlg){var C=MochiKit.Base.bind(this._onShowPromptDialog,this);var D=MochiKit.Base.bind(this._onHidePromptDialog,this);this._promptDlg=bobj.crv.params.newParameterDialog({id:this.id+"_promptDlg",showCB:C,hideCB:D})}this._promptDlg.setCloseCB(A);this._promptDlg.setNoCloseButton(!A);this._originalDocumentOnKeyPress=document.onkeypress;this.updatePromptDialog(B)},updatePromptDialog:function(A){A=A||"";var B=function(C,D){return function(){C.updateHtmlAndDisplay(D)}};bobj.loadJSResourceAndExecCallBack(bobj.crv.config.resources.HTMLPromptingSDK,B(this._promptDlg,A));if(bobj.isParentWindowTestRunner()){setTimeout(MochiKit.Base.partial(MochiKit.Signal.signal,this,"promptDialogIsVisible"),5)}},showFlexPromptDialog:function(G,M){var B=bobj.crv.params.FlexParameterBridge;var C=bobj.crv.params.ViewerFlexParameterAdapter;if(!B.checkFlashPlayer()){var E=L_bobj_crv_FlashRequired;this.showError(E.substr(0,E.indexOf("{0}")),B.getInstallHTML());return }C.setViewerLayoutType(this.id,this.layoutType);if(!this._promptDlg){this._promptDlg=document.createElement("div");this._promptDlg.id=this.id+"_promptDlg";this._promptDlg.closeCB=M;var H=this._promptDlg.style;H.border="1px";H.borderStyle="solid";H.borderColor="#000000";H.position="absolute";H.zIndex=bobj.constants.modalLayerIndex;var F=bobj.uniqueId();this._promptDlg.innerHTML='<div id="'+F+'" name="'+F+'"></div>';var I=bobj.bindFunctionToObject(bobj.crv.Viewer.keepFocus,this);var J=MochiKit.DOM.createDOM("BUTTON",{id:this._promptDlg.id+"_firstLink",onfocus:I,style:{width:"0px",height:"0px",position:"absolute",left:"-30px",top:"-30px"}});var K=MochiKit.DOM.createDOM("BUTTON",{id:this._promptDlg.id+"_lastLink",onfocus:I,style:{width:"0px",height:"0px",position:"absolute",left:"-30px",top:"-30px"}});document.body.appendChild(J);document.body.appendChild(this._promptDlg);document.body.appendChild(K);var A=bobj.crv.stateManager.getComponentState(this.id);var L=A.common.reportSourceSessionID;var D=bobj.crv.getLangCode();B.setMasterCallBack(this.id,C);B.createSWF(this.id,F,G,true,D,L)}else{this._promptDlg.closeCB=M;this._promptDlg.style.display="";B.init(this.id)}this.setDisplayModalBackground(true)},sendPromptingAsyncRequest:function(A){MochiKit.Signal.signal(this,"crprompt_asyncrequest",A)},setDisplayModalBackground:function(A){A=this.isDisplayModalBG||A;if(this._modalBackground){this._modalBackground.show(A)}},_onShowPromptDialog:function(){this._adjustWindowScrollBars();this.setDisplayModalBackground(true)},_onHidePromptDialog:function(){this._adjustWindowScrollBars();document.onkeypress=this._originalDocumentOnKeyPress;this.setDisplayModalBackground(false)},isPromptDialogVisible:function(){return this._promptDlg&&this._promptDlg.isVisible&&this._promptDlg.isVisible()},hidePromptDialog:function(){if(this.isPromptDialogVisible()){this._promptDlg.show(false)}},hideFlexPromptDialog:function(){if(this._promptDlg){if(_ie){this._promptDlg.focus()}this._promptDlg.style.visibility="hidden";this._promptDlg.style.display="none";this.setDisplayModalBackground(false);if(this._promptDlg.closeCB){this._promptDlg.closeCB()}}},_adjustWindowScrollBars:function(){if(_ie&&this.layoutType==bobj.crv.Viewer.LayoutTypes.CLIENT&&this._promptDlg&&this._promptDlg.layer&&MochiKit.DOM.currentDocument().body){var E,B;var A=MochiKit.DOM.currentDocument().body;var D=this._promptDlg.layer;if(this.getReportPage()&&this.getReportPage().layer){var C=this.getReportPage().layer}if(!window.bodyOverFlow){window.bodyOverFlow=MochiKit.DOM.getStyle(A,"overflow")}if(A.offsetHeight<(D.offsetTop+D.offsetHeight)){if(window.bodyOverFlow=="hidden"){E="scroll"}B="hidden"}else{E=window.bodyOverFlow;B="auto"}A.style.overflow=E;if(C){C.style.overflow=B}}},showError:function(C,A){var B=bobj.crv.ErrorDialog.getInstance();B.setText(C,A);B.setTitle(L_bobj_crv_Error);B.show(true)},update:function(C){if(!C||C.cons!="bobj.crv.newViewer"){return }if(C.args){this.isDisplayModalBG=C.args.isDisplayModalBG}this.hidePromptDialog();for(var A in C.children){var B=C.children[A];if(B){switch(B.cons){case"bobj.crv.newReportAlbum":if(this._reportAlbum){this._reportAlbum.update(B)}break;case"bobj.crv.newToolbar":if(this._topToolbar){this._topToolbar.update(B)}break;case"bobj.crv.newStatusbar":if(this._statusbar){this._statusbar.update(B)}break;case"bobj.crv.newLeftPanel":if(this._leftPanel){this._leftPanel.update(B)}else{this._leftPanel=bobj.crv.createWidget(B);if(this.layer){append(this.layer,this._leftPanel.getHTML());this._initLeftPanelSignals();this._leftPanel.init()}if(this._leftPanel&&this._leftPanel.isToolPanelDisplayed()){this._leftPanelResizeGrabber.setDisplay(true)}}break;case"bobj.crv.newExportUI":if(this._export){this._export.update(B)}break}}}this._doLayout();this.scrollToHighlighted();this.setDisplayModalBackground(this.isDisplayModalBG)},getToolPanel:function(){if(this._leftPanel){return this._leftPanel.getToolPanel()}return null},getParameterPanel:function(){var A=this.getToolPanel();if(A){return A.getParameterPanel()}return null},getReportPage:function(){if(this._reportAlbum){var A=this._reportAlbum.getSelectedView();if(A){return A.reportPage}}return null},scrollToHighlighted:function(){if(!this._reportAlbum){return }var A=this._reportAlbum.getSelectedView();if(A){A.scrollToHighlighted(this.layoutType.toLowerCase()==bobj.crv.Viewer.LayoutTypes.FITREPORT)}},addViewerEventListener:function(C,B){var A=this._eventListeners[C];if(!A){this._eventListeners[C]=[B];return }A[A.length]=B},removeViewerEventListener:function(E,B){var A=this._eventListeners[E];if(A){for(var D=0,C=A.length;D<C;D++){if(A[D]==B){A.splice(D,1);return }}}},getEventListeners:function(A){return this._eventListeners[A]}};bobj.crv.BoundaryControl=function(A){this.id=A};bobj.crv.BoundaryControl.prototype={updateBoundary:function(B,A,D,C){if(!this.layer){this._init()}if(this.layer){this.layer.style.width=B+"px";this.layer.style.height=A+"px";this.layer.style.left=D+"px";this.layer.style.top=C+"px"}},_getStyle:function(){return{display:"block",visibility:"hidden",position:"absolute"}},_getHTML:function(){return bobj.html.DIV({id:this.id,style:this._getStyle()})},_init:function(){if(!this.layer){append2(_curDoc.body,this._getHTML());this.layer=getLayer(this.id);this.layer.onselectstart=function(){return false};this.layer.onmousedown=eventCancelBubble;if(this.mouseupCB){this.layer.onmouseup=this.mouseupCB}}}};bobj.crv.ModalBackground=function(B,A){this.id=B;this.mouseupCB=A};bobj.crv.ModalBackground.prototype=new bobj.crv.BoundaryControl();MochiKit.Base.update(bobj.crv.ModalBackground.prototype,{_getStyle:function(){return{"background-color":"#888888",position:"absolute",opacity:0.3,display:"block",filter:"alpha(opacity=30);","z-index":bobj.constants.modalLayerIndex-2,visibility:"hidden"}},show:function(A){if(!this.layer){this._init()}this.layer.style.visibility=A?"visible":"hidden"}});if(typeof (bobj.crv.Async)=="undefined"){bobj.crv.Async={}}bobj.crv.ViewerListener=function(C,E){this._name=C;this._viewer=null;this._promptPage=null;this._paramCtrl=null;this._ioHandler=E;this._reportProcessing=null;var B=MochiKit.Signal.connect;var A=bobj.event.subscribe;var F=MochiKit.Base.bind;var D=window[C];if(D){if(D.widgetType=="Viewer"){this._viewer=D;this._reportProcessing=this._viewer._reportProcessing}else{if(D.widgetType=="PromptPage"){this._promptPage=D;this._reportProcessing=this._promptPage._reportProcessing}}}if(this._viewer){B(this._viewer,"selectView",this,"_onSelectView");B(this._viewer,"removeView",this,"_onRemoveView");B(this._viewer,"firstPage",this,"_onFirstPage");B(this._viewer,"prevPage",this,"_onPrevPage");B(this._viewer,"nextPage",this,"_onNextPage");B(this._viewer,"lastPage",this,"_onLastPage");B(this._viewer,"selectPage",this,"_onSelectPage");B(this._viewer,"zoom",this,"_onZoom");B(this._viewer,"drillUp",this,"_onDrillUp");B(this._viewer,"refresh",this,"_onRefresh");B(this._viewer,"search",this,"_onSearch");B(this._viewer,"export",this,"_onExport");B(this._viewer,"print",this,"_onPrint");B(this._viewer,"resizeToolPanel",this,"_onResizeToolPanel");B(this._viewer,"hideToolPanel",this,"_onHideToolPanel");B(this._viewer,"grpDrilldown",this,"_onDrilldownGroupTree");B(this._viewer,"grpNodeRetrieveChildren",this,"_onRetrieveGroupTreeNodeChildren");B(this._viewer,"grpNodeCollapse",this,"_onCollapseGroupTreeNode");B(this._viewer,"grpNodeExpand",this,"_onExpandGroupTreeNode");B(this._viewer,"showParamPanel",this,"_onShowParamPanel");B(this._viewer,"showGroupTree",this,"_onShowGroupTree");B(this._viewer,"viewChanged",this,"_onChangeView");B(this._viewer,"resetParamPanel",this,"_onResetParamPanel");B(this._viewer,"printSubmitted",this,"_onSubmitPrintPdf");B(this._viewer,"exportSubmitted",this,"_onSubmitExport");B(this._viewer,"initialized",this,"_onViewerInitialization")}A("drilldown",this._forwardTo("_onDrilldown"));A("drilldownGraph",this._forwardTo("_onDrilldownGraph"));A("drilldownSubreport",this._forwardTo("_onDrilldownSubreport"));A("sort",this._forwardTo("_onSort"));A("hyperlinkClicked",this._forwardTo("_onHyperlinkClicked"));A("displayError",this._forwardTo("_displayError"));A("crprompt_param",this._forwardTo("_onSubmitStaticPrompts"));A("crprompt_pmtEngine",this._forwardTo("_onSubmitPromptEnginePrompts"));A("crprompt_logon",this._forwardTo("_onSubmitDBLogon"));A("crprompt_cancel",this._forwardTo("_onCancelParamDlg"));A("crprompt_flexparam",this._forwardTo("_onFlexParam"));A("crprompt_flexlogon",this._forwardTo("_onFlexLogon"));A("crprompt_asyncrequest",this._forwardTo("_onPromptingAsyncRequest"));A("pnav",this._forwardTo("_onNavigateReportPart"));A("navbookmark",this._forwardTo("_onNavigateBookmark"));A("updatePromptDlg",this._forwardTo("_onPromptDialogUpdate"));A("saveViewState",F(this._onSaveViewState,this));if(D){D.init()}if(bobj.isObject(window.jsUnit)&&!window.jsUnit.testSuite){window.jsUnit.testSuite=new jsUnit.crViewerTestSuite(this)}};bobj.crv.ViewerListener.prototype={getCurrentView:function(){if(this._viewer&&this._viewer._reportAlbum){return this._viewer._reportAlbum.getSelectedView()}return null},getPromptingType:function(){return this._getCommonProperty("promptingType")},_displayError:function(C){C=MochiKit.Base.parseQueryString(C);if(C&&this._viewer){var B=C.errorMessage||L_bobj_crv_RequestError;var A=C.debug||"";this.showError(B,A)}},_forwardTo:function(A){return MochiKit.Base.bind(function(C){if(C==this._name){var B=bobj.slice(arguments,1);this[A].apply(this,B)}},this)},_onViewerInitialization:function(A){if(A){this._initialLoadViewerContent()}},_onSaveViewState:function(){this._saveViewState()},_onSelectView:function(A){if(A){bobj.crv.logger.info("UIAction View.Select");var B=bobj.crv.stateManager.getComponentState(this._name);if(B){B.curViewId=A.viewStateId;this._request({selectView:A.viewStateId},bobj.crv.config.useAsync,true)}}},_onRemoveView:function(C){if(C){bobj.crv.logger.info("UIAction View.Remove");var B=bobj.crv.stateManager.getComponentState(this._name);if(B){delete B[C.viewStateId]}var D=this._getCommonState();if(D){var A=MochiKit.Base.findValue(D.rptAlbumOrder,C.viewStateId);if(A!=-1){arrayRemove(D,"rptAlbumOrder",A)}}}},_initialLoadViewerContent:function(){bobj.crv.logger.info("UIAction InitLoad");this._request({ajaxInitLoad:true},bobj.crv.config.useAsync,true)},_onFirstPage:function(){bobj.crv.logger.info("UIAction Toolbar.FirstPage");this._request({tb:"first"},bobj.crv.config.useAsync,true)},_onPrevPage:function(){bobj.crv.logger.info("UIAction Toolbar.PrevPage");this._request({tb:"prev"},bobj.crv.config.useAsync,true)},_onNextPage:function(){bobj.crv.logger.info("UIAction Toolbar.NextPage");this._request({tb:"next"},bobj.crv.config.useAsync,true)},_onLastPage:function(){bobj.crv.logger.info("UIAction Toolbar.LastPage");this._request({tb:"last"},bobj.crv.config.useAsync,true)},_onDrillUp:function(){bobj.crv.logger.info("UIAction Toolbar.DrillUp");this._request({tb:"drillUp"},bobj.crv.config.useAsync,true)},_onChangeView:function(){if(this._paramCtrl){this._paramCtrl.onChangeView()}},_onResetParamPanel:function(){if(this._isResettingParamPanel){return }this._isResettingParamPanel=true;if(this._paramCtrl){this._paramCtrl.setParameters([]);delete this._paramCtrl}this.clearAdvancedPromptData();var A=bobj.bindFunctionToObject(function(){this._isResettingParamPanel=false},this);this._setInteractiveParams(null,A)},_onSelectPage:function(A){bobj.crv.logger.info("UIAction Toolbar.SelectPage "+A);this._request({tb:"gototext",text:A},bobj.crv.config.useAsync,true)},_onZoom:function(A){bobj.crv.logger.info("UIAction Toolbar.Zoom "+A);this._request({tb:"zoom",value:A},bobj.crv.config.useAsync,true)},_onExport:function(B){var A=this._viewer._export;if(A){if(B){A.setCloseCB(B)}bobj.crv.logger.info("UIAction Toolbar.Export");A.show(true)}},_onPrint:function(E){var B=this._viewer._print;if(B){if(E){B.setCloseCB(E)}if(B.isActxPrinting){bobj.crv.logger.info("UIAction Toolbar.Print ActiveX");var D=bobj.crv.stateManager.getCompositeState();var C=this._ioHandler.getPostDataForPrinting(D,this._name);this._viewer._print.show(true,C)}else{var A=this._getCommonProperty("pdfOCP")&&bobj.hasPDFReaderWithJSFunctionality();if(A){this._onSubmitPrintPdf(0,0,A)}else{bobj.crv.logger.info("UIAction Toolbar.Print PDF");this._viewer._print.show(true)}}}},_onResizeToolPanel:function(A){this._setCommonProperty("toolPanelWidth",A);this._setCommonProperty("toolPanelWidthUnit","px")},_onHideToolPanel:function(){bobj.crv.logger.info("UIAction Toolbar.HideToolPanel");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.None)},_onShowParamPanel:function(){bobj.crv.logger.info("UIAction Toolbar.ShowParamPanel");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.ParameterPanel)},_onShowGroupTree:function(){bobj.crv.logger.info("UIAction Toolbar.ShowGroupTree");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.GroupTree)},_onDrilldown:function(A){bobj.crv.logger.info("UIAction Report.Drilldown");this._request(A,bobj.crv.config.useAsync,true)},_onDrilldownSubreport:function(A){bobj.crv.logger.info("UIAction Report.DrilldownSubreport");this._request(A,bobj.crv.config.useAsync,true)},_onDrilldownGraph:function(A,G,J,H,F,I,K,D){if(A){bobj.crv.logger.info("UIAction Report.DrilldownGraph");var E,C;if(_ie||_saf){E=A.offsetX;C=A.offsetY}else{E=A.layerX;C=A.layerY}var B=parseInt(this._getCommonProperty("zoom"),10);B=(isNaN(B)?1:B/100);this._request({name:encodeURIComponent(G),brch:J,coord:(E*D/B+parseInt(H,10))+"-"+(C*D/B+parseInt(F,10)),pagenumber:I,nextpart:encodeURIComponent(K)},bobj.crv.config.useAsync,true)}},_onDrilldownGroupTree:function(F,C,B,A){bobj.crv.logger.info("UIAction GroupTree.Drilldown");var D=encodeURIComponent(F);var E={drillname:D,gnpath:A};if(B){E.grp=C}else{E.brch=C}this._request(E,bobj.crv.config.useAsync,true)},_onRetrieveGroupTreeNodeChildren:function(A){this._request({grow:A},bobj.crv.config.useAsync,true)},_onCollapseGroupTreeNode:function(E){bobj.crv.logger.info("UIAction GroupTree.CollapseNode");var D=this.getCurrentExpandedPaths();var B=E.split("-");for(var C=0,A=B.length-1;C<=A;C++){var F=B[C];if(D[F]){if(C==A){delete D[F];return }D=D[F]}else{return }}},showError:function(B,A){if(this._viewer){this._viewer.showError(B,A)}},_onExpandGroupTreeNode:function(E){bobj.crv.logger.info("UIAction GroupTree.ExpandNode");var D=this.getCurrentExpandedPaths();var B=E.split("-");for(var C=0,A=B.length;C<A;C++){var F=B[C];if(!D[F]){D[F]={}}D=D[F]}},_onRefresh:function(){bobj.crv.logger.info("UIAction Toolbar.Refresh");var B=this._getCommonState();var A=true;if(B&&B.useAsyncForRefresh!==undefined){A=B.useAsyncForRefresh}this._request({tb:"refresh"},bobj.crv.config.useAsync&&A,true)},_onSearch:function(A){bobj.crv.logger.info("UIAction Toolbar.Search");this._request({tb:"search",text:encodeURIComponent(A)},bobj.crv.config.useAsync,true)},_canUseAsync:function(){return this._viewer!=null&&bobj.crv.config.useAsync},_onFlexParam:function(A){this._request({crprompt:"flexPromptingSetValues",paramList:A,isFullPrompt:true},this._canUseAsync())},_onFlexLogon:function(C){for(var B=0,A=C.length;B<A;B++){this._addRequestField(C[B].field,C[B].value)}this._request({crprompt:"logon"},this._canUseAsync())},_onSubmitPromptEnginePrompts:function(isFullPrompt){isFullPrompt=eval(isFullPrompt);var useAjax=this._viewer&&this._viewer.isPromptDialogVisible();var valueIDKey="ValueID"+this._name;var contextIDKey="ContextID"+this._name;var contextHandleIDKey="ContextHandleID"+this._name;var valueID=document.getElementById(valueIDKey);if(valueID){this._addRequestField(valueIDKey,valueID.value)}var contextID=document.getElementById(contextIDKey);if(contextID){this._addRequestField(contextIDKey,contextID.value)}var contextHandleID=document.getElementById(contextHandleIDKey);if(contextHandleID){this._addRequestField(contextHandleIDKey,contextHandleID.value)}this._request({crprompt:"pmtEngine",isFullPrompt:isFullPrompt},useAjax);this._removeRequestField(valueIDKey);this._removeRequestField(contextIDKey);this._removeRequestField(contextHandleIDKey)},_onSubmitStaticPrompts:function(A){this._addRequestFields(A);this._request({crprompt:"param"},false)},_onSubmitDBLogon:function(B){var A=this._viewer&&this._viewer.isPromptDialogVisible();if(this._viewer){this._viewer.hidePromptDialog()}this._addRequestFieldsFromContent(B);this._request({crprompt:"logon"},A)},_onSubmitPrintPdf:function(C,B,A){this._handlePrintOrExport(C,B,"PDF",A)},_onSubmitExport:function(C,A,B){this._handlePrintOrExport(C,A,B)},_handlePrintOrExport:function(H,C,F,B){var D=true;var A=false;if(!H&&!C){D=false}if(!F){F="PDF"}var G=(F=="PDF"&&B);var E={text:F,range:D+""};E.tb=G?"crpdfprint":"crexport";if(D){E.from=H+"";E.to=C+""}bobj.crv.logger.info("UIAction Export.Submit "+F);if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){A=true;this._ioHandler.redirectToServlet();this._ioHandler.addRequestField("ServletTask","Export");this._ioHandler.addRequestField("LoadInIFrame",A)}else{A=G}this._request(E,false,false,A)},_onCancelParamDlg:function(){bobj.crv.logger.info("UIAction PromptDialog.Cancel");this._viewer.hidePromptDialog()},_onReceiveParamDlg:function(A){this._viewer.showPromptDialog(A)},_onSort:function(A){bobj.crv.logger.info("UIAction Report.Sort");this._request(A,bobj.crv.config.useAsync,true)},_onNavigateReportPart:function(A){bobj.crv.logger.info("UIAction ReportPart.Navigate");this._request(A,false)},_onNavigateBookmark:function(A){bobj.crv.logger.info("UIAction Report.Navigate");this._request(A,bobj.crv.config.useAsync,true)},getCurrentExpandedPaths:function(){var A=this._getViewState();if(A){return A.gpTreeCurrentExpandedPaths}return{}},applyParams:function(F){if(F){bobj.crv.logger.info("UIAction ParameterPanel.Apply");var B=[];var C=MochiKit.Base.clone;for(var D=0,A=F.length;D<A;D++){var E=C(F[D]);E.modifiedValue=null;E.value=C(F[D].value);if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){this._encodeParameter(E)}B.push(E)}this._request({crprompt:"paramPanel",paramList:B},bobj.crv.config.useAsync,true)}},getServletURI:function(){var A="";if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){A=this._ioHandler._servletUrl}return A},showAdvancedParamDialog:function(D){var A=this._getCommonProperty("paramOpts");if(!A.canOpenAdvancedDialog){this.showError(L_bobj_crv_AdvancedDialog_NoAjax,L_bobj_crv_EnableAjax)}else{this._focusedParamName=D.paramName;if(this._isPromptingTypeFlex()){var C=bobj.crv.params.ViewerFlexParameterAdapter;C.setCurrentIParamInfo(this._name,this._paramCtrl,D);if(!C.hasIParamPromptUnitData(this._name)){this._request({promptDlg:this._cloneParameter(D)},true)}else{if(D.allowMultiValue&&D.allowRangeValue&&D.modifiedValue.length>5){if(this._reportProcessing){this._reportProcessing.Show()}}var B=this._getPromptDialogCloseCB();this._viewer.showFlexPromptDialog(this.getServletURI(),B)}}else{this._request({promptDlg:this._cloneParameter(D)},true)}}},_cloneParameter:function(B){var A=MochiKit.Base.clone(B);A.defaultValues=null;A.modifiedValue=null;if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){A.value=MochiKit.Base.clone(B.value);A=this._encodeParameter(A)}return A},_encodeParameter:function(C){if(C){if(C.value&&C.valueDataType==bobj.crv.params.DataTypes.STRING){for(var B=0,A=C.value.length;B<A;B++){if(bobj.isString(C.value[B])){C.value[B]=encodeURIComponent(C.value[B])}else{if(bobj.isObject(C.value[B])){var D=null;if(C.value[B].beginValue){D=bobj.crv.params.getValue(C.value[B].beginValue);C.value[B].beginValue=encodeURIComponent(D)}if(C.value[B].endValue){D=bobj.crv.params.getValue(C.value[B].endValue);C.value[B].endValue=encodeURIComponent(D)}}}}}if(C.paramName){C.paramName=encodeURIComponent(C.paramName)}if(C.reportName){C.reportName=encodeURIComponent(C.reportName)}}return C},_setViewProperty:function(B,C){var A=this._getViewState();if(A){A[B]=C}},_getViewProperty:function(B){var A=this._getViewState();if(A){return A[B]}return null},_setCommonProperty:function(B,C){var A=this._getCommonState();if(A){A[B]=C}},_getCommonProperty:function(B){var A=this._getCommonState();if(A){return A[B]}return null},_updateUIState:function(A){},_getViewState:function(){var A=bobj.crv.stateManager.getComponentState(this._name);if(A&&A.curViewId!==undefined){return A[A.curViewId]}return null},_getCommonState:function(){var A=bobj.crv.stateManager.getComponentState(this._name);if(A){return A.common}return null},_setInteractiveParams:function(B,D){if(!this._ioHandler.canUseAjax()){var C=this._viewer.getParameterPanel();if(C){C.showError(L_bobj_crv_InteractiveParam_NoAjax)}D();return }if(!B){var A=this._getCommonProperty("iactParams");var F=[];if(A){var H=bobj.crv.params.Parameter;var B=[];for(var E=0;E<A.length;++E){if(A[E].isInUse!=null&&!A[E].isInUse){F.push(new H(A[E]))}else{B.push(new H(A[E]))}}}}if(B&&B.length){var G=function(J,I){return function(){var L=J._viewer.getParameterPanel();if(L){var K=J._getCommonProperty("paramOpts");J._paramCtrl=new bobj.crv.params.ParameterController(L,J,K);J._paramCtrl.setParameters(I,D);J._paramCtrl.setUnusedParameters(F)}}};bobj.loadJSResourceAndExecCallBack(bobj.crv.config.resources.ParameterControllerAndDeps,G(this,B))}else{D()}},_isPromptingTypeFlex:function(){var A=this.getPromptingType();return(A&&A.toLowerCase()==bobj.crv.Viewer.PromptingTypes.FLEX)},clearAdvancedPromptData:function(){if(this._isPromptingTypeFlex()){bobj.crv.params.ViewerFlexParameterAdapter.clearIParamPromptUnitData(this._name)}},_onPromptDialogUpdate:function(D){if(D.resolvedFields){this._viewer.hidePromptDialog();if(this._paramCtrl){for(var B=0;B<D.resolvedFields.length;B++){var C=new bobj.crv.params.Parameter(D.resolvedFields[B]);this._paramCtrl.updateParameter(C.paramName,C.getValue())}this._paramCtrl._updateToolbar()}}else{if(this._isPromptingTypeFlex()){if(D.script){bobj.evalInWindow(D.script);var A=this._getPromptDialogCloseCB();this._viewer.showFlexPromptDialog(this.getServletURI(),A)}}else{if(D.html){if(this._viewer.isPromptDialogVisible()){this._viewer.updatePromptDialog(D.html)}else{var A=this._getPromptDialogCloseCB();this._viewer.showPromptDialog(D.html,A)}}}}},_getPromptDialogCloseCB:function(){var A=null;if(this._paramCtrl&&this._focusedParamName){A=this._paramCtrl.getFocusAdvButtonCB(this._focusedParamName);this._focusedParamName=null}return A},_onPromptingAsyncRequest:function(A){this._request(A,true,false,false)},_request:function(F,E,H,B,I){var G=bobj.crv.stateManager.getCompositeState();var D=MochiKit.Base.bind;var A=I?I:D(this._onResponse,this,F);var C=D(this._onIOError,this);if(!bobj.isBoolean(H)){H=true}if(this._reportProcessing&&H){this._reportProcessing.delayedShow()}var J=this._ioHandler.request(G,this._name,F,E,B,A,C);if(J){if(this._reportProcessing&&H){this._reportProcessing.setDeferred(J)}J.addCallback(A);J.addErrback(C)}},_onResponse:function(E,A){var D=null;if(bobj.isString(A)){D=MochiKit.Base.evalJSON(A)}else{D=MochiKit.Async.evalJSONRequest(A)}if(D){if(D.needsReload){this._request(E,false,true);return }if(D.redirect){window.location=D.redirect;return }if(D.status&&this._viewer&&(D.status.errorMessage||D.status.debug)){var B=D.status.errorMessage||L_bobj_crv_RequestError;this.showError(B,D.status.debug)}if(D.state){var C=D.state;if(bobj.isString(C)){C=MochiKit.Base.evalJSON(C)}bobj.crv.stateManager.setComponentState(this._name,C)}if(D.update){if(D.update.promptDlg){this._onPromptDialogUpdate(D.update.promptDlg);bobj.crv.logger.info("Update InteractiveParams")}else{if(this._viewer){this._viewer.update(D.update);bobj.crv.logger.info("Update Viewer")}}}if(D.script&&D.script.length>0){bobj.evalInWindow(D.script);bobj.crv.logger.info("Execute Script")}}if(this._reportProcessing){this._reportProcessing.cancelShow()}if(bobj.isParentWindowTestRunner()){MochiKit.Signal.signal(this._viewer,"updated")}},_onIOError:function(B){if(this._reportProcessing.wasCancelled()==true){return }if(this._viewer){var C=this._ioHandler.processError(B);var A="";if(bobj.isString(C)){A=C}else{for(var D in C){if(bobj.isString(C[D])||bobj.isNumber(C[D])){A+=D+": "+C[D]+"\n"}}}this.showError(L_bobj_crv_RequestError,A)}if(this._reportProcessing){this._reportProcessing.cancelShow()}},_saveViewState:function(){var A=bobj.crv.stateManager.getCompositeState();this._ioHandler.saveViewState(A,this._name)},_addRequestFields:function(B){var C=document.getElementById(B);if(C){for(var A in C){var D=C[A];if(D&&D.name&&D.value){this._addRequestField(D.name,D.value)}}}},_addRequestFieldsFromContent:function(E){var B=document.getElementById(E);if(!B){return }var C=MochiKit.DOM.getElementsByTagAndClassName("input",null,B);for(var A in C){var D=C[A];if(D.type&&D.type.toLowerCase()=="checkbox"&&D.name){if(D.checked){this._addRequestField(D.name,D.value)}}else{if(D&&D.name&&D.value){this._addRequestField(D.name,D.value)}}}},_addRequestField:function(A,B){this._ioHandler.addRequestField(A,B)},_removeRequestField:function(A){this._ioHandler.removeRequestField(A)},_onHyperlinkClicked:function(D){D=MochiKit.Base.parseQueryString(D);var B=this._viewer.getEventListeners("hyperlinkClicked");var F=false;if(B){for(var E=0,C=B.length;E<C;E++){if(B[E](D)==true){F=true}}}if(F){return }var A=window;if(D.target&&D.target!="_self"){A.open(D.url,D.target)}else{A.location=D.url}}};bobj.crv.StateManager=function(){this._state={}};bobj.crv.StateManager.prototype={setViewState:function(A,D,C){var B=this._state;if(!B[A]){B[A]={}}B[A][D]=C},getViewState:function(A,C){var B=this._state;if(!B[A]){return null}return B[A][C]},setComponentState:function(A,B){this._state[A]=B},getComponentState:function(A){return this._state[A]},getCompositeState:function(){return this._state}};if(typeof bobj.crv.viewerState=="undefined"){bobj.crv.stateManager=new bobj.crv.StateManager()}bobj.crv.IOAdapterBase={request:function(){},addRequestField:function(A,B){},removeRequestField:function(A){},saveViewState:function(A,B){},getPostDataForPrinting:function(A,B){},processError:function(A){return A},canUseAjax:function(){try{return(MochiKit.Async.getXMLHttpRequest()!==null)}catch(A){return false}},_getPostbackIframe:function(){if(!this._iframe){ifrm=document.createElement("IFRAME");ifrm.id=bobj.uniqueId();ifrm.name=ifrm.id;ifrm.style.width="0px";ifrm.style.height="0px";ifrm.style.position="absolute";ifrm.style.top="0px";ifrm.style.left="0px";ifrm.style.visibility="hidden";document.body.appendChild(ifrm);if(!ifrm.contentWindow.name){ifrm.contentWindow.name=ifrm.id}this._iframe=ifrm}return this._iframe}};bobj.crv.ServletAdapter=function(B,A){this._pageUrl=B;this._servletUrl=A;this._form=null};bobj.crv.ServletAdapter._requestParams={STATE:"CRVCompositeViewState",TARGET:"CRVEventTarget",ARGUMENT:"CRVEventArgument"};bobj.crv.ServletAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(F,H,B,A,C){if(!this._form){this._createForm()}var D=bobj.crv.ServletAdapter._requestParams;var G=MochiKit.Base.serializeJSON;this._form[D.STATE].value=encodeURIComponent(G(F));this._form[D.TARGET].value=encodeURIComponent(H);this._form[D.ARGUMENT].value=encodeURIComponent(G(B));var I=null;if(A&&this._servletUrl){var E=MochiKit.Async.getXMLHttpRequest();E.open("POST",this._servletUrl,true);E.setRequestHeader("Content-Type","application/x-www-form-urlencoded");E.setRequestHeader("Accept","application/json");I=MochiKit.Async.sendXMLHttpRequest(E,MochiKit.Base.queryString(this._form))}else{if(C){this._form.target=this._getPostbackIframe().id}this._form.submit()}MochiKit.DOM.removeElement(this._form);this._form=null;return I},redirectToServlet:function(){if(!this._form){this._createForm()}this._form.action=this._servletUrl},_createForm:function(){var B=MochiKit.DOM;var A=bobj.crv.ServletAdapter._requestParams;this._form=B.FORM({name:bobj.uniqueId(),style:"display:none",method:"POST",enctype:"application/x-www-form-urlencoded;charset=utf-8",action:this._pageUrl},B.INPUT({type:"hidden",name:A.STATE}),B.INPUT({type:"hidden",name:A.TARGET}),B.INPUT({type:"hidden",name:A.ARGUMENT}));document.body.appendChild(this._form)},addRequestField:function(A,C){if(A&&C){if(!this._form){this._createForm()}var B=this._form[A];if(B){B.value=C}else{this._form.appendChild(MochiKit.DOM.INPUT({type:"hidden",name:A,value:C}))}}},removeRequestField:function(A){if(A){var C=this._form;if(C){var B=C[A];if(B){MochiKit.DOM.removeElement(B);if(C[A]){C[A]=null}}B=null}}},getPostDataForPrinting:function(C,E){var A=MochiKit.Base.serializeJSON;var D=bobj.crv.ServletAdapter._requestParams;var F=A(C);var B={};B[D.STATE]=encodeURIComponent(F);B[D.TARGET]=encodeURIComponent(E);B[D.ARGUMENT]=encodeURIComponent('"axprint="');if(document.getElementById("com.sun.faces.VIEW")){B["com.sun.faces.VIEW"]=encodeURIComponent(document.getElementById("com.sun.faces.VIEW").value)}return MochiKit.Base.queryString(B)},processError:function(A){if(!(typeof (A.number)=="undefined")&&A.number==404){return L_bobj_crv_ServletMissing}return A}});bobj.crv.AspDotNetAdapter=function(D,A,E,C,F){this._postbackEventReference=D;this._replacementParameter=A;this._stateID=E;this._aspnetVersion=F;this._form=null;this._callbackEventReference=C;this._additionalReqFlds=null;var B=bobj.getElementByIdOrName(this._stateID);if(B){this._form=B.form}if(this._isAspNetVersionPriorToVersion4()){WebForm_CallbackComplete=this.WebForm_CallbackComplete}};bobj.crv.AspDotNetAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(pageState,viewerName,eventArgs,allowAsync,useIframe,callbackHandler,errbackHandler){var toJSON=MochiKit.Base.serializeJSON;if(eventArgs&&this._additionalReqFlds){eventArgs=MochiKit.Base.update(eventArgs,this._additionalReqFlds)}this._additionalReqFlds=null;var jsonEventArgs=toJSON(eventArgs);this.saveViewState(pageState,viewerName);if(allowAsync){if(typeof WebForm_InitCallback=="function"){__theFormPostData="";__theFormPostCollection=[];WebForm_InitCallback()}var callback=this._callbackEventReference.replace("'arg'","jsonEventArgs");callback=callback.replace("'cb'","callbackHandler");callback=callback.replace("'errcb'","errbackHandler");callback=callback.replace("'frmID'","this._form.id");return eval(callback)}else{if(useIframe){this._form.target=this._getPostbackIframe().id}var postbackCall;if(this._postbackEventReference.indexOf("'"+this._replacementParameter+"'")>=0){postbackCall=this._postbackEventReference.replace("'"+this._replacementParameter+"'","jsonEventArgs")}else{postbackCall=this._postbackEventReference.replace('"'+this._replacementParameter+'"',"jsonEventArgs")}eval(postbackCall);this._clearEventFields()}},_isAspNetVersionPriorToVersion4:function(){if(this._aspnetVersion!=null){var sep=this._aspnetVersion.split(".");if(eval(sep[0])<4){return true}}return false},saveViewState:function(B,C){var A=MochiKit.Base.serializeJSON;var E=B[C];var D=bobj.getElementByIdOrName(this._stateID);if(D){D.value=A(E)}},getPostDataForPrinting:function(C,D){this.saveViewState(C,D);var B=MochiKit.DOM.formContents(this.form);var E=B[0];var A=B[1];E.push("crprint");A.push(D);var F=MochiKit.Base.queryString(E,A);return F},addRequestField:function(A,B){if(!this._additionalReqFlds){this._additionalReqFlds={}}this._additionalReqFlds[A]=B},_clearRequestField:function(A){if(A){if(this._form){var B=this._form[A];if(B){B.value=""}}}},_clearEventFields:function(){this._clearRequestField("__EVENTTARGET");this._clearRequestField("__EVENTARGUMENT")},WebForm_CallbackComplete:function(){for(var B=0;B<__pendingCallbacks.length;B++){callbackObject=__pendingCallbacks[B];if(callbackObject&&callbackObject.xmlRequest&&(callbackObject.xmlRequest.readyState==4)){if(!__pendingCallbacks[B].async){__synchronousCallBackIndex=-1}__pendingCallbacks[B]=null;var A="__CALLBACKFRAME"+B;var C=document.getElementById(A);if(C){C.parentNode.removeChild(C)}WebForm_ExecuteCallback(callbackObject)}}}});bobj.crv.FacesAdapter=function(A,B){this._formName=A;this._servletUrl=B;this._useServlet=false;if(!bobj.crv.FacesAdapter._hasInterceptedSubmit){this._interceptSubmit();bobj.crv.FacesAdapter._hasInterceptedSubmit=true}};bobj.crv.FacesAdapter._requestParams={STATE:"CRVCompositeViewState",TARGET:"CRVEventTarget",ARGUMENT:"CRVEventArgument"};bobj.crv.FacesAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(J,L,B,A,D){var F=bobj.crv.FacesAdapter._requestParams;var K=MochiKit.Base.serializeJSON;var G=MochiKit.DOM.INPUT;var M=null;var C=this._getForm();if(!C){return }if(!C[F.TARGET]){C.appendChild(G({type:"hidden",name:F.TARGET}))}C[F.TARGET].value=encodeURIComponent(L);if(!C[F.ARGUMENT]){C.appendChild(G({type:"hidden",name:F.ARGUMENT}))}C[F.ARGUMENT].value=encodeURIComponent(K(B));if(!C[F.STATE]){C.appendChild(G({type:"hidden",name:F.STATE}))}C[F.STATE].value=encodeURIComponent(K(J));if(A&&this._servletUrl){var I=MochiKit.Async.getXMLHttpRequest();I.open("POST",this._servletUrl,true);I.setRequestHeader("Content-Type","application/x-www-form-urlencoded");I.setRequestHeader("Accept","application/json");M=MochiKit.Async.sendXMLHttpRequest(I,MochiKit.Base.queryString(C))}else{var E=C.action;if(this._useServlet===true){C.action=this._servletUrl}var H=C.target;if(D){C.target=this._getPostbackIframe().id}C.submit();C.action=E;C.target=H;this._useServlet=false}C[F.TARGET].value="";C[F.ARGUMENT].value="";C[F.STATE].value="";this.removeRequestField("ServletTask");return M},redirectToServlet:function(){this._useServlet=true},addRequestField:function(A,C){if(A&&C){var D=this._getForm();if(D){var B=D[A];if(B){B.value=C}else{D.appendChild(MochiKit.DOM.INPUT({type:"hidden",name:A,value:C}))}}}},removeRequestField:function(A){if(A){var C=this._getForm();if(C){var B=C[A];if(B){MochiKit.DOM.removeElement(B);if(C[A]){C[A]=null}}B=null}}},saveViewState:function(C,F){if(!bobj.crv.FacesAdapter._isStateSaved){var E=this._getForm();if(E){var D=bobj.crv.FacesAdapter._requestParams;var A=MochiKit.Base.serializeJSON;var B=MochiKit.DOM.INPUT;if(!E[D.STATE]){E.appendChild(B({type:"hidden",name:D.STATE}))}E[D.STATE].value=encodeURIComponent(A(C))}bobj.crv.FacesAdapter._isStateSaved=true}},_getForm:function(){return document.forms[this._formName]},_interceptSubmit:function(){var B=this._getForm();if(B){var A=B.submit;B.submit=function(){bobj.event.publish("saveViewState");B.submit=A;B.submit()}}},getPostDataForPrinting:function(C,E){var A=MochiKit.Base.serializeJSON;var D=bobj.crv.ServletAdapter._requestParams;var F=A(C);var B={};B[D.STATE]=encodeURIComponent(F);B[D.TARGET]=encodeURIComponent(E);B[D.ARGUMENT]=encodeURIComponent('"axprint="');if(document.getElementById("com.sun.faces.VIEW")){B["com.sun.faces.VIEW"]=encodeURIComponent(document.getElementById("com.sun.faces.VIEW").value)}return MochiKit.Base.queryString(B)},processError:function(A){if(!(typeof (A.number)=="undefined")&&A.number==404){return L_bobj_crv_ServletMissing}return A}});if(typeof bobj=="undefined"){bobj={}}bobj.ArgumentNormalizer=function(){this._rules=[]};bobj.ArgumentNormalizer.prototype={addRule:function(){this._rules.push(arguments)},normalize:function(){for(var B=0,E=this._rules.length;B<E;++B){var K=this._rules[B];if(K.length==arguments.length){var D={};for(var I=0,G=K.length;I<G;++I){var C=arguments[I];var F=K[I];if(bobj.isString(F)){var J=null;var A=F;var H=null}else{if(bobj.isArray(F)){var J=F[0];var A=F[1];var H=F[2]}else{var J=F.test;var A=F.name;var H=F.xform}}if(!J||J(C)){D[A]=H?H(C):C;if(I+1==G){return D}}else{break}}}}return null},normalizeArray:function(A){return this.normalize.apply(this,A)}};if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.event=="undefined"){bobj.event={};bobj.event._topicSubscriptions={};bobj.event._globalSubscriptions=[]}bobj.event.publish=function(C){var B=bobj.slice(arguments,1);var E=bobj.event._topicSubscriptions[C];if(E){for(var D=0;D<E.length;++D){E[D]._notify.apply(null,B)}}var F=bobj.event._globalSubscriptions;for(var A=0;A<F.length;++A){F[A]._notify.apply(null,B)}};bobj.event.subscribe=function(){var A=bobj.event.subscribe._normalizer;if(!A){A=bobj.event.subscribe._normalizer=new bobj.ArgumentNormalizer();A.addRule("topic","target","methName");A.addRule([bobj.isString,"topic"],"callback");A.addRule("target","methName");A.addRule("callback")}return bobj.event.kwSubscribe(A.normalizeArray(arguments))};bobj.event.kwSubscribe=function(B){var D=MochiKit.Base.bind;var C={};if(B.callback){C._notify=B.callback}else{C._notify=D(B.target[B.methName],B.target)}if(B.topic){C.topic=B.topic;var A=bobj.event._topicSubscriptions;if(!A[B.topic]){A[B.topic]=[]}A[B.topic].push(C)}else{bobj.event._globalSubscriptions.push(C)}return C};bobj.event.unsubscribe=function(C){var B=bobj.event._globalSubscriptions;if(C.topic){B=bobj.event._topicSubscriptions[C.topic]}if(B){var A=MochiKit.Base.findIdentical(B,C);if(A!=-1){B.splice(A,1);delete C._notify}}};bobj.crv.newPromptPage=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),layoutType:"fixed",content:null,width:800,height:600,padding:5,top:0,left:0},A);var B=newWidget(A.id);B.widgetType="PromptPage";B._reportProcessing=null;bobj.fillIn(B,A);B.initOld=B.init;MochiKit.Base.update(B,bobj.crv.PromptPage);window[B.id]=B;return B};bobj.crv.PromptPage={setHTML:function(E){var J=this._pageNode;if(bobj.isString(E)){var B=bobj.html.extractHtml(E);J.innerHTML=B.html;var I=B.links;for(var H=0,F=I.length;H<F;++H){bobj.includeLink(I[H])}var C=B.scripts;for(var A=0,D=C.length;A<D;++A){var G=C[A];if(!G){continue}if(G.text){bobj.evalInWindow(G.text)}}}else{if(bobj.isObject(E)){J.innerHTML="";J.appendChild(E);var K=E.style;K.display="block";K.visibility="visible"}}},getHTML:function(){var G=bobj.html;var B=bobj.isBorderBoxModel();var D=this.height+this.topMargin+this.bottomMargin;var E=this.width+this.leftMargin+this.rightMargin;var I=B?D:this.height;var A=B?E:this.width;var C={position:"relative",width:A+"px",height:I+"px",top:this.top+"px",left:this.left+"px",border:"none","z-index":1,"background-color":this.bgColor};if(this.layoutType=="fixed"){C.overflow="auto"}var H={padding:this.padding+"px"};var F=G.DIV({id:this.id,style:C},G.DIV({id:this.id+"_page",style:H}));return F},init:function(){this._pageNode=document.getElementById(this.id+"_page");this.initOld();if(this.contentId){var B=document.getElementById(this.contentId);if(B){this.setHTML(B)}}else{if(this.content){this.setHTML(this.content);delete this.content}}var A=MochiKit.Signal.connect;if(this.layoutType.toLowerCase()=="client"){A(window,"onresize",this,"_doLayout")}this._doLayout()},_doLayout:function(){var B=this.layoutType.toLowerCase();if("client"==B){this.css.width="100%";this.css.height="100%"}else{if("fitreport"==B){this.css.width="100%";this.css.height="100%"}else{if(this.width!=null&&this.width.length>0){if(this.width.indexOf("px")>0||this.width.indexOf("%")>0){this.css.width=this.width}else{this.css.width=this.width+"px"}}if(this.height!=null&&this.height.length>0){if(this.height.indexOf("px")>0||this.height.indexOf("%")>0){this.css.height=this.height}else{this.css.height=this.height+"px"}}}}var A=this._reportProcessing;if(A&&A.layer){A.center()}},addChild:function(A){if(A.widgetType=="ReportProcessingUI"){this._reportProcessing=A}}};bobj.crv.newFlexPromptPage=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),layoutType:"fixed",width:800,height:600,padding:5,top:0,left:0},A);var B=newWidget(A.id);B.widgetType="FlexPromptPage";B._reportProcessing=null;bobj.fillIn(B,A);B.initOld=B.init;MochiKit.Base.update(B,bobj.crv.FlexPromptPage);window[B.id]=B;return B};bobj.crv.FlexPromptPage={setHTML:MochiKit.Base.noop,getHTML:function(){var B=bobj.isBorderBoxModel();var E=this.height+this.topMargin+this.bottomMargin;var F=this.width+this.leftMargin+this.rightMargin;var I=B?E:this.height;var A=B?F:this.width;var D=this.layoutType.toLowerCase()==bobj.crv.Viewer.LayoutTypes.FIXED;var C={position:"relative",width:D?A+"px":"100%",height:D?I+"px":"100%",top:this.top+"px",left:this.left+"px",border:"none","z-index":1,"background-color":this.bgColor};var H={padding:this.padding+"px",position:"absolute"};bobj.crv.params.ViewerFlexParameterAdapter.setViewerLayoutType(this.id,this.layoutType);var G=bobj.html;return G.DIV({id:this.id,style:C},G.DIV({id:this.id+"_page",style:H},G.DIV({id:this.contentId})))},init:function(){var A=MochiKit.Signal.connect;if(this.layoutType.toLowerCase()=="client"){A(window,"onresize",this,"_doLayout")}this._doLayout()},_doLayout:function(){var A=this._reportProcessing;if(A&&A.layer){A.center()}},addChild:function(A){if(A.widgetType=="ReportProcessingUI"){this._reportProcessing=A}}};if(typeof bobj.crv.PrintUI=="undefined"){bobj.crv.PrintUI={}}if(typeof bobj.crv.ExportUI=="undefined"){bobj.crv.ExportUI={}}if(typeof bobj.crv.ErrorDialog=="undefined"){bobj.crv.ErrorDialog={}}if(typeof bobj.crv.ReportProcessingUI=="undefined"){bobj.crv.ReportProcessingUI={}}bobj.crv.newPrintUI=function(C){if(!C.id){C=MochiKit.Base.update({id:bobj.uniqueId()},C)}var D=C.submitBtnLabel;if(!D){D=L_bobj_crv_submitBtnLbl}var B=C.infoTitle;if(!B){B=L_bobj_crv_PrintInfoTitle}var A=C.dialogTitle;if(!A){if(C.isActxPrinting){A=L_bobj_crv_ActiveXPrintDialogTitle}else{A=L_bobj_crv_PDFPrintDialogTitle}}var F=C.infoMsg;if(!F){F=L_bobj_crv_PrintInfo1;F+="\n";F+=L_bobj_crv_PrintInfo2}var E=newDialogBoxWidget(C.id+"_dialog",A,300,100,null,bobj.crv.PrintUI._cancel,false);E.infoMsg=F;E.infoTitle=B;E.actxId=E.id+"_actx";E.actxContainerId=E.id+"_actxdiv";E._processingPrinting=false;E._initOld=E.init;E._showOld=E.show;if(!C.isActxPrinting){E._fromBox=newIntFieldWidget(E.id+"_fromBox",null,null,null,null,true,"",50);E._fromBox.setDisabled=bobj.crv.PrintUI.disabledTextFieldWidget;E._toBox=newIntFieldWidget(E.id+"_toBox",null,null,null,null,true,"",50);E._toBox.setDisabled=bobj.crv.PrintUI.disabledTextFieldWidget;E._submitBtn=newButtonWidget(E.id+"_submitBtn",D,MochiKit.Base.bind(bobj.crv.PrintUI._submitBtnCB,E));E._submitBtn.setDelayCallback(false);E._allRadio=newRadioWidget(E.id+"_allRadio",E.id+"_grp",L_bobj_crv_PrintAllLbl,MochiKit.Base.bind(bobj.crv.PrintUI.disabledPageRange,E,true));E._allRadio.layerClass="dlgContent";E._rangeRadio=newRadioWidget(E.id+"_rangeRadio",E.id+"_grp",L_bobj_crv_PrintPagesLbl,MochiKit.Base.bind(bobj.crv.PrintUI.disabledPageRange,E,false));E._rangeRadio.layerClass="dlgContent"}E.widgetType="PrintUI";bobj.fillIn(E,C);MochiKit.Base.update(E,bobj.crv.PrintUI);return E};bobj.crv.PrintUI.disabledTextFieldWidget=function(A){TextFieldWidget_setDisabled.call(this,A);if(A){MochiKit.DOM.addElementClass(this.layer,"textDisabled")}else{MochiKit.DOM.removeElementClass(this.layer,"textDisabled")}};bobj.crv.PrintUI.disabledPageRange=function(A){if(this._fromBox&&this._toBox){this._fromBox.setDisabled(A);this._toBox.setDisabled(A)}};bobj.crv.PrintUI._submitBtnCB=function(){var B=null;var A=null;if(this._rangeRadio.isChecked()){B=parseInt(this._fromBox.getValue(),10);A=parseInt(this._toBox.getValue(),10);if(!B||!A||(B<0)||(B>A)){alert(L_bobj_crv_PrintPageRangeError);return }}if(this.widgetType=="PrintUI"){MochiKit.Signal.signal(this,"printSubmitted",B,A)}else{MochiKit.Signal.signal(this,"exportSubmitted",B,A,this._comboBox.getSelection().value)}this.show(false)};bobj.crv.PrintUI._getRPSafeURL=function(C){if(!C){return }if(C.indexOf("/")===0){return C}var B=window.location.href;var D=B.lastIndexOf("?");if(D>0){B=B.substring(0,D)}var A=B.lastIndexOf("/");if(A<0){return C}B=B.substring(0,A);return B+"/"+C};bobj.crv.PrintUI._getObjectTag=function(B){var C=[];C.push('<OBJECT width="0" height="0" ID="');C.push(this.actxId);C.push('" CLASSID="CLSID:');C.push(bobj.crv.ActxPrintControl_CLSID);C.push('" CODEBASE="');C.push(this._getRPSafeURL(this.codeBase));C.push("#Version=");C.push(bobj.crv.ActxPrintControl_Version);C.push('" VIEWASTEXT>');C.push('<PARAM NAME="PostBackData" VALUE="');C.push(B);C.push('">');C.push('<PARAM NAME="ServerResourceVersion" VALUE="');C.push(bobj.crv.ActxPrintControl_Version);C.push('">');if(this.lcid){C.push('<PARAM NAME="LocaleID" VALUE="');C.push(this.lcid);C.push('">')}if(this.url){C.push('<PARAM NAME="URL" VALUE="');C.push(this._getRPSafeURL(this.url));C.push('">')}if(this.title){C.push('<PARAM NAME="Title" VALUE="');C.push(this.title);C.push('">')}if(this.maxPage){C.push('<PARAM NAME="MaxPageNumber" VALUE="');C.push(this.maxPage);C.push('">')}if(this.paperOrientation){C.push('<PARAM NAME="PageOrientation" VALUE="');C.push(this.paperOrientation);C.push('">')}if(this.paperSize){C.push('<PARAM NAME="PaperSize" VALUE="');C.push(this.paperSize);C.push('">')}if(this.paperWidth){C.push('<PARAM NAME="PaperWidth" VALUE="');C.push(this.paperWidth);C.push('">')}if(this.paperLength){C.push('<PARAM NAME="PaperLength" VALUE="');C.push(this.paperLength);C.push('">')}if(this.driverName){C.push('<PARAM NAME="PrinterDriverName" VALUE="');C.push(this.driverName);C.push('">')}if(this.useDefPrinter){C.push('<PARAM NAME="UseDefaultPrinter" VALUE="');C.push(this.useDefPrinter);C.push('">')}if(this.useDefPrinterSettings){C.push('<PARAM NAME="UseDefaultPrinterSettings" VALUE="');C.push(this.useDefPrinterSettings);C.push('">')}if(this.sendPostDataOnce){C.push('<PARAM NAME="SendPostDataOnce" VALUE="');C.push(this.sendPostDataOnce);C.push('">')}C.push("</OBJECT>");C.push('<table id="');C.push(this.actxId);C.push('_wait" border="0" cellspacing="0" cellpadding="0" width="100%" ><tbody>');C.push('<tr><td align="center" valign="top">');var E=this;var D=E.getContainerWidth()-10;var A=E.getContainerHeight()-(2*E.pad+21+10);C.push('<table style="');C.push(sty("width",D));C.push(sty("height",A));C.push('" id="frame_table_');C.push(E.id);C.push('" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td valign="top" class="dlgFrame" style="padding:5px" id="frame_cont_');C.push(E.id);C.push('">');C.push('<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody>');C.push('<tr><td align="center" style="padding-top:5px;">');C.push(img(_skin+"wait01.gif",200,40));C.push("</td></tr>");C.push('<tr><td align="left" style="padding-left:2px;padding-right:2px;padding-top:5px;">');C.push('<div class="icontext" style="wordWrap:break_word;">');C.push(convStr(L_bobj_crv_PrintControlProcessingMessage,false,true));C.push("</div></td></tr></tbody></table>");C.push("</td></tr></tbody></table>");C.push("</td></tr></tbody></table>");return C.join("")};bobj.crv.PrintUI._cancel=function(){if(this.isActxPrinting){document.getElementById(this.actxContainerId).innerHTML="";this._processingPrinting=false}};bobj.crv.PrintUI._processPrinting=function(){if(!this._processingPrinting){var B=document.getElementById(this.actxId);var A=document.getElementById(this.actxId+"_wait");if(B&&A){B.width="100%";B.height="100%";A.style.display="none"}this._processingPrinting=true}};bobj.crv.PrintUI.show=function(B,A){this._processingPrinting=false;if(B){if(!this.layer){targetApp(this.getHTML());this.init()}if(this.isActxPrinting){document.getElementById(this.actxContainerId).innerHTML=this._getObjectTag(A)}this._showOld(true)}else{if(this.layer){this._showOld(false)}}};bobj.crv.PrintUI.init=function(){this._initOld();if(!this.isActxPrinting){this._fromBox.init();this._toBox.init();this._submitBtn.init();this._allRadio.init();this._rangeRadio.init();this._allRadio.check(true);this._toBox.setDisabled(true);this._fromBox.setDisabled(true);if(this.widgetType=="ExportUI"){this._updateExportList()}}};bobj.crv.PrintUI.getHTML=function(){var B=bobj.html;var C=this;var A=C.beginHTML();if(!this.isActxPrinting){A+="<table cellspacing=0 cellpadding=0 border=0><tr><td><div class='dlgFrame'><table cellspacing=0 cellpadding=0 border=0 style='height:"+(this.height*0.9)+"px;width:"+this.width+"px;'><tr><td valign='top' class='naviBarFrame naviFrame'>"+(this.isExporting?this._getExportList():"")+"<fieldset style='border:0px;padding:0px'><legend style='position:relative;"+(_ie?"margin:0px -7px":"")+"'><table datatable='0' style='width:100%;line-height:10px;'><tr>"+(_ie?"<td class='dialogTitleLevel2'><label>":"<td class='dialogTitleLevel2'><label>")+L_bobj_crv_PrintRangeLbl+"</label></td><td class='dialogTitleLevel2Underline' style='width:100%'>&nbsp;</td></tr></table></legend><div style='margin:10px 25px;'>"+C._allRadio.getHTML()+C._rangeRadio.getHTML()+"<div style='padding-left:25px'><table class=dlgContent datatable='0'><tr><td align=right><label for='"+C._fromBox.id+"'> "+L_bobj_crv_PrintFromLbl+"</label></td><td align=left> "+C._fromBox.getHTML()+"</td></tr><tr><td align=right><label for='"+C._toBox.id+"'> "+L_bobj_crv_PrintToLbl+"</label></td><td align=left>"+C._toBox.getHTML()+"</td></tr></table></div></div></fieldset>"+(!this.isExporting?"<table style='width:100%;line-height:10px;'><tr><td class='dialogTitleLevel2' tabIndex=0><label>"+this.infoTitle+"</label></td><td class='dialogTitleLevel2Underline' style='width:100%'>&nbsp;</td></tr></table><div style='margin:10px 0px 10px 25px;' class='dlgHelpText'>"+this.infoMsg+"</div>":"")+"</td></tr></table></div></td></tr><tr><td align='right' valign='top'><table style='margin:6px 9px 0px 0px' cellspacing=0 cellpadding=0 border=0><tbody><tr><td>"+this._submitBtn.getHTML()+"</td></tbody></tr></table></td></tr></table>"}else{A+="<div id='"+this.actxContainerId+"'></div><script for=\""+this.actxId+'" EVENT="Finished(status, statusText)" language="javascript">getWidgetFromID("'+this.id+'").show(false);<\/script><script for="'+this.actxId+'" EVENT="PrintingProgress(pageNumber)" language="javascript">getWidgetFromID("'+this.id+'")._processPrinting();<\/script>'}A+=C.endHTML();A+=bobj.crv.getInitHTML(this.widx);return A};bobj.crv.newExportUI=function(A){A=MochiKit.Base.update({submitBtnLabel:L_bobj_crv_ExportBtnLbl,dialogTitle:L_bobj_crv_ExportDialogTitle,infoTitle:L_bobj_crv_ExportInfoTitle,infoMsg:L_bobj_crv_PrintInfo1,isExporting:true},A);var B=bobj.crv.newPrintUI(A);B._comboBox=newCustomCombo(B.id+"_combo",MochiKit.Base.bind(bobj.crv.ExportUI._onSelectFormat,B),false,270,L_bobj_crv_ExportFormatLbl,_skin+"../transp.gif",0,14);if(B._comboBox){B._comboBox.icon.border=0;B._comboBox.icon.h=14;B._comboBox.arrow.h=12;B._comboBox.arrow.dy+=2;B._comboBox.arrow.disDy+=2}B.widgetType="ExportUI";MochiKit.Base.update(B,bobj.crv.ExportUI);return B};bobj.crv.ExportUI._onSelectFormat=function(){var A=this._comboBox.getSelection().value;if(A=="CrystalReports"||A=="RPTR"||A=="RecordToMSExcel"||A=="RecordToMSExcel2007"||A=="CharacterSeparatedValues"||A=="XML"){this._fromBox.setDisabled(true);this._toBox.setDisabled(true);this._rangeRadio.check(false);this._rangeRadio.setDisabled(true);this._allRadio.check(true)}else{this._rangeRadio.setDisabled(false)}};bobj.crv.ExportUI.update=function(A){if(!A||A.cons!=="bobj.crv.newExportUI"){return }this.availableFormats=A.args.availableFormats;if(this._comboBox.initialized()){this._updateExportList()}};bobj.crv.ExportUI._updateExportList=function(){if(!this._comboBox.initialized()){this._comboBox.init()}this._updateComboItems();var A=this._comboBox.getItemByIndex(0);if(A!=null){this._comboBox.selectItem(A)}this._onSelectFormat()};bobj.crv.ExportUI._updateComboItems=function(){this._comboBox.removeAllMenuItems();var A=(bobj.isArray(this.availableFormats)?this.availableFormats.length:0);for(var B=0;B<A;B++){var C=this.availableFormats[B];this._comboBox.add(C.name,C.value,C.isSelected)}};bobj.crv.ExportUI._getExportList=function(){return"<table datatable='0' style='width:100%;line-height:10px;'><tr>"+(_ie?"<td class='dialogTitleLevel2'><label>":"<td class='dialogTitleLevel2'><label>")+L_bobj_crv_ExportFormatLbl+"</label></td><td class='dialogTitleLevel2Underline' style='width:100%'>&nbsp;</td></tr></table><div style='margin:10px 25px;'>"+this._comboBox.getHTML()+"</div>"};bobj.crv.ErrorDialog.getInstance=function(){if(!bobj.crv.ErrorDialog.__instance){bobj.crv.ErrorDialog.__instance=bobj.crv.newErrorDialog()}return bobj.crv.ErrorDialog.__instance};bobj.crv.newErrorDialog=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),title:L_bobj_crv_Error,text:null,detailText:null,okLabel:L_bobj_crv_OK,promptType:_promptDlgCritical},A);var B=newPromptDialog(A.id,A.title,A.text,A.okLabel,null,A.promptType,null,null,true,true);B.widgetType="ErrorDialog";bobj.fillIn(B,A);B._promptDlgInit=B.init;B._promptDialogSetText=B.setText;B._promptDialogShow=B.show;B._promptDialogSetTitle=B.setTitle;B._promptDialogSetPromptType=B.setPromptType;MochiKit.Base.update(B,bobj.crv.ErrorDialog);B.noCB=MochiKit.Base.bind(B._onClose,B);B.yesCB=B.noCB;B._detailBtn=newIconWidget(B.id+"_detailBtn",bobj.skinUri("../help.gif"),MochiKit.Base.bind(bobj.crv.ErrorDialog._onDetailBtnClick,B),L_bobj_crv_showDetails,L_bobj_crv_showDetails,16,16,0,0,22,0,true);return B};bobj.crv.ErrorDialog.init=function(){this._promptDlgInit();this._detailBtn.init();this._detailRow=document.getElementById(this.id+"_detRow");this._detailArea=document.getElementById(this.id+"_detArea");if(!this.detailText){this._detailBtn.show(false)}};bobj.crv.ErrorDialog.getHTML=function(){var I=bobj.html.TABLE;var B=bobj.html.TBODY;var E=bobj.html.TR;var K=bobj.html.TD;var L=bobj.html.PRE;var H=bobj.html.DIV;var J=PromptDialog_getimgPath(this.promptType);var F=PromptDialog_getimgAlt(this.promptType);var A="320";var D="300px";var G="100px";var C=I({"class":"dlgBody",width:A,cellpadding:"0",cellspacing:"5",border:"0"},B(null,E(null,K(null,I({"class":"dlgBody",cellpadding:"5",cellspacing:"0",border:"0"},B(null,E(null,K({align:"right",width:"32"},img(J,32,32,null,'id="dlg_img_'+this.id+'"',F)),K(),K({id:"dlg_txt_"+this.id,align:"left"},H({tabindex:"0"},convStr(this.text,false,true)))))))),E({id:this.id+"_detRow",style:{display:"none"}},K(null,H({"class":"infozone",style:{width:D,height:G,overflow:"auto"}},L({id:this.id+"_detArea"},this.detailText)))),E(null,K(null,getSep())),E(null,K(null,I({cellpadding:"5",cellspacing:"0",border:"0",width:"100%"},B(null,E(null,K({align:"left"},this._detailBtn.getHTML()),K({align:"right"},this.yes.getHTML()))))))));return this.beginHTML()+C+this.endHTML()};bobj.crv.ErrorDialog.setText=function(C,A){this.text=C;this.detailText=A;if(this.layer){this._promptDialogSetText(C||"");if(this._detailArea){this._detailArea.innerHTML=A||""}var B=A?true:false;this._detailBtn.show(B);if(!B){this.showDetails(false)}}};bobj.crv.ErrorDialog.setTitle=function(A){this.title=A;if(this.layer){this._promptDialogSetTitle(A||"")}};bobj.crv.ErrorDialog.setPromptType=function(A){this.promptType=A;if(this.layer){this._promptDialogSetPromptType(A)}};bobj.crv.ErrorDialog.show=function(A,B){if(typeof A=="undefined"){A=true}if(A){this._closeCB=B;if(!this.layer){targetApp(this.getHTML());this.init()}this.layer.onkeyup=DialogBoxWidget_keypress;DialogBoxWidget_keypress=MochiKit.Base.noop;this._promptDialogShow(true)}else{if(this.layer){this._closeCB=null;this._promptDialogShow(false)}}};bobj.crv.ErrorDialog.showDetails=function(A){if(typeof A=="undefined"){A=true}if(this._detailRow&&this._detailBtn){if(A){this._detailRow.style.display="";this._detailBtn.changeText(L_bobj_crv_hideDetails)}else{this._detailRow.style.display="none";this._detailBtn.changeText(L_bobj_crv_showDetails)}}};bobj.crv.ErrorDialog._onDetailBtnClick=function(){if(this._detailRow){this.showDetails(this._detailRow.style.display=="none")}};bobj.crv.ErrorDialog._onClose=function(){if(this._closeCB){this._closeCB();this._closeCB=null}DialogBoxWidget_keypress=this.layer.onkeyup;this.layer.onkeyup=null};bobj.crv.newReportProcessingUI=function(B){B=MochiKit.Base.update({id:bobj.uniqueId(),delay:250,message:L_bobj_crv_ReportProcessingMessage},B);var D=document.createElement("div");D.style.visibility="hidden";D.innerHTML=B.message;var A=D.innerHTML;D=null;var C=newWaitDialogBoxWidget(B.id,0,0,"",false,bobj.crv.ReportProcessingUI.cancelCB,true,A,true);C.widgetType="ReportProcessingUI";C.delay=B.delay;MochiKit.Base.update(C,bobj.crv.ReportProcessingUI);return C};bobj.crv.reportProcessingDialog=null;bobj.crv.timerID=null;bobj.crv.ReportProcessingUI.cancelCB=function(){bobj.crv.reportProcessingDialog.cancelled=true;if(bobj.crv.reportProcessingDialog.deferred!==null){bobj.crv.reportProcessingDialog.deferred.cancel()}bobj.crv.reportProcessingDialog.cancelShow()};bobj.crv.ReportProcessingUI.wasCancelled=function(){return bobj.crv.reportProcessingDialog.cancelled};bobj.crv.ReportProcessingUI._prepareToShow=function(){if(bobj.crv.reportProcessingDialog!==null){bobj.crv.reportProcessingDialog.cancelShow()}if(!this.layer){append2(document.body,this.getHTML());this.init()}this.deferred=null;bobj.crv.reportProcessingDialog=this};bobj.crv.ReportProcessingUI.Show=function(){this._prepareToShow();bobj.crv.reportProcessingDialog.show(true)};bobj.crv.ReportProcessingUI.delayedShow=function(){this._prepareToShow();bobj.crv.timerID=setTimeout("bobj.crv._showReportProcessingDialog ()",bobj.crv.reportProcessingDialog.delay)};bobj.crv.ReportProcessingUI.cancelShow=function(){if(bobj.crv.timerID){clearTimeout(bobj.crv.timerID)}if(bobj.crv.reportProcessingDialog){bobj.crv.reportProcessingDialog.show(false)}bobj.crv.reportProcessingDialog=null;bobj.crv.timerID=null};bobj.crv.ReportProcessingUI.setDeferred=function(A){bobj.crv.reportProcessingDialog.deferred=A;if(bobj.crv.reportProcessingDialog.wasCancelled()===true){A.cancel()}};bobj.crv._showReportProcessingDialog=function(){if(bobj.crv.reportProcessingDialog&&bobj.crv.reportProcessingDialog.delay!==0){bobj.crv.logger.info("ShowReportProcessingDialog");bobj.crv.reportProcessingDialog.show(true)}};bobj.crv.newStackedTab=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId(),label:"",width:300,height:null,openAdvCB:null,name:"",isDataFetching:false},A);var B=newWidget(A.id);B.widgetType="StackedTab";bobj.fillIn(B,A);B._content=null;if(B.openAdvCB){B._advanceButton=newIconWidget(B.id+"_advBtn",bobj.crv.allInOne.uri,B.openAdvCB,null,L_bobj_crv_paramsOpenAdvance.replace("%1",B.name),10,10,3,bobj.crv.allInOne.openParameterArrowDy+(_ie?2:3));bobj.crv.setAllClasses(B._advanceButton,"arrow_button");B._advanceButton.margin=0}B._initWidget=B.init;B._resizeWidget=B.resize;C(B,bobj.crv.StackedTab);return B};bobj.crv.StackedTab={setTabDisabled:function(A){if(this._content){this._content.setTabDisabled(A)}if(this._advanceButton&&this._advanceButton.layer){bobj.disableTabbingKey(this._advanceButton.layer,A)}if(this._textCtn){bobj.disableTabbingKey(this._textCtn,A)}if(this._dataFetchLayer){bobj.disableTabbingKey(this._dataFetchLayer,A)}},init:function(){var B=MochiKit.Signal.connect;var D=MochiKit.Signal.signal;var A=MochiKit.Base.partial;this._initWidget();if(this._content){this._content.init()}if(this._advanceButton){this._advanceButton.init();this._onAdvanceButtonClickOld=MochiKit.Base.bind(this._advanceButton.layer.onclick,this._advanceButton.layer);this._advanceButton.layer.onclick=MochiKit.Base.bind(this.advButtonOnClick,this);this._advanceButton.css.width="14px"}this._dataFetchLayer=getLayer(this.id+"_df");this._labelCtn=getLayer(this.id+"_labelCtn");this._textCtn=getLayer(this.id+"_textCtn");this._contentCtn=getLayer(this.id+"_contentCtn");if(this._advanceButton){var C=this._advanceButton.layer;var E=bobj.bindFunctionToObject;B(this.layer,"onclick",E(IconWidget_upCB,C));B(this.layer,"onmouseover",E(IconWidget_realOverCB,C));B(this.layer,"onmouseout",E(IconWidget_realOutCB,C));B(this.layer,"onmousedown",E(IconWidget_downCB,C))}B(this._content,"ParameterUIResized",A(D,this,"StackedTabResized"))},getHTML:function(){var F=bobj.html;var G=F.DIV;var J=F.IMG;var H={"class":"stackedTab",cellpadding:"0",id:this.id,style:{cursor:this._advanceButton?_hand:"default"}};var I={id:this.id+"_labelCtn",cellpadding:"0","class":"crvnoselect stackedTabTitle"};var A=this._content?this._content.getHTML():"";var B=this._advanceButton?F.TD({width:"17px"},this._advanceButton.getHTML()):"";var C="";if(this.isDataFetching){var E="url(%1);";C=F.TD({width:"20px"},J({src:_skin+"../transp.gif",title:L_bobj_crv_ParamsDataTip,tabindex:0,id:this.id+"_df",style:{width:"16px",height:"16px","background-image":E.replace("%1",bobj.crv.allInOne.uri),"background-position":"0px "+(-bobj.crv.allInOne.paramDataFetchingDy)+"px","margin-right":"4px","vertical-align":"middle"}}))}var D=G(H,G(I,F.TABLE({cellpadding:"0",width:"100%",height:"20px",style:{"table-layout":"fixed"}},F.TD({style:{"vertical-align":"top",overflow:"hidden"}},G({"class":"stackedTabText",id:this.id+"_textCtn",title:this.label,tabIndex:0,style:{"font-weight":"bold",color:"#4F5C72"}},convStr(this.label))),C,B)),G({id:this.id+"_contentCtn","class":"stackedTabContentCtn"},A));return D},setDirty:function(B){if(this._textCtn){this._textCtn.style.fontStyle=B?"italic":"";this._textCtn.title=B?this.label+" "+L_bobj_crv_ParamsDirtyTip:this.label}if(this._labelCtn){var A=B?"stackedTabTitleDirty":"stackedTabTitle";this._labelCtn.setAttribute("className",A);this._labelCtn.setAttribute("class",A)}},resize:function(A){A=A-4;if(this._labelCtn){var B=!_saf;bobj.setOuterSize(this._labelCtn,A,null,B)}if(this._content){this._content.resize(A-2)}bobj.setOuterSize(this.layer,A)},setContent:function(A){this._content=A},getContent:function(){return this._content},focusAdvButton:function(){if(this._advanceButton&&this._advanceButton.focus){this._advanceButton.focus()}},advButtonOnClick:function(A){if(this._onAdvanceButtonClickOld){this._onAdvanceButtonClickOld(A);eventCancelBubble(A)}}};if(typeof (bobj.crv.StackedPanel)=="undefined"){bobj.crv.StackedPanel={}}bobj.crv.newStackedPanel=function(B){var E=MochiKit.Base;var D=E.update;var A=E.bind;B=D({id:bobj.uniqueId(),width:null,height:null},B);var C=newWidget(B.id);C.widgetType="StackedPanel";bobj.fillIn(C,B);C._tabs=[];C._initWidget=C.init;C._resizeWidget=C.resize;D(C,bobj.crv.StackedPanel);return C};bobj.crv.StackedPanel={init:function(){this._initWidget();var D=this._tabs;var B=this._numTabsWritten;while(B<D.length){append(this.layer,D[B].getHTML(),document);B++}for(var C=0,A=D.length;C<A;++C){D[C].init()}},setTabDisabled:function(B){for(var C=0,A=this._tabs.length;C<A;C++){this._tabs[C].setTabDisabled(B)}},getHTML:function(){var B=bobj.html.DIV;var A={};if(this.height){A.height=bobj.unitValue(this.height)}if(this.width){A.width=bobj.unitValue(this.width)}return B({id:this.id,style:A,"class":"stackedPanel",tabIndex:"-1"},this._getTabsHTML())},_getTabsHTML:function(){var C="";var B=this._tabs;var D=B.length;for(var A=0;A<D;++A){C+=B[A].getHTML()}this._numTabsWritten=D;return C},addTab:function(A){if(A){this._tabs.push(A);if(this.layer){append(this.layer,A.getHTML());A.init()}if(this.layer){A.resize(this.layer.clientWidth)}MochiKit.Signal.connect(A,"StackedTabResized",this,"_onStackedTabResize")}},getNumTabs:function(){return this._tabs.length},getTab:function(A){return this._tabs[A]},removeTab:function(A){if(A>=0&&A<this._tabs.length){var B=this._tabs[A];this._tabs.splice(A,1);delete _widgets[this._tabs.widx];if(B.layer){B.layer.parentNode.removeChild(B.layer)}}},_onStackedTabResize:function(){this.resize(this.getWidth())},resize:function(A,F){var C=!_saf;bobj.setOuterSize(this.layer,A,F,C);var E=this._tabs;var G=E.length;if(G){var B=this.layer.clientWidth;E[0].resize(B);if(B!=this.layer.clientWidth){B=this.layer.clientWidth;E[0].resize(B)}for(var D=1;D<G;++D){E[D].resize(B)}}}};if(typeof bobj.crv.params=="undefined"){bobj.crv.params={}}bobj.crv.params.DataTypes={DATE:"d",DATE_TIME:"dt",TIME:"t",STRING:"s",NUMBER:"n",CURRENCY:"c",BOOLEAN:"b"};bobj.crv.params.RangeBoundTypes={UNBOUNDED:0,EXCLUSIVE:1,INCLUSIVE:2};bobj.crv.params.DefaultDisplayTypes={Description:0,DescriptionAndValue:1};bobj.crv.params.CompareResults={TOO_BIG:1,TOO_SMALL:-1,EQUAL:0};bobj.crv.params.Parameter=function(B){var C=bobj.crv.params;var A=C.DefaultDisplayTypes;MochiKit.Base.update(this,{paramName:null,reportName:null,description:null,valueDataType:null,value:null,modifiedValue:null,defaultValues:null,defaultDisplayType:A.DescriptionAndValue,maxValue:null,minValue:null,allowCustomValue:true,allowDiscreteValue:true,allowMultiValue:false,allowNullValue:false,allowRangeValue:false,editMask:null,isOptionalPrompt:false,isEditable:true,isHidden:false,isDataFetching:false,attributes:null},B)};bobj.crv.params.Parameter.prototype={getTitle:function(){return(this.description||this.paramName)},getName:function(){return this.paramName},hasLOV:function(){return(this.defaultValues!=null&&this.defaultValues.length>0)},hasDescription:function(){return this.description!=null},isPassword:function(){return(this.editMask!==null&&this.editMask.toLowerCase()=="password")},getValue:function(){this._initModifiedValue();return this.modifiedValue},reset:function(){delete this.modifiedValue},removeValueAt:function(A){this._initModifiedValue();var B=this.modifiedValue[A];this.modifiedValue.splice(A,1)},setValue:function(B,D){this._initModifiedValue();if(arguments.length==1&&bobj.isArray(arguments[0])){var C=arguments[0];this.modifiedValue=C}else{if(arguments.length==2){var A=this.modifiedValue[B];this.modifiedValue[B]=D}}},clearValue:function(){this._initModifiedValue();this.modifiedValue=[]},commitValue:function(){this._initModifiedValue();this.value=this.modifiedValue.slice(0)},_initModifiedValue:function(){if(!this.modifiedValue){if(bobj.isArray(this.value)){this.modifiedValue=this.value.slice(0)}else{this.modifiedValue=[]}}},isDCP:function(){if(this.attributes!=null){if(this.attributes.IsDCP===true){return true}}return false}};bobj.crv.params.Validator=function(){};bobj.crv.params.Validator.ValueStatus={OK:0,ERROR:1,VALUE_MISSING:2,VALUE_INVALID_TYPE:3,VALUE_TOO_LONG:4,VALUE_TOO_SHORT:5,VALUE_TOO_BIG:6,VALUE_TOO_SMALL:7,VALUE_DUPLICATE:8};bobj.crv.params.Validator.getInstance=function(){if(!bobj.crv.params.Validator.__instance){bobj.crv.params.Validator.__instance=new bobj.crv.params.Validator()}return bobj.crv.params.Validator.__instance};bobj.crv.params.Validator.prototype={validateParameter:function(H){var G=bobj.crv.params;if(!H){return null}var B=G.Validator.ValueStatus;if(!bobj.isArray(H.value)||!H.value.length){return{isValid:false,reason:B.VALUE_MISSING}}var F=true;var E=[];for(var D=0,A=H.values.length;D<A;++D){var C=G.validateValue(H,D);E.push(C);F=F&&(C===ValueStatus.OK)}return{isValid:F,statusList:E}},validateValue:function(D,B){var A=bobj.crv.params.Validator.ValueStatus;if(!D||!bobj.isArray(D.value)||(B===undefined)){return A.ERROR}var C=this._getTypeValidatorFunc(D.valueDataType);if(!C){return A.ERROR}var E=bobj.crv.params.getValue(B);return C(D,E)},_getTypeValidatorFunc:function(B){var A=bobj.crv.params.DataTypes;switch(B){case A.STRING:return this._validateString;case A.NUMBER:case A.CURRENCY:return this._validateNumber;case A.DATE:case A.TIME:case A.DATE_TIME:return this._validateDateTime;case A.BOOLEAN:return this._validateBoolean;default:return null}},_validateString:function(E,C){var A=bobj.crv.params.Validator.ValueStatus;if(!bobj.isString(C)){return A.VALUE_INVALID_TYPE}var D=E.maxValue;var B=E.minValue;if(bobj.isNumber(D)&&C.length>D){return A.VALUE_TOO_LONG}if(bobj.isNumber(B)&&C.length<B){return A.VALUE_TOO_SHORT}return A.OK},_validateNumber:function(F,D){var A=bobj.crv.params.Validator.ValueStatus;var B=/^(\+|-)?(\d+((\.\d+)|(\.))?|\.\d+)$/;if(bobj.isString(D)&&B.test(D)){D=parseFloat(D)}else{if(!bobj.isNumber(D)){return A.VALUE_INVALID_TYPE}}var E=F.maxValue;var C=F.minValue;if(E!==null&&D>E){return A.VALUE_TOO_BIG}else{if(C!==null&&D<C){return A.VALUE_TOO_SMALL}else{return A.OK}}},_validateDateTime:function(E,D){var F=bobj.crv.params.CompareResults;var A=bobj.crv.params.Validator.ValueStatus;if(bobj.isObject(D)){var B=function(G){return bobj.isNumber(D[G])};if(MochiKit.Iter.every(["d","m","y","h","min","s","ms"],B)){var C=bobj.crv.params.getDateCompareFunc(E.valueDataType);if(E.minValue&&C(E.minValue,D)==F.TOO_BIG){return A.VALUE_TOO_SMALL}else{if(E.maxValue&&C(E.maxValue,D)==F.TOO_SMALL){return A.VALUE_TOO_BIG}else{return A.OK}}}}return A.VALUE_INVALID_TYPE},_validateBoolean:function(B,A){return bobj.crv.params.Validator.ValueStatus.OK}};bobj.crv.params.dateToJson=function(A){return{d:A.getDate(),m:A.getMonth(),y:A.getFullYear(),h:A.getHours(),min:A.getMinutes(),s:A.getSeconds(),ms:A.getMilliseconds()}};bobj.crv.params.getDateCompareFunc=function(B){var C=bobj.crv.params;var A=C.DataTypes;switch(B){case A.DATE:return C.compareDate;case A.TIME:return C.compareTime;case A.DATE_TIME:return C.compareDateTime;default:return null}};bobj.crv.params.compareDateTime=function(B,A){var E=bobj.crv.params;var F=E.CompareResults;var D=E.compareDate(B,A);var C=E.compareTime(B,A);if(D==F.EQUAL&&C==F.EQUAL){return F.EQUAL}if(D!=F.EQUAL){return D}else{return C}};bobj.crv.params.compareDate=function(B,A){var C=bobj.crv.params.CompareResults;if(B.d==A.d&&B.m==A.m&&B.y==A.y){return C.EQUAL}if(B.y>A.y){return C.TOO_BIG}else{if(B.y<A.y){return C.TOO_SMALL}}if(B.m>A.m){return C.TOO_BIG}else{if(B.m<A.m){return C.TOO_SMALL}}if(B.d>A.d){return C.TOO_BIG}else{if(B.d<A.d){return C.TOO_SMALL}}};bobj.crv.params.compareTime=function(B,A){var C=bobj.crv.params.CompareResults;if(B.h==A.h&&B.min==A.min&&B.s==A.s&&B.ms==A.ms){return C.EQUAL}if(B.h>A.h){return C.TOO_BIG}else{if(B.h<A.h){return C.TOO_SMALL}}if(B.min>A.min){return C.TOO_BIG}else{if(B.min<A.min){return C.TOO_SMALL}}if(B.s>A.s){return C.TOO_BIG}else{if(B.s<A.s){return C.TOO_SMALL}}if(B.ms>A.ms){return C.TOO_BIG}else{if(B.ms<A.ms){return C.TOO_SMALL}}};bobj.crv.params.jsonToDate=function(B){var A=new Date();if(B){A.setFullYear(B.y||0,B.m||0,B.d||1);A.setHours(B.h||0);A.setMinutes(B.min||0);A.setSeconds(B.s||0);A.setMilliseconds(B.ms||0)}return A};bobj.crv.params.getValue=function(A){if(A===undefined||A===null||A.value===undefined){return A}return A.value};bobj.crv.params.getDescription=function(A){if(A===undefined||A===null||A.desc===undefined){return null}return A.desc};bobj.crv.params.newParameterDialog=function(A){A=MochiKit.Base.update({id:bobj.uniqueId(),prompt:null,showCB:null,hideCB:null},A);var B=newDialogBoxWidget(A.id,L_bobj_crv_ParamsDlgTitle,A.width,A.height);bobj.fillIn(B,A);B._showDialogBox=B.show;B._initDialogBox=B.init;B._resizeSignal=null;MochiKit.Base.update(B,bobj.crv.params.ParameterDialog);return B};bobj.crv.params.ParameterDialog={init:function(){this._initDialogBox();this._form=document.getElementById(this.id+"_form")},_checkInitialization:function(){if(!this.layer){targetApp(this.getHTML());this.init()}},show:function(A){if(A){this._checkInitialization();this.doLayout();this.setResize(MochiKit.Base.noop);this._showDialogBox(true);o._resizeSignal=MochiKit.Signal.connect(window,"onresize",this,"_onWindowResize")}else{if(this.layer){this._showDialogBox(false)}bobj.crv.SignalDisposer.dispose(o._resizeSignal,true)}if(A&&this.showCB){this.showCB()}else{if(!A&&this.hideCB){this.hideCB()}}},isVisible:function(){return(this.initialized()&&this.isDisplayed())},getPreferredHeight:function(){return Math.min(Math.max(100,winHeight()-100),this.getFormHeight())},getFormHeight:function(){var A=this._form.cloneNode(true);A.style.display="none";A.style.height="";document.body.appendChild(A);var B=MochiKit.Style.getElementDimensions(A);A.innerHTML="";document.body.removeChild(A);return B.h},_onWindowResize:function(){this.doLayout();this.center()},doLayout:function(){if(this._form){this._form.style.height=this.getPreferredHeight()+"px"}},updateHtmlAndDisplay:function(C){if(C){this._checkInitialization();if(this.isDisplayed()){this.show(false)}var D=bobj.html.extractHtml(C);var H="";for(var B=0,A=D.styles.length;B<A;B++){H+=D.styles[B].text+"\n"}var E=this.id+"_stylesheet";var G=getLayer(E);if(G){MochiKit.DOM.removeElement(G)}if(H.length>0){bobj.addStyleSheet(H,E)}if(this._form){this._form.innerHTML='<div style="overflow:auto">'+D.html+"</div>"}var F=function(J,I){return function(){J.show(true);for(var M=0,K=I.length;M<K;++M){var L=I[M];if(!L){continue}if(L.text){bobj.evalInWindow(L.text)}}}}(this,D.scripts);bobj.includeCSSLinksAndExecuteCallback(D.links,F)}},getHTML:function(C){var A=bobj.html.FORM;var D=bobj.html.DIV;var B="eventCancelBubble(event);return false;";return this.beginHTML()+D({"class":"dlgFrame naviBarFrame",style:{padding:"20px 15px 5px 20px"}},A({id:this.id+"_form",style:{overflow:"auto"},onsubmit:B}))+this.endHTML()}};bobj.crv.params.newParameterPanelToolbar=function(A){A=MochiKit.Base.update({id:bobj.uniqueId()},A);var B=newPaletteContainerWidget(A.id);bobj.fillIn(B,A);B.widgetType="ParameterPanelToolbar";B._paletteContainerInit=B.init;MochiKit.Base.update(B,bobj.crv.params.ParameterPanelToolbar);B._palette=newPaletteWidget(B.id+"_palette");B.add(B._palette);var C=MochiKit.Base.bind;B.applyButton=newIconWidget(B.id+"_applyBtn",bobj.crv.allInOne.uri,C(B._onApplyClick,B),L_bobj_crv_ParamsApply,L_bobj_crv_ParamsApplyDisabledTip,16,16,3,3+bobj.crv.allInOne.paramRunDy,25,3+bobj.crv.allInOne.paramRunDy,false);B.applyButton.setClasses("","","","");B.resetButton=newIconWidget(B.id+"_resetBtn",bobj.crv.allInOne.uri,C(B._onResetClick,B),L_bobj_crv_Reset,L_bobj_crv_ResetDisabledTip,16,16,0,bobj.crv.allInOne.undoDy,16,bobj.crv.allInOne.undoDy,false);B.resetButton.setClasses("","","","");B._palette.add(B.applyButton);B._palette.add();B._palette.add(B.resetButton);return B};bobj.crv.params.ParameterPanelToolbar={init:function(){this._paletteContainerInit();this._palette.init();this.applyButton.setDisabled(true);this.resetButton.setDisabled(true)},setTabDisabled:function(C){var B=[this.applyButton,this.resetButton];for(var D=0,A=B.length;D<A;D++){var E=B[D];if(E){bobj.disableTabbingKey(E.layer,C)}}},beginHTML:function(){return bobj.html.openTag("div",{id:this.id,"class":"parameterPanelToolbar"})},getHTML:function(){return(this.beginHTML()+this._palette.getHTML()+this.endHTML())},_onApplyClick:function(){if(this.applyClickCB){bobj.crv.logger.info("UIAction ParameterPanel.Apply");this.applyClickCB()}},_onResetClick:function(){if(this.resetClickCB){this.resetClickCB()}}};bobj.crv.params.newParameterPanel=function(A){A=MochiKit.Base.update({id:bobj.uniqueId()+"_IPPanel"},A);var B=newWidget(A.id);B.widgetType="ParameterPanel";bobj.fillIn(B,A);MochiKit.Base.update(B,bobj.crv.params.ParameterPanel);B._tabPanel=bobj.crv.newStackedPanel({id:B.id+"_ParamtersStack"});B._overlayLayer=new bobj.crv.params.ParameterPanel.OverlayLayer(B.id);B._toolbar=bobj.crv.params.newParameterPanelToolbar({id:B.id+"_IPToolbar"});return B};bobj.crv.params.ParameterPanel={setToolbarCallBacks:function(B,A){if(this._toolbar){this._toolbar.applyClickCB=B;this._toolbar.resetClickCB=A}},setDisabled:function(A){this._overlayLayer.setVisible(A);this.setTabDisabled(A)},setTabDisabled:function(A){this._toolbar.setTabDisabled(A);this._tabPanel.setTabDisabled(A)},init:function(){Widget_init.call(this);this._toolbar.init();if(this._tabPanel){this._tabPanel.init()}MochiKit.Signal.signal(this,"resetParamPanel")},update:function(A){if(A&&A.cons=="bobj.crv.params.newParameterPanel"){if(A.args&&A.args.isResetParamPanel){MochiKit.Signal.signal(this,"resetParamPanel")}}},getHTML:function(){var B=bobj.html.DIV;var A={overflow:"hidden",width:this.width?bobj.unitValue(this.width):"auto",height:this.height?bobj.unitValue(this.height):"auto"};var C=this._toolbar.getHTML();if(this._tabPanel){C+=this._tabPanel.getHTML()}return B({id:this.id,style:A},C)},getBestFitHeight:function(){var A=0;if(this._tabPanel){A+=bobj.getHiddenElementDimensions(this._tabPanel.layer).h}if(this._toolbar){A+=this._toolbar.getHeight()}return A},resize:function(A,B){Widget_resize.call(this,A,B);if(this._toolbar){A=this.layer.clientWidth;this._toolbar.resize(A);if(this._tabPanel){B=this.layer.clientHeight-this._toolbar.getHeight();this._tabPanel.resize(A,B)}}},addParameter:function(B){B=MochiKit.Base.update({paramUI:null,label:null,isDataFetching:false,openAdvCB:null,clearValuesCB:null,id:this._tabPanel.id+"_P"+(this._tabPanel.getNumTabs()+1)},B);if(B.paramUI){var A=bobj.crv.newStackedTab(B);A.setContent(B.paramUI);this._tabPanel.addTab(A)}},removeParameter:function(A){this._tabPanel.removeTab(A)},getWidth:function(){if(this.layer){return this.layer.offsetWidth}return this.width},setResetButtonEnabled:function(A){this._toolbar.resetButton.setDisabled(!A);var B=A?L_bobj_crv_ResetTip:L_bobj_crv_ResetDisabledTip;this._toolbar.resetButton.changeTooltip(B,true)},setApplyButtonEnabled:function(A){this._toolbar.applyButton.setDisabled(!A);var B=A?L_bobj_crv_ParamsApplyTip:L_bobj_crv_ParamsApplyDisabledTip;this._toolbar.applyButton.changeTooltip(B,true)},isApplyButtonEnabled:function(){return this._toolbar!=null&&this._toolbar.applyButton!=null&&!this._toolbar.applyButton.isDisabled()},getIndex:function(D){var C=this._tabPanel.getNumTabs();for(var A=0;A<C;++A){var B=this._tabPanel.getTab(A);if(B.getContent()===D){return A}}return -1},getParameterTabByWidget:function(B){var A=this.getIndex(B);if(A>=0){return this._tabPanel.getTab(A)}return null},getParameter:function(A){var B=this._tabPanel.getTab(A);if(B){return B.getContent()}return null},getParameterTab:function(A){return this._tabPanel.getTab(A)},getParameterCount:function(){return this._tabPanel.getNumTabs()}};bobj.crv.params.ParameterPanel.OverlayLayer=function(A){this.paramPanelId=A;this.layer=null;this.id=bobj.uniqueId();this.widx=_widgets.length;_widgets[this.widx]=this;return this};bobj.crv.params.ParameterPanel.OverlayLayer.prototype={setVisible:function(A){if(!this.layer){this.init()}if(this.css){this.css.visibility=A?"visible":"hidden"}},isVisible:function(){if(!this.layer){this.init()}return this.css.visibility=="visible"},getHTML:function(){return"<div id = "+this.id+' onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" class="paramPanelOverLay">'+(_ie?img(_skin+"../transp.gif","100%","100%",null,"ISMAP"):"")+"</div>"},init:function(){var A=getLayer(this.paramPanelId);if(A){append2(A,this.getHTML())}Widget_init.call(this)}};function bobj_WebForm_Callback(E,H,B){if(!E||!B){return }var I=document.getElementById(B);if(!I){return }var J=[];for(var D=0,A=I.elements.length;D<A;D++){var C=I.elements[D];if(C.name&&C.value){J.push(C.name);J.push("=");J.push(encodeURIComponent(C.value));J.push("&")}}J.push("__BOBJ_CALLBACK_EVENTTARGET=");J.push(encodeURIComponent(E));J.push("&__BOBJ_CALLBACK_EVENTARGUMENT=");J.push(encodeURIComponent(H));var G=J.join("");var F=MochiKit.Async.getXMLHttpRequest();F.open("POST",I.action,true);F.setRequestHeader("Content-Type","application/x-www-form-urlencoded");F.setRequestHeader("Accept","application/json");return MochiKit.Async.sendXMLHttpRequest(F,G)}if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.crv=="undefined"){bobj.crv={}}if(typeof bobj.crv.Calendar=="undefined"){bobj.crv.Calendar={}}bobj.crv.Calendar.getInstance=function(){if(!bobj.crv.Calendar.__instance){bobj.crv.Calendar.__instance=bobj.crv.newCalendar()}return bobj.crv.Calendar.__instance};bobj.crv.Calendar.Signals={OK_CLICK:"okClick",CANCEL_CLICK:"cancelClick",ON_HIDE:"onHide"};bobj.crv.newCalendar=function(A){var C=MochiKit.Base.update;A=C({id:bobj.uniqueId()+"_calendar",showTime:false,date:new Date(),timeFormats:["HH:mm:ss","H:mm:ss","H:m:s","HH:mm","H:mm","H:m","h:mm:ss a","h:m:s a","h:mm:ssa","h:m:sa","h:mm a","h:m a","h:mma","h:ma"]},A);var B=newMenuWidget();B.widgetType="Calendar";bobj.fillIn(B,A);B._menuJustInTimeInit=B.justInTimeInit;C(B,bobj.crv.Calendar);B._curTimeFormat=B.timeFormats[0];B._cells=[];B._firstDay=0;B._numDays=0;return B};bobj.crv.Calendar._createHeaderButtons=function(){var A=8;var C=4;var B=46;var F=0;var D=12;var E=MochiKit.Base.bind;this._prevMonthBtn=newIconWidget(this.id+"_pm",_skin+"../lov.gif",E(this._onPrevMonthClick,this),"",_calendarPrevMonthLab,A,C,B,D);this._prevYearBtn=newIconWidget(this.id+"_py",_skin+"../lov.gif",E(this._onPrevYearClick,this),"",_calendarPrevYearLab,A,C,B,D);this._nextMonthBtn=newIconWidget(this.id+"_nm",_skin+"../lov.gif",E(this._onNextMonthClick,this),"",_calendarNextMonthLab,A,C,B,F);this._nextYearBtn=newIconWidget(this.id+"_ny",_skin+"../lov.gif",E(this._onNextYearClick,this),"",_calendarNextYearLab,A,C,B,F);this._prevMonthBtn.allowDblClick=true;this._prevYearBtn.allowDblClick=true;this._nextMonthBtn.allowDblClick=true;this._nextYearBtn.allowDblClick=true};bobj.crv.Calendar._createTimeTextField=function(){var A=MochiKit.Base.bind;this._timeField=newTextFieldWidget(this.id+"_time",A(this._onTimeChange,this),null,null,null,true,null,null,null,null)};bobj.crv.Calendar._createOKCancelButtons=function(){var A=MochiKit.Base.bind;this._okBtn=newButtonWidget(this.id+"_ok",L_bobj_crv_OK,A(this._onOKClick,this));this._cancelBtn=newButtonWidget(this.id+"_cancel",L_bobj_crv_Cancel,A(this._onCancelClick,this))};bobj.crv.Calendar.justInTimeInit=function(){this._menuJustInTimeInit();this._prevMonthBtn.init();this._prevYearBtn.init();this._nextMonthBtn.init();this._nextYearBtn.init();this._okBtn.init();this._cancelBtn.init();this._timeField.init();this._timeField.layer.style.width="100%";this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat));this._timeRow=getLayer(this.id+"_timeRow");this._timeSep=getLayer(this.id+"_timeSep");this._month=getLayer(this.id+"_month");this._year=getLayer(this.id+"_year");var B=6*7;for(var A=0;A<B;A++){this._cells[A]=getLayer(this.id+"_c"+A)}this._update()};bobj.crv.Calendar.getHTML=function(){var I=bobj.html;var L=I.TABLE;var B=I.TBODY;var D=I.TR;var O=I.TD;var K=I.DIV;var N=I.SPAN;var C=I.A;this._createHeaderButtons();this._createTimeTextField();this._createOKCancelButtons();var J="MenuWidget_keyDown('"+this.id+"', event); return true";var E="eventCancelBubble(event)";var M="eventCancelBubble(event)";var G="eventCancelBubble(event)";var F={"class":"calendarTextPart"};var H=L({dir:"ltr",id:this.id,border:"0",cellpadding:"0",cellspacing:"0",onkeydown:J,onmousedown:E,onmouseup:M,onkeypress:G,"class":"menuFrame",style:{cursor:"default",visibility:"hidden","z-index":10000}},B(null,D(null,O(null,this._getMonthYearHTML())),D(null,O({align:"center"},L({border:"0",cellspacing:"0",cellpadding:"0",style:{margin:"2px","margin-top":"6px"}},D({align:"center"},O(F,L_bobj_crv_SundayShort),O(F,L_bobj_crv_MondayShort),O(F,L_bobj_crv_TuesdayShort),O(F,L_bobj_crv_WednesdayShort),O(F,L_bobj_crv_ThursdayShort),O(F,L_bobj_crv_FridayShort),O(F,L_bobj_crv_SaturdayShort)),D(null,O({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),this._getDaysHTML(),D(null,O({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),D({id:this.id+"_timeRow",style:{display:this.showTime?"":"none"}},O({colspan:"7",style:{"padding-top":"3px","padding-bottom":"3px","padding-right":"10px","padding-left":"10px"}},this._timeField.getHTML())),D({id:this.id+"_timeSep",style:{display:this.showTime?"":"none"}},O({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),D(null,O({colspan:"7",align:"right",style:{"padding-bottom":"3px","padding-top":"3px"}},L(null,B(null,D(null,O(null,this._okBtn.getHTML()),O(null,this._cancelBtn.getHTML())))))))))));return this._getLinkHTML("startLink_"+this.id)+H+this._getLinkHTML("endLink_"+this.id)};bobj.crv.Calendar._getMonthYearHTML=function(){var C=bobj.html;var D=C.TABLE;var B=C.TBODY;var F=C.TR;var A=C.TD;var E=C.DIV;var G=C.SPAN;return D({"class":"dialogzone",width:"100%",cellpadding:"0",cellspacing:"0"},B(null,F(null,A({style:{"padding-top":"1px"}},this._nextMonthBtn.getHTML()),A({rowspan:"2",width:"100%",align:"center","class":"dialogzone"},G({id:this.id+"_month",tabIndex:"0"},_month[this.date.getMonth()]),"&nbsp;&nbsp;",G({id:this.id+"_year",tabIndex:"0"},this.date.getFullYear())),A({style:{"pading-top":"1px"}},this._nextYearBtn.getHTML())),F({valign:"top"},A({style:{"padding-bottom":"1px"}},this._prevMonthBtn.getHTML()),A({style:{"padding-bottom":"1px"}},this._prevYearBtn.getHTML()))))};bobj.crv.Calendar._getSeparatorHTML=function(){var C=bobj.html;var D=C.TABLE;var B=C.TBODY;var E=C.TR;var A=C.TD;return D({width:"100%",height:"3",cellpadding:"0",cellspacing:"0",border:"0",style:backImgOffset(_skin+"menus.gif",0,80)},B(null,E(null,A())))};bobj.crv.Calendar._getLinkHTML=function(A){return bobj.html.A({id:A,href:"javascript:void(0)",onfocus:"MenuWidget_keepFocus('"+this.id+"')",style:{visibility:"hidden",position:"absolute"}})};bobj.crv.Calendar._getDaysHTML=function(){var A=bobj.html.TD;var D=bobj.html.DIV;var C="";for(i=0;i<6;++i){C+='<tr align="right">';for(j=0;j<7;++j){var E=j+(i*7);var B="(this,"+E+",event);";C+=A({id:this.id+"_c"+(i*7+j),"class":"calendarTextPart",onmousedown:"bobj.crv.Calendar._onDayMouseDown"+B,onmouseover:"bobj.crv.Calendar._onDayMouseOver"+B,onmouseout:"bobj.crv.Calendar._onDayMouseOut"+B,ondblclick:"bobj.crv.Calendar._onDayDoubleClick"+B,onkeydown:"bobj.crv.Calendar._onDayKeyDown"+B},D({"class":"menuCalendar"}))}C+="</tr>"}return C};bobj.crv.Calendar._update=function(){var H=6*7;var C=this.date.getDate();var B=this._getMonthInfo(this.date.getMonth(),this.date.getFullYear());var A=B.firstDay;this._firstDay=B.firstDay;this._numDays=B.numDays;var F=""+this.date.getFullYear();while(F.length<4){F="0"+F}this._year.innerHTML=F;this._month.innerHTML=_month[this.date.getMonth()];this._selectedDate=null;for(var E=0;E<H;E++){var G=this._cells[E].firstChild;var I="menuCalendar";var D=this._getDateFromCellNum(E);if(D<1||D>B.numDays){G.innerHTML="";G.tabIndex="-1"}else{G.innerHTML=""+D;G.tabIndex="0";if(D==C){I="menuCalendarSel";this._selectedDay=G}}G.className=I}};bobj.crv.Calendar._getMonthInfo=function(F,E){var C=new Date();C.setDate(1);C.setFullYear(E);C.setMonth(F);var A=C.getDay();C.setDate(28);var B=28;for(var D=29;D<32;D++){C.setDate(D);if(C.getMonth()!=F){break}B=D}return{firstDay:A,numDays:B}};bobj.crv.Calendar._setDayOfMonth=function(A){if(A>0&&A<=this._numDays){var C=this.date.getDate();if(A!=C){var B=this._getCellFromDate(C);if(B){B.firstChild.className="menuCalendar"}this._getCellFromDate(A).firstChild.className="menuCalendarSel";this.date.setDate(A)}}};bobj.crv.Calendar._getCellFromDate=function(A){var B=A+this._firstDay-1;return this._cells[B]};bobj.crv.Calendar._getDateFromCellNum=function(A){return A-this._firstDay+1};bobj.crv.Calendar._onDayMouseOver=function(C,E,B){var D=getWidget(C);var F=C.firstChild;var A=E-D._firstDay+1;if(A<1||A>D._numDays){F.className="menuCalendar"}else{F.className="menuCalendarSel"}};bobj.crv.Calendar._onDayMouseOut=function(C,E,B){var D=getWidget(C);var F=C.firstChild;var A=E-D._firstDay+1;if(A!=D.date.getDate()){F.className="menuCalendar"}};bobj.crv.Calendar._onDayMouseDown=function(C,E,B){var D=getWidget(C);var A=E-D._firstDay+1;D._setDayOfMonth(A)};bobj.crv.Calendar._onDayDoubleClick=function(B,D,A){var C=getWidget(B);C._onOKClick()};bobj.crv.Calendar._onDayKeyDown=function(D,F,C){C=new MochiKit.Signal.Event(D,C);var B=C.key().string;if(B==="KEY_ENTER"){var E=getWidget(D);var A=F-E._firstDay+1;E._setDayOfMonth(A)}};bobj.crv.Calendar._onPrevMonthClick=function(){var B=this.date;var A=B.getMonth();if(B.getMonth()===0){B.setYear(B.getFullYear()-1);B.setMonth(11)}else{B.setMonth(B.getMonth()-1);if(A===B.getMonth()){B.setMonth(A-1)}}this._update()};bobj.crv.Calendar._onPrevYearClick=function(){this.date.setFullYear(this.date.getFullYear()-1);this._update()};bobj.crv.Calendar._onNextMonthClick=function(){var B=this.date;var A=B.getMonth();B.setMonth(B.getMonth()+1);if((A+1)<B.getMonth()){B.setMonth(A+1)}this._update()};bobj.crv.Calendar._onNextYearClick=function(){this.date.setFullYear(this.date.getFullYear()+1);this._update()};bobj.crv.Calendar._onOKClick=function(){this.restoreFocus();MochiKit.Signal.signal(this,this.Signals.OK_CLICK,this._copyDate(this.date));this.show(false)};bobj.crv.Calendar._copyDate=function(A){if(A){return new Date(A.getFullYear(),A.getMonth(),A.getDate(),A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds())}return new Date()};bobj.crv.Calendar._onCancelClick=function(){this.restoreFocus();this.show(false);MochiKit.Signal.signal(this,this.Signals.CANCEL_CLICK)};bobj.crv.Calendar._onTimeChange=function(){var D=this._timeField.getValue();var A=null;var C=null;for(var B=0;B<this.timeFormats.length&&A===null;++B){C=this.timeFormats[B];A=bobj.external.date.getDateFromFormat(D,C)}if(A){this._curTimeFormat=C;this.date.setHours(A.getHours());this.date.setMinutes(A.getMinutes());this.date.setSeconds(A.getSeconds());this.date.setMilliseconds(A.getMilliseconds())}else{this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat))}};bobj.crv.Calendar.setShowTime=function(B){var A=B?"":"none";this.showTime=B;if(this.layer){this._timeRow.style.display=A;this._timeSep.style.display=A}};bobj.crv.Calendar.setDate=function(A){this.date=A;if(this.layer){this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat));this._update()}};bobj.crv.Calendar.show=function(D,A,E,C,B){ScrollMenuWidget_show.call(this,D,A,E);if(D){this.focus()}else{MochiKit.Signal.signal(this,this.Signals.ON_HIDE)}};bobj.crv.Calendar.focus=function(){if(this._selectedDay){this._selectedDay.focus()}};bobj.crv.params.ViewerFlexParameterAdapter={_viewerLayoutType:[],_promptData:[],_paramCtrl:[],_iParam:[],_iPromptUnitData:[],_iParamData:[],_moveArea:null,setViewerLayoutType:function(B,A){this._viewerLayoutType[B]=A},setPromptData:function(F,E,B){if(!B){this._promptData[F]=E;this.clearIParamPromptUnitData(F)}else{for(var C=0,A=E.length;C<A;C++){var D=E[C];this._addIParamPromptUnitData(F,D.id,D.names,D.data)}}},setCurrentIParamInfo:function(C,B,A){this._paramCtrl[C]=B;this._iParam[C]=A},getShowMinUI:function(A){return this.hasIParamPromptUnitData(A)},getWidth:function(A){if(this.hasIParamPromptUnitData(A)){return 300}else{return this.getSWFWidth(A)}},getHeight:function(A){if(this.hasIParamPromptUnitData(A)){return 315}else{return this.getSWFHeight(A)}},getScreenHeight:function(B){var A=MochiKit.Style.getElementDimensions(getLayer(B));return A.h-2},getScreenWidth:function(B){var A=MochiKit.Style.getElementDimensions(getLayer(B));return A.w-2},getSWFHeight:function(E){var B=bobj.crv.Viewer.LayoutTypes;var D=B.CLIENT;if(this._viewerLayoutType[E]){D=this._viewerLayoutType[E]}var C=D===B.FIXED?0:480;var A=this.getScreenHeight(E);return Math.max(C,A-200)},getSWFWidth:function(B){var A=this.getScreenWidth(B);return Math.min(600,A-20)},getAllowFullScreen:function(A){return !this.hasIParamPromptUnitData(A)},hasIParamPromptUnitData:function(A){return(this._iPromptUnitData[A]!=null)&&(this._iParamData[A]!=null)&&(this._iParam[A]!=null)},_addIParamPromptUnitData:function(F,E,D,C){if(!this.hasIParamPromptUnitData(F)){this._iPromptUnitData[F]=[];this._iParamData[F]=[]}this._iPromptUnitData[F][E]=C;for(var B=0,A=D.length;B<A;B++){this._iParamData[F][D[B]]=E}},clearIParamPromptUnitData:function(A){if(!this.hasIParamPromptUnitData(A)){return }delete this._iPromptUnitData[A];delete this._iParamData[A];delete this._iParam[A]},getPromptData:function(B){if(this.hasIParamPromptUnitData(B)){var A=this._iParamData[B][this._iParam[B].paramName];if(A){return this._iPromptUnitData[B][A]}}return this._promptData[B]},startDrag:function(D){var B=bobj.crv.params.FlexParameterBridge.getSWF(D);if(B){if(this._moveArea){return }this._moveArea=document.createElement("div");this._moveArea.id=bobj.uniqueId();MOVE_STYLE=this._moveArea.style;var A=B.style;var C=B.parentNode.style;MOVE_STYLE.top=C.top;MOVE_STYLE.left=C.left;MOVE_STYLE.width=A.width?A.width:B.width+"px";MOVE_STYLE.height=A.height?A.height:B.height+"px";MOVE_STYLE.border="1px";MOVE_STYLE.borderStyle="solid";MOVE_STYLE.borderColor="#000000";MOVE_STYLE.backgroundColor="#FFFFFF";MOVE_STYLE.position="absolute";MOVE_STYLE.opacity=0.5;MOVE_STYLE.filter="alpha(opacity=50)";MOVE_STYLE.zIndex=bobj.constants.modalLayerIndex-1;document.body.appendChild(this._moveArea);document.body.style.cursor="move"}},stopDrag:function(B){if(this._moveArea){var A=MochiKit.Style.getElementPosition(this._moveArea);this.move(B,A.x,A.y);document.body.removeChild(this._moveArea);delete this._moveArea;document.body.style.cursor="default"}},drag:function(D,L,K){var O=bobj.crv.logger;O.info("doMove Called viewer:"+D+" x:"+L+" y:"+K);var J=getLayer(D);if(!J){O.error("Shifting SWF could not find the viewer:"+D);return }var H=this._moveArea;if(!H){O.error("Unable to move SWF, no move area available");return }var G=H.offsetLeft;var F=H.offsetTop;var N=H.offsetHeight;var I=H.offsetWidth;var C=J.offsetLeft;var B=J.offsetTop;var M=J.offsetHeight;var E=J.offsetWidth;var A=G+L;var P=F+K;if(P<B){P=B}else{if(P+N>B+M){P=M-N}}if(A<C){A=C}else{if(A+I>C+E){A=E-I}}H.style.top=P+"px";H.style.left=A+"px";O.info("Moved the SWF to x:"+A+" y:"+P)},move:function(E,A,D){var B=bobj.crv.params.FlexParameterBridge.getSWF(E);if(B){var C=new MochiKit.Style.Coordinates(A,D);MochiKit.Style.setElementPosition(B.parentNode,C)}},setParamValues:function(B,A){bobj.crv.logger.info("setting parameter values");if(this.hasIParamPromptUnitData(B)){this._setIParamValues(B,A)}else{this._setFullParamValues(B,A);this.closeDialog(B)}},_setFullParamValues:function(B,A){bobj.event.publish("crprompt_flexparam",B,A)},_setIParamValues:function(C,B){var F=this._iParam[C];var A=this._paramCtrl[C];var H=this._iParamData[C];var I=this._iPromptUnitData[C];if(!F||!A||!H||!I||B.length!=1){return }var K=B[0];var D=K.prompts;for(var G=0,J=D.length;G<J;G++){var E=D[G];if(!E||!E.name||!E.values){continue}A.updateParameter(decodeURI(E.name),this._convertFlexValues(E,F.valueDataType))}A._updateToolbar();this._updatePromptData(C,K,F.valueDataType);this.closeDialog(C)},_updatePromptData:function(A,I,K){var M=I.prompts;var F=this._iPromptUnitData[A][I.id];var H=F.promptUnits[0];var J=H.prompts;for(var G=0,E=J.length;G<E;G++){var B=J[G];for(var D=0,L=M.length;D<L;D++){var C=M[D];if(B.id==C.id){B.values=this._unescapeFlexValues(C.values,K);break}}}},_unescapeFlexValues:function(B,D){if(D!=bobj.crv.params.DataTypes.STRING){return B}for(var C=0,A=B.length;C<A;C++){this._unescapeFlexValue(B[C],D)}return B},_unescapeFlexValue:function(B,D){if(D!=bobj.crv.params.DataTypes.STRING){return }if((B.value!==undefined&&B.value!==null)){B.value=decodeURI(B.value);if(B.labels!==undefined&&B.labels!==null){for(var C=0,A=B.labels.length;C<A;C++){B.labels[C]=decodeURI(B.labels[C])}}}else{if(B.start){this._unescapeFlexValue(B.start,D)}if(B.end){this._unescapeFlexValue(B.end,D)}}},_getDescriptionIndex:function(B){var C=B.lovValueIndex;var E=B.lovFieldTypes;if(C!==undefined&&E!==undefined){for(var D=0,A=E.length;D<A;D++){if(D!=C&&E[D]=="s"){return D}}}return -1},_convertFlexValues:function(B,E){var G=this._getDescriptionIndex(B);var C=B.values;var F=[];for(var D=0,A=C.length;D<A;D++){F.push(this._convertFlexValue(C[D],E,G))}return F},_convertFlexValue:function(A,D,E){var C={};if((A.value!==undefined&&A.value!==null)){if(E>-1&&A.labels&&A.labels.length>E){C.desc=decodeURI(A.labels[E])}var B=bobj.crv.params.DataTypes;switch(D){case B.DATE:case B.TIME:case B.DATE_TIME:C.value=this._convertDateTimeFlexValue(A.value,D);break;default:C.value=decodeURI(A.value);break}}else{if(A.start){C.lowerBoundType=A.start.inc==true?2:1;C.beginValue=this._convertFlexValue(A.start,D)}else{C.lowerBoundType=0}if(A.end){C.upperBoundType=A.end.inc==true?2:1;C.endValue=this._convertFlexValue(A.end,D)}else{C.upperBoundType=0}}return C},_convertDateTimeFlexValue:function(A,D){var B=bobj.crv.params.DataTypes;var C={};var E=A.split(",");switch(D){case B.DATE:C.y=parseInt(E[0].substring(5),10);C.m=parseInt(E[1],10)-1;C.d=parseInt(E[2].substring(E[2].length-1,0),10);break;case B.TIME:C.h=parseInt(E[0].substring(5),10);C.min=parseInt(E[1],10);C.s=parseInt(E[2].substring(E[2].length-1,0),10);C.ms=0;break;case B.DATE_TIME:C.y=parseInt(E[0].substring(9),10);C.m=parseInt(E[1],10)-1;C.d=parseInt(E[2],10);C.h=parseInt(E[3],10);C.min=parseInt(E[4]);C.s=parseInt(E[5].substring(E[5].length-1,0),10);C.ms=0;break}return C},logon:function(B,A){bobj.crv.logger.info("logging on");this.closeDialog(B);bobj.event.publish("crprompt_flexlogon",B,A)},processingCancel:function(B){var A=getWidgetFromID(B);if(A&&A._reportProcessing){A._reportProcessing.cancelShow()}},processingDelayedShow:function(B){var A=getWidgetFromID(B);if(A&&A._reportProcessing){A._reportProcessing.delayedShow()}},logger:function(A){bobj.crv.logger.info(A)},getSWFBaseURL:function(){return bobj.crvUri("../../swf/")},getSWFID:function(){return bobj.uniqueId()},getZIndex:function(){return bobj.constants.modalLayerIndex},getUseSavedData:function(A){return this.hasIParamPromptUnitData(A)},closeDialog:function(B){var A=getWidgetFromID(B);if(A){A.hideFlexPromptDialog()}},getUseOKCancelButtons:function(A){return this.hasIParamPromptUnitData(A)},getIsDialog:function(A){return true},getShouldAutoResize:function(A){return true},setVisibility:function(C){var A=bobj.crv.params.FlexParameterBridge.getSWF(C);if(A){var B=A.parentNode.style;B.position="absolute";B.visibility="visible";B.borderStyle="none";B.opacity=1;if(A.focus!==undefined){A.focus()}}},getReportStateInfo:function(B){var A=bobj.crv.stateManager.getComponentState(B);if(A&&A.common&&A.common.reqCtx){return MochiKit.Base.serializeJSON(A.common.reqCtx)}},setReportStateInfo:function(C,A){var B=bobj.crv.stateManager.getComponentState(C);if(B&&B.common&&B.common.reqCtx){B.common.reqCtx=MochiKit.Base.evalJSON(unescape(A))}},sendAsyncRequest:function(B,A){bobj.event.publish("crprompt_asyncrequest",B,A)},readyToShow:function(A){this.processingCancel(A)}};if(typeof (bobj.crv.SignalDisposer)=="undefined"){bobj.crv.SignalDisposer=new function(){var A=[];var D=null;var C=20;var B=MochiKit.Signal.disconnect;this.dispose=function(F,E){if(F!=null){if(E){B(F)}else{A.push(F);if(D==null){D=setInterval(bobj.bindFunctionToObject(cleanTask,this),100)}}}};cleanTask=function(){var E=C;while(A.length>0&&E>0){B(A.pop());E--}if(A.length==0&&D!=null){clearInterval(D);D=null}}}};